{"version":3,"sources":["static/img sync /^/img.*/.jpg$","static/img/img1.jpg","static/img/img10.jpg","static/img/img11.jpg","static/img/img12.jpg","static/img/img13.jpg","static/img/img14.jpg","static/img/img15.jpg","static/img/img16.jpg","static/img/img17.jpg","static/img/img2.jpg","static/img/img3.jpg","static/img/img4.jpg","static/img/img5.jpg","static/img/img6.jpg","static/img/img7.jpg","static/img/img8.jpg","static/img/img9.jpg","static/img/avator.jpeg","reducers/common.js","containers/loginToast.js","util/post.js","service/fetch.js","components/Music.js","containers/Home.js","reducers/imgs.js","reducers/articles.js","reducers/index.js","components/photograph/Img.js","components/photograph/ImgList.js","components/photograph/UploadImg.js","components/Header.js","components/Loading.js","containers/photograph/ImgList.js","components/Comment.js","containers/photograph/ImgDetail.js","containers/photograph/Group.js","components/article/Article.js","components/article/ArticleList.js","containers/article/ArticleList.js","containers/article/ArticleDetail.js","components/article/EditForm.js","components/article/EditContent.js","containers/article/EditArticle.js","components/article/editTag.js","containers/article/Tags.js","index.js"],"names":["map","./img1.jpg","./img10.jpg","./img11.jpg","./img12.jpg","./img13.jpg","./img14.jpg","./img15.jpg","./img16.jpg","./img17.jpg","./img2.jpg","./img3.jpg","./img4.jpg","./img5.jpg","./img6.jpg","./img7.jpg","./img8.jpg","./img9.jpg","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","p","changeCurNav","nav","type","changeLoginStatus","isLogined","changeUserType","isAdmin","LoginForm","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleSubmit","preventDefault","form","validateFields","err","values","register","then","result","data","window","localStorage","setItem","res","concat","source","name","toast","dismiss","login","user","state","btnText","setState","getFieldDecorator","react_default","a","createElement","es_form","onSubmit","className","Item","label","rules","required","message","input","placeholder","es_button","htmlType","React","Component","loginToast","Form","create","connect","commonReducer","dispatch","isLogin","get","_ref","asyncToGenerator","regenerator_default","mark","_callee","url","wrap","_context","prev","next","fetch","method","headers","Accept","Content-Type","credentials","sent","json","resCode","error","position","POSITION","TOP_RIGHT","console","log","abrupt","t0","stop","_x","apply","arguments","post","_ref2","_callee2","body","_context2","JSON","stringify","containers_loginToast","autoClose","closeOnClick","draggable","_x2","_x3","formPost","_ref3","_callee3","formData","_context3","_x4","_x5","DEV_URL","publishImgs","group","uploadImg","deleteImgById","params","_id","imgName","group_id","addImgFavor","getArticleDetail","typeNum","comment","getTags","musics","Home","title","frameBorder","border","marginWidth","marginHeight","width","height","src","Math","floor","random","length","Link","Anchor","bgHeight","document","documentElement","clientHeight","screenChange","nextProps","nextState","someData","_this2","addEventListener","_this3","Music_Home","text","item","i","imgStyle","backgroundImage","require","backgroundSize","key","style","to","es_anchor","Home_Link","href","initImgs","imgs","pageNum","addImg","img","deleteImg","imgIndex","addImgFavorCount","index","initArticles","articles","setCurArticle","article","initTags","tags","reducer","combineReducers","imgsReducer","action","curImg","objectSpread","toConsumableArray","slice","forEach","push","favor_count","articlesReducer","curArticle","articleIndex","cur","tag","tagIndex","curNav","Boolean","getItem","bgColors","Img","toImgDetailPage","context","router","history","toGroupImg","groupId","stopPropagation","imgBoxStyle","background","showGroupBtn","onResizeHandler","location","pathname","indexOf","onresize","resizeThrottle","bind","refs","imgBox","clientWidth","h","w","fn","wait","immediate","timer","args","setTimeout","onClick","ref","alt","icon","onDeleteImg","contextTypes","PropTypes","object","isRequired","ImgList","react_masonry_component_lib_default","disableImagesLoaded","updateOnEachImageLoad","options","transitionDuration","Img_Img","textAlign","defaultProps","PicturesWall","previewVisible","previewImage","fileList","handleCancel","handlePreview","file","thumbUrl","onUploadRemove","info","uid","splice","getUploadList","handleChange","FormData","append","filename","getImgWH","fileName","status","v","cb","reader","FileReader","onload","target","image","Image","readAsDataURL","_this$state","uploadButton","es_upload","listType","multiple","customRequest","upload","onPreview","onRemove","onChange","modal","visible","footer","onCancel","UploadImg","handleOk","imgList","getFieldsValue","visibleHandler","resetFields","imglist","onAddImg","list","categorys","Option","Select","onOk","UploadImg_PicturesWall","layout","initialValue","es_select","handleTypeChange","value","articleNavArr","imgNavArr","Header","navClickHandler","child","activeIndex","showMenu","undefined","handleNavChange","navArr","isLargeScreen","loginText","formParentNav","removeItem","_this4","content","menu","es_menu","item1","dropdown","overlay","trigger","quitHandle","loginHandle","toggleMenu","Loading","loadMore","show","spin","size","handleClick","ImgListContainer","flag","dialogVisible","loading","showLoading","noMore","loadImgs","category","fetchImgs","split","imgId","components_Header","photograph_UploadImg","spinning","ImgList_ImgList","handleAddImgFavor","handleDeleteImg","Loading_Loading","back_top","getElementsByClassName","TextArea","Input","CommentList","comments","dataSource","header","itemLayout","renderItem","es_comment","Editor","submitting","rows","MyComment","receiver","resComment","author","sender","avatar","created_at","datetime","senderInfo","Comment_CommentList","es_avatar","Comment_Editor","ImgDetail","resizeImgHandler","imgEnlargeble","commentImg","lastOrNextImg","getImgDetail","match","curPage","clickTypeNum","warning","handleBrowser","num","assign","pv","_this5","join","goBack","clickImgFavorHandler","Comment_MyComment","groupInfo","Article","cover_url","v-if","viewDetail","deleteArticle","editArticle","description","ArticleList","Article_Article","ArticleListContainer","onEditArticle","articleId","onViewDetail","search","route","substring","loadArticles","getArticlesByTagName","fetchArticles","coverName","ArticleList_ArticleList","onDeleteArticle","ArticleDetail","lastOrNextArticle","articleDetail","commentArticle","backListPage","date","replace","react_highlight_default","innerHTML","ArticleForm","getFormData","selectedTags","coverUrl","onRef","setFieldsValue","initForm","option","uploadCover","selects","allTags","row","col","span","mode","handleTagChange","onUploadCover","showUploadList","EditContent","editorContent","elem","editorElem","editor","E","customConfig","uploadImgShowBase64","onchange","html","txt","EditArticleContainer","resetCurArticle","getContent","createArticle","EditForm","wrappedComponentRef","EditContent_EditContent","saveArticleHandler","obj","EditTag","handleClose","removedTag","deleteTag","showInput","inputVisible","focus","handleInputChange","inputValue","handleInputConfirm","addTag","saveInputRef","forMap","tagElem","es_tag","closable","onClose","clickTagHandler","assertThisInitialized","display","tagChild","marginBottom","rc_tween_one_es","enter","scale","opacity","duration","onComplete","leave","appear","onBlur","onPressEnter","borderStyle","Tags","editTag_EditTag","tagId","createTag","store","createStore","process","ReactDOM","render","es","BrowserRouter","Route","exact","path","component","Group","EditArticle","ArticlesTags","lib","getElementById"],"mappings":"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","file":"static/js/main.8f678055.chunk.js","sourcesContent":["var map = {\n\t\"./img1.jpg\": 340,\n\t\"./img10.jpg\": 341,\n\t\"./img11.jpg\": 342,\n\t\"./img12.jpg\": 343,\n\t\"./img13.jpg\": 344,\n\t\"./img14.jpg\": 345,\n\t\"./img15.jpg\": 346,\n\t\"./img16.jpg\": 347,\n\t\"./img17.jpg\": 348,\n\t\"./img2.jpg\": 349,\n\t\"./img3.jpg\": 350,\n\t\"./img4.jpg\": 351,\n\t\"./img5.jpg\": 352,\n\t\"./img6.jpg\": 353,\n\t\"./img7.jpg\": 354,\n\t\"./img8.jpg\": 355,\n\t\"./img9.jpg\": 356\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 339;","module.exports = __webpack_public_path__ + \"static/media/img1.3351d8f8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img10.39e739c8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img11.e2702cdd.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img12.88a76fdb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img13.366199ec.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img14.8585d4a4.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img15.9a5b0b40.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img16.331a8661.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img17.8b7b57fc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img2.5f0110bf.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img3.fad77519.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img4.32cf8853.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img5.1a6f3ceb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img6.dadad061.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img7.1c35e8bb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img8.7f8bb6f5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img9.1bcce4d0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avator.8bf53cd0.jpeg\";","const CHANGE_CUR_NAV = 'CHANGE_CUR_NAV'\nconst CHANGE_LOGIN_STATUS = 'CHANGE_LOGIN_STATUS'\nconst CHANGE_USER_TYPE = 'CHANGE_USER_TYPE'\n\nexport default function(state, action) {\n    if(!state) {\n        // 初始化\n        state = { \n            curNav: '',             // 当前header选中标签\n            isLogined: Boolean(window.localStorage.getItem('user')),         // 是否登录\n            isAdmin: window.localStorage.getItem('type') === '1',    // 是否是管理员 \n        }; \n    }\n\n    switch (action.type) {\n        case CHANGE_CUR_NAV: \n            return {\n                ...state,\n                curNav: action.nav\n            }\n        \n        case CHANGE_LOGIN_STATUS:\n            return {\n                ...state,\n                isLogined: action.isLogined\n            }\n        \n        case CHANGE_USER_TYPE:\n            console.log('isAdmin', action.isAdmin);\n            return {\n                ...state,\n                isAdmin: action.isAdmin\n            }\n            \n        default: \n            return state;\n    }\n}\nexport const changeCurNav = (nav) => {\n    return { type: CHANGE_CUR_NAV, nav }\n}\n\nexport const changeLoginStatus = (isLogined) => {\n    return { type: CHANGE_LOGIN_STATUS, isLogined }\n}\n\nexport const changeUserType = (isAdmin) => {\n    return { type: CHANGE_USER_TYPE, isAdmin }\n}\n\n\n\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, Input, Button } from 'antd';\nimport { toast } from \"react-toastify\";\nimport { login, register } from \"../service/fetch\";\nimport { connect } from 'react-redux'\nimport { changeLoginStatus, changeUserType } from '../reducers/common'\n\nclass LoginForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            btnText: '注册',\n        }\n    }\n    static propTypes = {\n        type: PropTypes.number, // 0 注册, 1 登录\n    }\n    componentDidMount() {\n        this.setState({\n            btnText: this.props.type === 0 ? '注 册' : '登 录'\n        })\n    }\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                if(this.props.type === 0) {\n                    register(values).then(result => {\n                        const { data } = result;\n                        if (data) {\n                            window.localStorage.setItem('type', data.res.type);\n                            window.localStorage.setItem('user', `来自${data.res.source}的${data.res.name}`);\n                            toast.dismiss();\n                            this.props.changeLoginStatus(true); \n                            this.props.changeUserType(data.res.type === 1);\n                        }\n                    });\n                } else {\n                    login(values).then(result => {\n                        const { data } = result;\n                        if (data) {\n                            window.localStorage.setItem('type', data.user.type);\n                            window.localStorage.setItem('user', `来自${data.user.source}的${data.user.name}`);\n                            toast.dismiss();\n                            this.props.changeLoginStatus(true);\n                            this.props.changeUserType(data.user.type === 1);\n                        }\n                    });\n                }\n            }\n        });\n    }\n\n    render() {\n        const { getFieldDecorator } = this.props.form;\n        return (\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                { this.props.type === 0 && \n                    <div>\n                        <Form.Item label=\"一个来自\">\n                        {getFieldDecorator('source', {\n                            rules: [{ required: true, message: '我要知道你从哪里来啊朋友' }],\n                        })(\n                            <Input placeholder=\"社交平台\" />\n                        )}\n                    </Form.Item>\n                    <Form.Item label=\"的\">\n                        {getFieldDecorator('name', {\n                            rules: [{ required: true, message: '我要知道你的名字啊朋友' }],\n                        })(\n                            <Input placeholder=\"小可爱\" />\n                        )}\n                </Form.Item>        \n                    </div>\n                }\n                <Form.Item label=\"邮箱\">\n                    {getFieldDecorator('email', {\n                        rules: [{ required: true, message: '我要知道你的名字啊朋友' }],\n                    })(\n                        <Input placeholder=\"邮箱\" />\n                    )}\n                </Form.Item>\n                <Form.Item label=\"密码\">\n                    {getFieldDecorator('password', {\n                        rules: [{ required: true, message: '我要知道你的名字啊朋友' }],\n                    })(\n                        <Input type=\"password\" placeholder=\"密码\" />\n                    )}\n                </Form.Item>\n                <Form.Item>\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">{ this.state.btnText }</Button>\n                </Form.Item>\n            </Form>\n        );\n    }\n}\n\nconst loginToast = Form.create({ name: 'normal_login' })(LoginForm);\n\nconst mapStateToProps = (state) => {\n    return {\n        isLogined: state.commonReducer.isLogined,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeLoginStatus: (isLogin) => {\n            dispatch(changeLoginStatus(isLogin));\n        },\n        changeUserType: (isAdmin) => {\n            dispatch(changeUserType(isAdmin));\n        }\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(loginToast)\n","import { toast } from \"react-toastify\";\nimport React from 'react'\nimport LoginForm from '../containers/loginToast';\n\nconst CREDENTIALS = process.env.ORIGIN ? \"include\" : \"same-origin\";\n\nexport const get = async url => {\n  try {\n    var result = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      credentials: CREDENTIALS\n    });\n    const data = await result.json();\n    if (data.resCode === 500) {\n      toast.error(data.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      if (data.resCode === 401) {\n        console.log(\"USER_INVALID\");\n        return;\n      }\n      throw new Error(data.message);\n    }\n    return {\n      data\n    };\n  } catch (e) {\n    return {\n      code: -2,\n      message: e.message\n    };\n  }\n};\n\nexport const post = async (url, body) => {\n  try {\n    var result = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body),\n      credentials: CREDENTIALS\n    });\n    const data = await result.json();\n    if (data.resCode !== 200) {\n      if (data.resCode === 401) {\n        console.log(\"USER_INVALID\");\n        toast(<LoginForm />,{\n          autoClose: false,\n          closeOnClick: false,\n          draggable: false,\n        });\n      } else {\n        toast.error(data.message, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n      throw new Error(data.message);\n    }\n    return {\n      data\n    };\n  } catch (e) {\n    return {\n      message: e.message,\n    };\n  }\n};\n\nexport const formPost = async (url, formData) => {\n  try {\n    var result = await fetch(url, {\n      method: \"POST\",\n      // headers: {\n        // \"Content-Type\": \"multipart/form-data\"\n      // },\n      body: formData\n    });\n    const data = await result.json();\n    if (data.resCode === 500) {\n      toast.error(data.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      throw new Error(data.message);\n    }\n    return {\n      data\n    };\n  } catch (e) {\n    return {\n      code: -2,\n      message: \"未知错误\"\n    };\n  }\n};","import { get, post, formPost } from \"../util/post\";\n\nconst DEV_URL = process.env.NODE_ENV === 'development' ? 'http://localhost:3000' : 'http://www.huangchufeng.site:3000';\n\n// 发布照片\nexport const publishImgs = group => {\n  return post(`${DEV_URL}/api/imgs/publish`, group);\n};\n\n// 上传图片\nexport const uploadImg = group => {\n  return formPost(`${DEV_URL}/api/uploadImg`, group);\n};\n\n/*\n    请求所有的照片\n    /api/imgs\n */\nexport const fetchImgs = (params) => {\n  return get(`${DEV_URL}/api/imgs?pageNum=${params.pageNum}&category=${params.category}`);\n};\n\n// 获取组图\nexport const fetchGroupImgs = (groupId) => {\n  return get(`${DEV_URL}/api/groupImgs?groupId=${groupId}`);\n};\n\n// 获取照片详情\nexport const getImgDetail = (id, typeNum) => {\n  return get(`${DEV_URL}/api/imgs/${id}?typeNum=${typeNum}`);\n};\n\n// 删除照片\nexport const deleteImgById = params => {\n  return get(`${DEV_URL}/api/imgs/${params._id}/remove?imgName=${params.imgName}&groupId=${params.group_id}`);\n};\n\n// 更新文章浏览量\nexport const addImgPv = (id, num) => {\n  return get(`${DEV_URL}/api/imgs/${id}/addImgPv`, {\n    num: num,\n  });\n};\n\n// 更新文章喜欢数量\nexport const addImgFavor = (id) => {\n  return get(`${DEV_URL}/api/imgs/${id}/addImgFavor`);\n};\n\n\nexport const login = (user) => {\n  return post(`${DEV_URL}/api/user/login`, user);\n};\n\nexport const register = (user) => {\n  return post(`${DEV_URL}/api/user/register`, user);\n};\n\n// 退出\nexport const quit = () => {\n  return get(`${DEV_URL}/api/user/quit`);\n};\n\n// 获取文章列表\nexport const fetchArticles = (params) => {\n  return get(`${DEV_URL}/api/articles?pageNum=${params.pageNum}&type=${params.type}`);\n};\n\n// 获取文章详情\nexport const getArticleDetail = (id, typeNum) => {\n  return get(`${DEV_URL}/api/articles/${id}?typeNum=${typeNum}`);\n};\n\n// 创建文章\nexport const createArticle = article => {\n  return post(`${DEV_URL}/api/articles/create`, {\n    article: article\n  });\n};\n\n// 删除文章\nexport const deleteArticleById = params => {\n  return get(`${DEV_URL}/api/articles/${params.articleId}/remove?coverName=${params.coverName}`);\n};\n\n// 更新文章\nexport const updateArticleById = (id, article) => {\n  return post(`${DEV_URL}/api/articles/${id}/update`, {\n    article: article,\n  });\n};\n\n// 更新文章浏览量\nexport const addArticlePv = (id) => {\n  return get(`${DEV_URL}/api/articles/${id}/addArticlePv`);\n};\n\n// 发表评论\nexport const comment = (id, comment) => {\n  return post(`${DEV_URL}/api/${id}/comment`, comment);\n};\n\n// 增加新标签\nexport const createTag = (tag) => {\n  return post(`${DEV_URL}/api/articleTags/create`, tag);\n};\n\n// 删除标签\nexport const removeTag = params => {\n  return get(`${DEV_URL}/api/articleTags/${params.tagId}/remove`);\n};\n\n// 获取所有标签\nexport const getTags = params => {\n  return get(`${DEV_URL}/api/articleTags`);\n};\n\n// 获取某篇文章的所有标签\nexport const getTagsByArticleId = params => {\n  return get(`${DEV_URL}/api/articleTags/${params.articleId}`);\n};\n\n// 根据标签name获取对应文章\nexport const getArticlesByTagName = tag => {\n  return get(`${DEV_URL}/api/tag/articles?tag=${tag}`);\n};\n\n\n\n// 获取当前城市\nexport const getLocation = params => {\n  return get(`http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js`);\n};","import React, { Component } from 'react'\n\nconst musics = ['3940933', '3947469', '428350031', '448917907', '19466001', '29729012', '16649839', '1651735', '21469678', '410925920', \n'425684928', '466333783', '400690256', '19535983', '4405800', '3947469', '4111185', '18861490', '462516170', '417833085'];\nexport default class Home extends Component {\n  render() {\n    return (\n      <div className=\"music-wrap\">\n        <iframe id=\"musicFrame\" title=\"music\" frameBorder=\"no\" border=\"0\" marginWidth=\"0\" marginHeight=\"0\" width=\"200\" height=\"86\"\n         src={`//music.163.com/outchain/player?type=2&id=${musics[Math.floor(Math.random()*musics.length)]}&auto=1&height=66`}>\n        </iframe>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react'\nimport { Anchor } from 'antd';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { getLocation } from \"../service/fetch\";\nimport Music from '../components/Music'\nimport '../css/home.less'\nconst { Link } = Anchor;\nexport default class Home extends Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        bgHeight: {\n          height: document.documentElement.clientHeight + 'px',\n        }\n      }\n  }\n\n  componentDidMount() {\n      // 高度设置\n      this.screenChange();\n      // this.getLocationCity();\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.someData !== this.state.someData\n  }\n\n  getLocationCity() {\n    getLocation().then(result => {\n        // console.log('获取当前城市', result)\n    });\n  }\n\n  screenChange() {\n    window.addEventListener('resize', () => {\n      this.setState({ \n        bgHeight: {\n          height: document.documentElement.clientHeight + 'px'\n        }\n      })\n    });\n  }\n  render() {\n    const arr = [\n      {\n        id: 'first',\n        text: 'IV'\n      }, {\n        id: 'second',\n        text: 'HUSH'\n      }, {\n        id: 'third',\n        text: 'OHIO'\n      }, {\n        id: 'forth',\n        text: 'MYTH'\n      }\n    ]\n    console.log('render');\n    \n    return (\n      <div className=\"home-page\">\n        <Music />\n        {\n          arr.map((item, i) => {\n            const imgStyle = {\n              height: document.documentElement.clientHeight + 'px',\n              backgroundImage: `url(${require(\"../static/img/img\" +  Math.floor(Math.random()*17 + 1) + \".jpg\")})`, \n              backgroundSize: 'cover'\n            }\n            return (\n              <div key={i} id={item.id + 'Page'} className={'index-bg ' + item.id } style={ this.state.bgHeight }>\n                <div className=\"img\" style={ imgStyle }></div>\n                <div className=\"mask\" style={ this.state.bgHeight }>{ item.text }</div>\n                { i === 0 &&\n                <ul className=\"nav-ul\">\n                  <li><RouteLink to=\"/photograph\">摄影</RouteLink></li>\n                  <li><RouteLink to=\"/articles\">博客</RouteLink></li>\n                </ul>\n                 }\n              </div>\n            )\n          })\n        }\n        <Anchor>\n          <ul className=\"anchor-list\">\n            <li><Link href=\"#firstPage\" title=\"01\"/></li>\n            <li><Link href=\"#secondPage\" title=\"02\"/></li>\n            <li><Link href=\"#thirdPage\" title=\"03\"/></li>\n            <li><Link href=\"#forthPage\" title=\"04\"/></li>\n          </ul>\n        </Anchor>\n      </div>\n    )\n  }\n}","/* reducer 就是用来描述数据的形态和相应的变更\n * 1. 定义action types\n * 2. 编写reducer\n * 3. 编写与这个reducer相关的action creators\n */\n\n// action types\nconst INIT_IMGS = 'INIT_IMGS';\nconst ADD_IMG = 'ADD_IMG';\nconst DELETE_IMG = 'DELETE_IMG';\nconst ADD_IMG_FAVOR_COUNT = 'ADD_IMG_FAVOR';\n\nexport default function(state, action) {\n    if(!state) {\n        // 初始化\n        state = { \n            imgs: [],\n            curImg: {}\n        }; \n    }\n\n    switch (action.type) {\n        case INIT_IMGS:\n            // 初始化图片列表\n            if(action.pageNum > 1) {\n                return { \n                    ...state,\n                    imgs: [ ...state.imgs, ...action.imgs],\n                };\n            } else {\n                return { \n                    ...state,\n                    imgs: action.imgs,\n                };\n            }\n\n        case ADD_IMG:\n            return { \n                ...state,\n                imgs: [action.img, ...state.imgs],\n            };\n        case DELETE_IMG:\n            return {\n                ...state,\n                imgs: [\n                    ...state.imgs.slice(0, action.imgIndex),\n                    ...state.imgs.slice(action.imgIndex + 1)\n                ]\n            };\n        case ADD_IMG_FAVOR_COUNT:\n            let imgs = [];\n            state.imgs.forEach((item, index) => {\n                imgs.push(item)\n                if(index === action.index) {\n                    imgs[index].favor_count = (item.favor_count || 0) + 1;\n                }\n            })\n            return {\n                ...state,\n                imgs\n            }\n\n        default: \n            return state;\n    }\n}\n\nexport const initImgs = (imgs, pageNum) => {\n    return { type: INIT_IMGS, imgs, pageNum }\n}\n\nexport const addImg = (img) => {\n    return { type: ADD_IMG, img }\n}\n\nexport const deleteImg = (imgIndex) => {\n    return { type: DELETE_IMG, imgIndex }\n}\n\nexport const addImgFavorCount = (index) => {\n    return { type: ADD_IMG_FAVOR_COUNT, index }\n}\n\n\n","// action types\nconst INIT_ARTICLES = 'INIT_ARTICLES';\nconst DELETE_ARTICLE = 'DELETE_ARTICLE';\nconst SET_CUR_ARTICLE = 'SET_CUR_ARTICLE';\n\nconst INIT_TAGS = 'INIT_TAGS';\nconst ADD_TAG = 'ADD_TAG';\nconst DELETE_TAG = 'DELETE_TAG';\n\nexport default function(state, action) {\n    if(!state) {\n        // 初始化\n        state = { \n            articles: [],\n            curArticle: null,       // 当前查看或编辑的文章\n            tags: [],\n        }; \n    }\n\n    switch (action.type) {\n        case INIT_ARTICLES:\n            if(action.pageNum > 1) {\n                return { \n                    ...state,\n                    articles: [...state.articles, ...action.articles],\n                };\n            } else {\n                return {\n                    ...state,\n                    articles: action.articles\n                }\n            }\n            \n        case DELETE_ARTICLE:\n            return {\n                ...state,\n                articles: [\n                    ...state.articles.slice(0, action.articleIndex),\n                    ...state.articles.slice(action.articleIndex + 1)\n                ]\n            };\n        \n        case SET_CUR_ARTICLE:\n            let cur = action.article;\n            return { \n                ...state,\n                curArticle: cur \n            };\n\n        case INIT_TAGS:\n            return { \n                ...state,\n                tags: action.tags,\n            };\n\n        case ADD_TAG:\n            return { \n                ...state,\n                tags: [action.tag, ...state.tags],\n            };\n        \n        case DELETE_TAG:\n            return {\n                ...state,\n                tags: [\n                    ...state.tags.slice(0, action.tagIndex),\n                    ...state.tags.slice(action.tagIndex + 1)\n                ]\n            };\n        default: \n            return state;\n    }\n}\n\nexport const initArticles = (articles, pageNum) => {\n    return { type: INIT_ARTICLES, articles, pageNum }\n}\n\nexport const deleteArticle = (articleIndex) => {\n    return { type: DELETE_ARTICLE, articleIndex }\n}\n\nexport const setCurArticle = (article) => {\n    return { type: SET_CUR_ARTICLE, article }\n}\n\nexport const initTags = (tags) => {\n    return { type: INIT_TAGS, tags }\n}\n\nexport const addTag = (tag) => {\n    return { type: ADD_TAG, tag }\n}\n\nexport const deleteTag = (tagIndex) => {\n    return { type: DELETE_TAG, tagIndex }\n}","import { combineReducers } from 'redux'\nimport imgsReducer from './imgs'\nimport articlesReducer from './articles'\nimport commonReducer from './common'\n\nconst reducer = combineReducers({\n    imgsReducer,\n    articlesReducer,\n    commonReducer\n})\n\nexport default reducer","import React, { Component } from 'react'\n\nimport PropTypes from 'prop-types'\nimport { Icon } from 'antd';\n\n\nconst bgColors = ['rgba(106,10,171,.3)', 'rgba(199,0,125,.3)', 'rgba(52,21,176,.3)', 'rgba(68,3,111,.3)', 'rgba(64,19,175,.3)', 'rgba(166,0,166,.3)', 'rgba(108,0,108,.3)'];\n\nexport default class Img extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imgBoxStyle: {\n                background: bgColors[Math.floor(Math.random()*bgColors.length)],\n                height: ''\n            },\n            showGroupBtn: false,\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    static propTypes = {\n        img: PropTypes.object,\n        index: PropTypes.number,\n        onDeleteImg: PropTypes.func,\n        addImgFavor: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.onResizeHandler()\n    }\n\n    componentDidMount() {\n        this.setState({\n            showGroupBtn: this.context.router.history.location.pathname.indexOf('group') === -1\n        });\n        // 这里页面加载完成之后resizeThrottle函数立即执行了, 所以函数内的start直接打印了\n        // 以后每次发生resize事件时只会触发resizeThrottle函数的返回函数\n        this.onResizeHandler();\n        window.onresize = this.resizeThrottle(this.onResizeHandler.bind(this), 500, true);\n    }\n\n    onResizeHandler() {\n        // resize节流 500ms内只能触发一次\n        let width = this.refs.imgBox.clientWidth; // 宽固定\n        let scale = this.props.img.h / this.props.img.w;\n        let height = width * scale;\n        this.refs.imgBox.style.height = height + 'px';\n    }\n\n    resizeThrottle(fn, wait, immediate) {\n        let timer = null;\n        return function() {\n            let args = arguments;\n            if (immediate) {\n                fn.apply(this, args);\n                immediate = false;\n            }\n            if (!timer) {\n                timer = setTimeout(() => {\n                    console.log('timer is null') // 每隔500ms清空一次timer;\n                    fn.apply(this, args);\n                    timer = null;\n                }, wait);\n            }\n        }\n    }\n\n    // 查看图片详情\n    toImgDetailPage = id =>  {\n        this.context.router.history.push(`/photograph/detail/${id}`);       \n    }\n\n    // 查看组图\n    toGroupImg = (e, groupId) => {\n        e.stopPropagation();\n        this.context.router.history.push(`/photograph/group/${groupId}`);\n    }\n\n    render() {\n        return (\n            <div className=\"img-wraper\" onClick={this.toImgDetailPage.bind(this, this.props.img._id)}>\n                <div className=\"img-box\" ref=\"imgBox\" style={this.state.imgBoxStyle}>   \n                    <img src={this.props.img.src} alt=\"\"/>\n                </div>\n\n                <div className=\"img-cover\">\n                    <div className=\"operate-box\">\n                       <div>\n                            <Icon className=\"heart-icon\" type=\"heart\" onClick={(e) => this.props.addImgFavor(e, this.props.img._id, this.props.index)} /> \n                            <span className=\"count-span\">{this.props.img.favor_count || 0}</span>\n                            { this.state.showGroupBtn &&\n                            <Icon type=\"switcher\" className=\"collection-icon\" onClick={(e) => { this.toGroupImg(e, this.props.img.group_id) }} />\n                            }\n                            { this.props.isAdmin &&\n                            <Icon type=\"delete\" className=\"collection-icon\" onClick={(e) => { this.props.onDeleteImg(e, this.props.img, this.props.index)}}/>\n                            }\n                       </div>\n                    </div>\n                    <div className=\"info-box\">\n                        { this.props.img.title }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport Img from './Img'\nimport Masonry from 'react-masonry-component';\nimport PropTypes from 'prop-types'\n\nexport default class ImgList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n    // 对父组件传入的props数据进行类型检测\n    static propTypes = {\n        imgs: PropTypes.array,\n        onDeleteImg: PropTypes.func,\n        addImgFavor: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    // 声明变量, 初始化默认值\n    static defaultProps = {\n        imgs: [],\n    }\n\n    render() {\n        return (\n            <div>\n            { this.props.imgs.length > 0 &&\n                <Masonry\n                disableImagesLoaded={false}\n                updateOnEachImageLoad={false}\n                options={{transitionDuration: 0}} >\n                    {this.props.imgs.map((img, i) =>\n                    <Img\n                        img={img}\n                        key={i}\n                        index={i}\n                        addImgFavor={this.props.addImgFavor.bind(this)}\n                        onDeleteImg={this.props.onDeleteImg.bind(this)} \n                        isAdmin={this.props.isAdmin}/>\n                    )}\n                </Masonry>\n            }\n            { this.props.imgs.length === 0 &&\n                <div style={{textAlign: 'center'}}>暂无数据</div>\n            }\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\n// import * as qiniu from 'qiniu-js'\nimport PropTypes from 'prop-types'\nimport { Upload, Form, Input, Select, Modal, Icon } from 'antd';\nimport {uploadImg, publishImgs } from \"../../service/fetch\";\n\nclass PicturesWall extends React.Component {\n    state = {\n        previewVisible: false,\n        previewImage: '',\n        fileList: [],\n    };\n\n    static propTypes = {\n        getUploadList: PropTypes.func,\n    }\n    handleCancel = () => this.setState({ previewVisible: false })\n\n    handlePreview = (file) => {\n        this.setState({\n            previewImage: file.url || file.thumbUrl,\n            previewVisible: true,\n        });\n    }\n    upload(data) {\n        const formData = new FormData();\n        formData.append(data.filename, data.file);\n        const _this = this;\n        this.getImgWH(data.file, function() {\n            uploadImg(formData).then(res => {\n                if (res.data.resCode === 200) {\n                    _this.state.fileList.push({\n                        name: res.data.fileName,\n                        status: 'done',\n                        url: res.data.url,\n                        w: data.file.w,\n                        h: data.file.h\n                    })\n                    _this.state.fileList.forEach((v, i) => {\n                        v.uid = i;\n                    })\n                    _this.setState({\n                        fileList: _this.state.fileList\n                    })\n                    _this.props.getUploadList(_this.state.fileList)\n                } \n            })\n        })\n        // console.log('data====', data);\n    }\n    // handleStart\n    getImgWH(file, cb) {\n        // 获取图片宽高\n        var reader = new FileReader();\n        reader.onload = function (e) {\n            var data = e.target.result;\n            var image = new Image();\n            image.onload = function () {\n                file.w = this.width;\n                file.h = this.height;\n                cb();\n            }\n            image.src= data;\n        }\n        reader.readAsDataURL(file);\n    }\n\n    onUploadRemove = (info) => {\n        let uid = info.uid\n        this.state.fileList.forEach((item, i) => {\n            if(uid === item.uid) {\n                this.state.fileList.splice(i, 1);\n                return false;\n            }\n        })\n        this.setState({\n            fileList: this.state.fileList\n        })\n        this.props.getUploadList(this.state.fileList)\n    }\n\n    handleChange = ({ fileList }) => {\n        console.log('change', fileList);\n    }\n\n    render() {\n        const { previewVisible, previewImage, fileList } = this.state;\n        const uploadButton = (\n            <div>\n                <Icon type=\"plus\" />\n                <div className=\"ant-upload-text\">Upload</div>\n            </div>\n        );\n        return (\n            <div className=\"clearfix\">\n                <Upload\n                    // {...uploadProps}\n                    // action=\"http://localhost:3000/api/imgs/upload\"//\"https://upload.qiniup.com\"\n                    listType=\"picture-card\"\n                    multiple\n                    fileList={fileList}\n                    customRequest={this.upload.bind(this)}\n                    onPreview={this.handlePreview}\n                    onRemove={this.onUploadRemove}\n                    onChange={this.handleChange}\n                >\n                    {fileList.length >= 3 ? null : uploadButton}\n                </Upload>\n                \n                <Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}>\n                    <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n                </Modal>\n            </div>\n        );\n    }\n}\n\nclass UploadImg extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imgList: [],\n        }\n    }\n    static propTypes = {\n        visible: PropTypes.bool,\n        visibleHandler: PropTypes.func,\n        onAddImg: PropTypes.func\n    }\n\n    componentDidMount() {\n    }\n\n    handleOk = (e) => {\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let group = {\n                    imgs: this.state.imgList,\n                    info: this.props.form.getFieldsValue()\n                }\n                publishImgs(group).then(result => {\n                    const { data } = result;\n                    if (data.resCode === 200) {\n                        this.props.visibleHandler(false);\n                        this.setState({\n                            imgList: []\n                        })\n                        this.props.form.resetFields();\n                        data.imglist.forEach(img => {\n                            img.title = group.info.title;\n                            this.props.onAddImg(img)\n                        })\n                    } \n                });\n            }\n        });\n    }\n\n    handleCancel = (e) => {\n        this.props.visibleHandler(false);\n    }\n\n    getUploadList = (list) => {\n        this.setState({ imgList: list });\n        console.log('接受子组件filelist', this.state.imgList);\n        \n    }\n\n    render() {\n        const categorys = ['建筑', '人像', '街拍', '风景', '其他'];\n        const { getFieldDecorator } = this.props.form;\n        const Option = Select.Option;\n        return (\n            <Modal\n                width=\"40%\"\n                title=\"上传照片\"\n                visible={this.props.visible}\n                onOk={this.handleOk}\n                onCancel={this.handleCancel}\n            >\n                <PicturesWall getUploadList={this.getUploadList.bind(this)}/>\n                <Form layout=\"inline\" onSubmit={this.handleOk}>\n                    <Form.Item label=\"类别\">\n                        {getFieldDecorator('category', { \n                            initialValue: categorys[0]\n                        })(\n                            <Select style={{ width: 100 }} onChange={this.handleTypeChange}>\n                                {categorys.map((item, i) => {\n                                    return (<Option key={i} value={item}>{item}</Option>)\n                                })}\n                            </Select>)}\n                    </Form.Item>\n                    <Form.Item label=\"标题\">\n                        {getFieldDecorator('title', {\n                            rules: [{ required: true, message: '请输入照片标题' }],\n                        })(<Input placeholder=\"为这组照片起个名字吧\" />\n                        )}\n                    </Form.Item>\n                </Form>\n            </Modal>\n        );\n    }\n}\n\nexport default Form.create({ name: 'artile-form' })(UploadImg);\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\n\nimport PropTypes from 'prop-types'\nimport { Menu, Dropdown, Icon } from 'antd';\nimport { toast } from \"react-toastify\";\nimport LoginForm from '../containers/loginToast';\nimport { connect } from 'react-redux'\nimport { changeCurNav, changeLoginStatus, changeUserType } from '../reducers/common'\nimport { quit } from \"../service/fetch\";\n\n\nconst articleNavArr = [\n    { text: '所有文章' },\n    {\n        text: '笔记',\n        type: 0\n        // child: ['原创', '分享']\n    },\n    { text: '生活', type: 1 },\n    // { text: '项目', url: '/articles' },\n    { text: 'Tags', url: '/articles/tags' },\n    { text: '摄影', url: '/photograph'}\n]\n\nconst imgNavArr = [\n    {\n        text: '所有照片',\n        // child: ['所有排序', '时间排序']\n    },\n    { text: '建筑' },\n    { text: '人像' },\n    { text: '街拍' },\n    { text: '风景' },\n    { text: '其他' },\n    { text: '博客', url: '/articles'}\n]\n\nclass Header extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            activeIndex: 0,\n            navArr: this.props.type === 0 ? imgNavArr : articleNavArr,\n            showMenu: false,\n            isLargeScreen: true,        // 大屏\n            loginText: '退出',\n        }\n    }\n\n    static propTypes = {\n        type: PropTypes.number,\n        formParentNav: PropTypes.string,\n        handleNavChange: PropTypes.func\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    componentDidMount() {\n        if(document.documentElement.clientWidth <= 960) {\n            this.setState({ isLargeScreen: false })\n        }\n        this.state.navArr.forEach((item, index) => {\n            if (item.text === this.props.formParentNav || item.text === this.props.curNav) {\n                this.setState({\n                    activeIndex: index\n                })\n            }\n        })\n    }\n    \n    navClickHandler = (item, index) => {\n        if(!item.child && !item.url) {\n            let url = '';\n            this.setState({\n                activeIndex: index,\n                showMenu: false,\n            });\n            if(this.props.type !== 0) {\n                url = '/articles';\n                if(item.type !== undefined) {\n                    url += `?type=${item.type}`\n                }\n                this.props.handleNavChange && this.props.handleNavChange(item.type);\n            } else {\n                url = '/photograph';\n                url += `?type=${item.text}`\n                this.props.handleNavChange && this.props.handleNavChange(item.text);\n            }\n            this.context.router.history.push(url);\n            this.props.changeCurNav && this.props.changeCurNav(this.state.navArr[index].text)\n        }\n    }\n\n    toggleMenu() {\n        console.log(112)\n        this.setState({\n            showMenu: !this.state.showMenu,\n        })\n    }\n    \n    quitHandle() {\n        quit().then(result => {\n            if (result) {\n                this.setState({ isLogined: false })\n                window.localStorage.removeItem('user');\n                window.localStorage.removeItem('type');\n                this.props.changeLoginStatus(false);\n                this.props.changeUserType(false);\n                this.context.router.history.push(`/`);     \n            }\n        });\n    }\n\n    loginHandle(type) {\n        toast(<LoginForm type={type}/>,{\n            autoClose: false,\n            closeOnClick: false,\n            draggable: false,\n        });\n        this.setState({\n            showMenu: false,\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"page-header\">\n                    { (this.state.isLargeScreen || this.state.showMenu) && \n                    <ul className=\"img-nav-ul\">\n                        <li><Link to='/'><Icon type=\"home\" className=\"index-btn\" /></Link></li>\n                        { this.state.navArr.map((item, i) => {\n                                let content = '';\n                                if(item.child) {\n                                    let menu = (\n                                        <Menu>\n                                            {item.child.map((item1, i) => \n                                                <Menu.Item key={i}>\n                                                    <span>{ item1 }</span>\n                                                </Menu.Item>\n                                                )\n                                            }\n                                        </Menu>\n                                    );\n                                    content = <Dropdown overlay={menu} trigger={['click']}>\n                                                <span onClick={this.navClickHandler.bind(this, item.child, i)}>{ item.text }<Icon type=\"down\" /></span>\n                                            </Dropdown>;\n                                } else if(item.url) {\n                                    content = <Link to={ item.url }>{ item.text }</Link>;\n                                } else {\n                                    content = <span>{ item.text }</span>\n                                }\n                                return <li key={i} onClick={this.navClickHandler.bind(this, item, i)} className={ i === this.state.activeIndex ? 'active' : '' }>{ content }</li>\n                            }\n                        )}\n                        <li className=\"to-index-link\">\n                            {/* <Link to='/'> <Icon type=\"home\" /> 主页</Link> */}\n                            { this.props.isLogined &&\n                                <span className=\"op-btn\" onClick={this.quitHandle.bind(this)}>退出</span>\n                            }\n                            { !this.props.isLogined && \n                                <span>\n                                    <span className=\"op-btn\" onClick={this.loginHandle.bind(this, 1)}>登录 </span>\n                                    <span className=\"op-btn\" onClick={this.loginHandle.bind(this, 0)}>注册</span>\n                                </span>\n                            }\n                        </li>\n                    </ul>\n                    }\n                    { !this.state.showMenu && \n                    <div>\n                        <Link to='/'><Icon type=\"home\" className=\"index-btn-1\" /></Link>\n                        <span className=\"current-nav\">{ this.props.curNav }</span>\n                    </div>\n                    }\n                    <div className=\"menu-icon\" onClick={this.toggleMenu.bind(this)}>\n                        { !this.state.showMenu && \n                            <span>\n                                <Icon type=\"bars\"/>\n                            </span>\n                            \n                        }\n                        { this.state.showMenu && \n                            <Icon type=\"close\"/>\n                        }\n                    </div>\n                </div>\n                { this.state.showMenu && \n                    <div className=\"nav-mask\"></div>\n                }\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        curNav: state.commonReducer.curNav,\n        isLogined: state.commonReducer.isLogined,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n        changeLoginStatus: (isLogin) => {\n            dispatch(changeLoginStatus(isLogin));\n        },\n        changeUserType: (isAdmin) => {\n            dispatch(changeUserType(isAdmin));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Header)\n\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Spin } from 'antd';\n\nexport default class Loading extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n    }\n\n    static propTypes = {\n        show: PropTypes.bool,\n        loadMore: PropTypes.func,\n    }\n\n    handleClick() {\n        this.props.loadMore()\n    }\n\n    render() {\n        const text = this.props.show ? '正在加载' : '加载更多';\n        return (\n            <div className=\"loading-wrap\">\n            { this.props.show &&\n                <Spin size=\"small\" />\n            }\n                <span onClick={this.handleClick.bind(this)}>{ text } </span>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { initImgs, deleteImg, addImg, addImgFavorCount } from '../../reducers/imgs'\nimport { changeCurNav } from '../../reducers/common'\nimport { Button, BackTop, Spin } from 'antd';\nimport ImgList from '../../components/photograph/ImgList'\nimport UploadImg from '../../components/photograph/UploadImg'\nimport Header from '../../components/Header'\nimport Loading from '../../components/Loading'\nimport Music from '../../components/Music'\nimport '../../css/img.less'\n\nimport { fetchImgs, deleteImgById, addImgFavor } from \"../../service/fetch\";\n\nclass ImgListContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dialogVisible: false,\n            loading: false,\n            showLoading: false,\n            pageNum: 1,\n            noMore: false,  // 是否没有更多了\n        }\n    }\n    componentWillMount() {\n        let otherNav = ['所有照片', '所有文章', '笔记', '生活', 'Tags'];\n        if(!this.props.curNav || otherNav.indexOf(this.props.curNav) >= 0) {\n            this.props.changeCurNav('所有照片')\n            this.loadImgs()\n        } else {\n            this.loadImgs(this.props.curNav)\n        }\n    }\n\n    loadImgs(category = '') {\n        let params = {\n            pageNum: this.state.pageNum,\n            category\n        }\n        \n        if(params.pageNum === 1) {\n            this.setState({ loading: true })\n            this.props.initImgs([], this.state.pageNum);\n        } else {\n            this.setState({ showLoading: true });\n        }\n        return fetchImgs(params).then(result => {\n            const {data} = result;\n            if (data) {\n                this.props.initImgs(data.imgs, this.state.pageNum);\n                this.setState({ \n                    noMore: data.noMore,\n                    showLoading: false,\n                    loading: false\n                })\n            } else {\n                this.setState({ \n                    showLoading: false,\n                    loading: false,\n                    noMore: true\n                });\n            }\n        })\n    }\n\n    loadMore() {\n        this.setState({ pageNum: this.state.pageNum + 1 }, function () {\n            this.loadImgs();\n        })\n    }\n\n    visibleHandler = (flag) => {\n        this.setState({ dialogVisible: flag });\n    }\n\n    handleDeleteImg(e, img, index) {\n        let { src, _id, group_id } = img;\n        src = src.split('/');\n        let imgName = src[src.length - 1];\n        e.stopPropagation();\n        deleteImgById({_id, imgName, group_id}).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.deleteImg(index);\n            } \n        })\n    }\n    handleAddImgFavor(e, imgId, index) {\n        e.stopPropagation();\n        addImgFavor(imgId).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.addImgFavorCount(index);\n            }\n        });\n    }\n\n    handleNavChange(category) {\n        this.setState({ pageNum: 1 })\n        category = (category === '所有照片' ? '' : category);\n        this.loadImgs(category);\n    }\n\n    render () {\n        return (\n            <div>\n                <Header \n                    type={0} \n                    handleNavChange={this.handleNavChange.bind(this)}\n                />\n                <Music/>\n                <div className=\"container img-container\">\n                    { this.props.isAdmin && \n                    <Button type=\"primary\" className=\"common-btn\" onClick={this.visibleHandler.bind(this, true)}>\n                        上传照片\n                    </Button>\n                    }\n                    <UploadImg \n                        visible={this.state.dialogVisible} \n                        visibleHandler={this.visibleHandler}\n                        onAddImg={this.props.addImg}\n                    />\n                    <Spin spinning={this.state.loading}>\n                        <ImgList\n                            imgs= {this.props.imgs}\n                            addImgFavor={this.handleAddImgFavor.bind(this)}\n                            onDeleteImg= {this.handleDeleteImg.bind(this)}\n                            isAdmin={this.props.isAdmin} \n                        />\n                    </Spin>\n                    { !this.state.noMore && \n                    <Loading \n                        show={this.state.showLoading}\n                        loadMore={this.loadMore.bind(this)}\n                    />\n                    }\n                </div>\n                <BackTop target={() => document.getElementsByClassName('container')[0]}/>\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        imgs: state.imgsReducer.imgs,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initImgs: (imgs, pageNum) => {\n            dispatch(initImgs(imgs, pageNum));\n        },\n        deleteImg: (imgIndex) => {\n            dispatch(deleteImg(imgIndex))\n        },\n        addImg: (img) => {\n            dispatch(addImg(img))\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n        addImgFavorCount: (index) => {\n            dispatch(addImgFavorCount(index));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ImgListContainer)","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Comment, Avatar, Form, Button, List, Input,\n} from 'antd';\n// import moment from 'moment';\n\nconst TextArea = Input.TextArea;\nconst CommentList = ({ comments }) => (\n  <List\n    dataSource={comments}\n    header={`${comments.length} 条评论`}\n    itemLayout=\"horizontal\"\n    renderItem={props => <Comment {...props} />}\n  />\n);\n\nconst Editor = ({\n  onChange, onSubmit, submitting, value,\n}) => (\n    <div>\n      <Form.Item>\n        <TextArea rows={4} onChange={onChange} value={value} />\n      </Form.Item>\n      <Form.Item>\n        <Button\n          className=\"common-btn\"\n          htmlType=\"submit\"\n          loading={submitting}\n          onClick={onSubmit}\n          type=\"primary\">\n          评论\n        </Button>\n      </Form.Item>\n    </div>\n  );\nexport default class MyComment extends Component {\n  state = {\n    submitting: false,\n    value: '',\n    comments: [],\n  }\n\n  static propTypes = {\n    onSubmit: PropTypes.func,\n    comments: PropTypes.array,\n    receiver: PropTypes.string\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      comments: nextProps.comments\n    })\n  }\n\n  handleSubmit = () => {\n    if (!this.state.value) {\n      return;\n    } else {\n      this.setState({\n        submitting: true,\n      });\n      this.props.onSubmit({\n        receiver: this.props.receiver,\n        content: this.state.value\n      }, (result) => {\n        if (result.data && result.data.comment) {\n          let resComment = result.data.comment;\n          let author = '';\n          if(resComment.sender === this.props.receiver) {\n            author = '作者'\n          } else{\n            author = window.localStorage.getItem('user');\n          }\n          this.setState({\n            submitting: false,\n            value: '',\n            comments: [\n              {\n                author,\n                avatar: resComment.avatar || '',\n                content: this.state.value,\n                created_at: resComment.created_at,\n              },\n              ...this.state.comments,\n            ],\n          });\n          \n        } else {\n          this.setState({ submitting: false })\n        }\n      });\n    }\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      value: e.target.value,\n    });\n  }\n\n  render() {\n    const { submitting, value } = this.state;\n    const comments = this.state.comments.map(item => {\n      let avatar = '', res;\n      if (item.user && item.user.avatar) {\n        avatar = item.user.avatar;\n      }\n      item.avatar && (avatar = item.avatar);\n      res = {\n        avatar: avatar,\n        content: <p>{item.content}</p>,\n        datetime: item.created_at,\n      }\n      if(item.sender === this.props.receiver) {\n        res.author = '作者'\n      } else {\n        res.author = item.author || item.senderInfo\n      }\n      return res;\n    }); \n    \n    return (\n      <div>\n        {comments.length > 0 && <CommentList comments={comments} />}\n        <Comment\n          avatar={(\n            <Avatar src=\"\" alt=\"\" />\n          )}\n          content={(\n            <Editor\n              onChange={this.handleChange}\n              onSubmit={this.handleSubmit}\n              submitting={submitting}\n              value={value}\n            />\n          )}\n        />\n      </div>\n    );\n  }\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Icon, message, Spin } from 'antd';\nimport { getImgDetail, comment as commentImg, addImgPv, addImgFavor } from \"../../service/fetch\";\nimport MyComment from '../../components/Comment'\nimport Music from '../../components/Music'\n\nclass ImgDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            id: this.props.match.params.id,\n            imgEnlargeble: false,\n            comments: [],\n            img: {},\n            curPage: 0,\n            clickTypeNum: 0,             // 是否可翻页, 0表示可翻页, -1或1表示已经到最底部和最顶部了\n        }\n    }\n\n    static propTypes = {\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    componentWillMount() {\n        this.getImgDetail(this.state.id);\n    }\n\n    getImgDetail(id, typeNum) {\n        this.setState({ loading: true });\n        getImgDetail(id, typeNum).then(result => {\n            const { data } = result;\n            if (data) {\n                if (data.noMore) {\n                    message.warning('已经是最后一张了', 1);\n                    this.setState({ clickTypeNum: typeNum })\n                } else {\n                    this.setState({\n                        img: data.img[0],\n                        id: data.img[0]._id,\n                        clickTypeNum: 0,\n                        comments: data.comment,\n                    })\n                    this.context.router.history.push(`/photograph/detail/${data.img[0]._id}`);\n                    this.handleBrowser();\n                }\n                this.setState({ loading: false });\n            }\n        });\n    }\n\n    // 放大/缩小图片\n    resizeImgHandler = () => {\n        this.setState({ \n            imgEnlargeble : !this.state.imgEnlargeble, \n        });\n    }\n\n    // 发表评论\n    handleSubmit = (comment, cb) => {\n        commentImg(this.state.id, comment).then(result => {\n            if (result) {\n                cb && cb(result);\n            }\n        });\n    }\n\n    handleBrowser() {\n        setTimeout(() => {\n            addImgPv(this.state.id).then(result => {\n                const { data } = result;\n                if (data) {\n                    let img = Object.assign(this.state.img, { pv: (this.state.img.pv || 0)+ 1 })\n                    this.setState({\n                        img: img\n                    });\n                }\n            });\n        }, 2000);\n    }\n    \n    // 上一张or上一张\n    lastOrNextImg = (typeNum) => {\n        this.getImgDetail(this.state.id, typeNum);\n    }\n\n    clickImgFavorHandler() {\n        addImgFavor(this.state.id).then(result => {\n            const { data } = result;\n            if (data) {\n                let img = Object.assign(this.state.img, { favor_count: (this.state.img.favor_count || 0) + 1 })\n                this.setState({\n                    img: img\n                });\n            }\n        });\n    }\n\n    // 查看组图\n    toGroupImg = (groupId) => {\n        this.context.router.history.push(`/photograph/group/${groupId}`);\n    }\n\n    goBack() {\n        this.context.router.history.push(`/photograph`);\n    }\n\n    render() {\n        return (\n            <div className=\"img-detail-page\">\n                <Music/>\n                <Spin spinning={this.state.loading}>\n                    <div className={[\"img-switch-wraper\", this.state.imgEnlargeble ? 'active' : ''].join(' ')}>\n                        <div className=\"center-box\">\n                            { !this.state.imgEnlargeble &&\n                                // <Link to=\"/photograph\">\n                                    <Icon type=\"close\" className=\"icon close-icon\" onClick={this.goBack.bind(this)}/>\n                                // </Link>\n                            }\n                            <Icon type=\"left\" className=\"icon left-icon\" onClick={this.lastOrNextImg.bind(this, -1)}/>\n                            <img src={this.state.img.src} alt=\"\" />\n                            <Icon type={ this.state.imgEnlargeble ? 'shrink' : 'arrows-alt'} className=\"icon size-icon\" onClick={ this.resizeImgHandler.bind(this) } />\n                            <Icon type=\"right\" className=\"icon right-icon\" onClick={this.lastOrNextImg.bind(this, 1)}/>\n                        </div>\n                    </div>\n                    <div className=\"detail-box\">\n                        <div className=\"operate-box\">\n                            <div>\n                                <Icon className=\"icon heart-icon\" type=\"heart\" onClick={this.clickImgFavorHandler.bind(this)}/> \n                                <span className=\"count-span\">{this.state.img.favor_count || 0}</span>\n                                <Icon className=\"icon\" type=\"eye\" />\n                                <span className=\"count-span\">{this.state.img.pv || 0}</span>\n                                <Icon type=\"switcher\" className=\"icon collection-icon\" onClick={(e) => { this.toGroupImg(this.state.img.groupId) }}/>\n                            </div>\n                        </div>\n                        <div className=\"comment-wrap\">\n                            <MyComment \n                                receiver={this.state.img.author}\n                                comments={this.state.comments} \n                                onSubmit={this.handleSubmit.bind(this)} \n                            />\n                        </div>\n                    </div>\n                </Spin>\n            </div>\n        )\n    }\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        imgs: state.imgs,  // 告诉Connect组件我们需要什么数据\n        curImg: state.curImg\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ImgDetail)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { initImgs, deleteImg, addImg, addImgFavorCount } from '../../reducers/imgs'\nimport PropTypes from 'prop-types'\nimport { changeCurNav } from '../../reducers/common'\nimport ImgList from '../../components/photograph/ImgList'\nimport Header from '../../components/Header'\nimport Music from '../../components/Music'\nimport { Button, Spin } from 'antd';\nimport '../../css/img.less'\n\nimport { fetchGroupImgs, deleteImgById, addImgFavor } from \"../../service/fetch\";\n\nclass ImgListContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            groupId: this.props.match.params.id,\n            groupInfo: {}\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    componentWillMount() {\n        this.loadImgs();\n        if(!this.props.curNav) {\n            this.props.changeCurNav('所有照片')\n        }\n    }\n\n    loadImgs() {\n        this.setState({ loading: true })\n        this.props.initImgs([], 1);\n        return fetchGroupImgs(this.state.groupId).then(result => {\n            const {data} = result;\n            if (data) {\n                this.setState({\n                    groupInfo: data.group.info\n                })\n                this.props.initImgs(data.group.imgs, 1);\n            }\n            this.setState({ loading: false })\n        })\n    }\n\n    handleDeleteImg(e, img, index) {\n        let { src, _id, group_id } = img;\n        src = src.split('/');\n        let imgName = src[src.length - 1];\n        e.stopPropagation();\n        deleteImgById({_id, imgName, group_id}).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.deleteImg(index);\n            } \n        })\n    }\n\n    handleAddImgFavor(e, imgId, index) {\n        e.stopPropagation();\n        addImgFavor(imgId).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.addImgFavorCount(index);\n            }\n        });\n    }\n\n    handleNavChange(category) {\n        this.setState({ pageNum: 1 })\n        category = (category === '所有照片' ? '' : category);\n        this.loadImgs(category);\n    }\n    goBack() {\n        this.context.router.history.push(`/photograph`);\n    }\n\n    render () {\n        return (\n            <div>\n                <Header \n                    type={0} \n                    handleNavChange={this.handleNavChange.bind(this)}\n                />\n                <Music/>\n                <div className=\"container img-container\">\n                    <Spin spinning={this.state.loading}>\n                        <div className=\"group-info\">\n                            <p className=\"title\">{ this.state.groupInfo.title }</p>\n                            <ul className=\"tag-list\">\n                                <li>{ this.state.groupInfo.category }</li>\n                            </ul>\n                            <p className=\"date\">{ this.state.groupInfo.created_at }</p>\n                        </div>\n                        <ImgList\n                            imgs= {this.props.imgs}\n                            addImgFavor={this.handleAddImgFavor.bind(this)}\n                            onDeleteImg= {this.handleDeleteImg.bind(this)}\n                            isAdmin={this.props.isAdmin}\n                        />\n                        <div className=\"group-info\">\n                            <Button onClick={this.goBack.bind(this)}>返 回</Button>\n                        </div>\n                    </Spin>\n                </div>\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        imgs: state.imgsReducer.imgs,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initImgs: (imgs, pageNum) => {\n            dispatch(initImgs(imgs, pageNum));\n        },\n        deleteImg: (imgIndex) => {\n            dispatch(deleteImg(imgIndex))\n        },\n        addImg: (img) => {\n            dispatch(addImg(img))\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n        addImgFavorCount: (index) => {\n            dispatch(addImgFavorCount(index));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ImgListContainer)","import React, { Component } from 'react'\n\nimport PropTypes from 'prop-types'\nimport { Icon } from 'antd';\n\nexport default class Article extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    static propTypes = {\n        article: PropTypes.object,\n        index: PropTypes.number,\n        deleteArticle: PropTypes.func,\n        editArticle: PropTypes.func,\n        viewDetail: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    render() {\n        let article = this.props.article;\n        return (\n            <div className=\"article-wraper\">\n                <div className={[\"cover-box\", (!article.cover_url ? 'no-cover' : '')].join(' ') }>\n                    <img v-if={article.cover_url} src={article.cover_url} alt=\"\"/>\n                </div>\n               <div className=\"info\">\n                    <h3 className=\"title\">\n                        <p onClick={this.props.viewDetail.bind(this, article._id)}>{ article.title }</p>\n                        { this.props.isAdmin &&\n                            <span className=\"operate-btn\">\n                                <Icon type=\"delete\" onClick={this.props.deleteArticle.bind(this, article._id, this.props.index, article.cover_url)}/>\n                                <Icon type=\"edit\" onClick={this.props.editArticle.bind(this, article._id)}/>\n                            </span>\n                        }\n                    </h3>\n                    <p className=\"time\">{ article.created_at }\n                        <span><Icon type=\"message\" className=\"icon\"/>{ article.comments || 0 }</span>\n                        <span><Icon type=\"fire\" className=\"icon\"/>{ article.pv || 0 }</span>\n                    </p>\n                    <div className=\"description\">{ article.description }</div>\n               </div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport Article from '../article/Article'\nimport PropTypes from 'prop-types'\nimport { Icon } from 'antd';\nexport default class ArticleList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n    // 对父组件传入的props数据进行类型检测\n    static propTypes = {\n        articles: PropTypes.array,\n        deleteArticle: PropTypes.func,\n        editArticle: PropTypes.func,\n        viewDetail: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    // 声明变量, 初始化默认值\n    static defaultProps = {\n        articles: [],\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"left\">\n                    { this.props.articles.length > 0 &&\n                        <div>\n                            {this.props.articles.map((article, i) =>\n                            <Article\n                                article={article}\n                                key={article._id}\n                                index={i} \n                                deleteArticle={this.props.deleteArticle.bind(this)}\n                                editArticle={this.props.editArticle.bind(this)}\n                                viewDetail={this.props.viewDetail.bind(this)}\n                                isAdmin={this.props.isAdmin}\n                                />\n                            )}\n                        </div>\n                    }\n                    { this.props.articles.length === 0 &&\n                        <div style={{textAlign: 'center'}}>暂无数据</div>\n                    }\n                </div>\n                <div className=\"right\">\n                    <img className=\"avator\" alt=\"\" src={require('../../static/img/avator.jpeg')} />\n                    <div>\n                        <p>好好学习, 天天向上</p>\n                        <a target=\"blank\" href=\"https://github.com/HuangChuFeng\"><Icon type=\"github\" /> github</a>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport { BackTop, Spin } from 'antd';\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport ArticleList from '../../components/article/ArticleList'\nimport Header from '../../components/Header'\nimport Loading from '../../components/Loading'\nimport { initArticles, deleteArticle } from '../../reducers/articles'\nimport { changeCurNav } from '../../reducers/common'\nimport '../../css/article.less'\n\nimport { fetchArticles, deleteArticleById, getArticlesByTagName } from \"../../service/fetch\";\n\nclass ArticleListContainer extends Component {\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            showLoading: false,\n            pageNum: 1,\n            noMore: true,  // 是否没有更多了\n        }\n    }\n\n    componentWillMount() {\n        let search = this.context.router.route.location.search;\n        let type = search.substring(search.length-1);\n        let tag = this.props.match.params.tag;\n        if(type) {\n            this.loadArticles(type);\n            let curNav = (type === '0' ? '笔记' : '生活');\n            this.props.changeCurNav(curNav)\n        } else {\n            // 按标签获取\n            if(tag) {\n                this.props.getArticlesByTagName(tag);\n            } else {\n                this.loadArticles();\n            }\n            if(!this.props.curNav) {\n                this.props.changeCurNav('所有文章')\n            }\n        }\n    }\n\n    loadArticles(type = '') {\n        let params = {\n            pageNum: this.state.pageNum,\n            type,\n        }\n        this.setState({ showLoading: true });\n        if(params.pageNum === 1) {\n            this.setState({ loading: true })\n            this.props.initArticles([], this.state.pageNum);\n        }\n        fetchArticles(params).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.initArticles(data.articles, this.state.pageNum);\n                this.setState({ showLoading: false });\n                if(data.articles.length === 0) {\n                    this.setState({ noMore: true })\n                } else {\n                    this.setState({ noMore: false })\n                }\n                this.setState({ loading: false })\n            } else {\n                this.setState({ \n                    showLoading: false,\n                    loading: false,\n                    noMore: true\n                });\n            }\n        })\n    }\n\n    loadMore() {\n        this.setState({ pageNum: this.state.pageNum + 1 }, function () {\n            this.loadArticles();\n        })\n    }\n\n    handleNavChange(type) {\n        this.loadArticles(type);\n    }\n\n    onDeleteArticle(articleId, index, url) {\n        let coverName = ''\n        if(url) {\n        url = url.split('/');\n            coverName = url[url.length - 1];\n        }\n        deleteArticleById({articleId, coverName}).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.deleteArticle(index);\n            } \n        })\n    }    \n\n    onEditArticle = (articleId) => {\n        this.context.router.history.push(`/articles/edit/${articleId}`);\n    }\n\n    onViewDetail = (articleId) => {\n        this.context.router.history.push(`/articles/detail/${articleId}`);\n    }\n\n    render () {\n        return (\n            <div>\n                <Header\n                    type={1}\n                    formParentNav=\"所有文章\"\n                    handleNavChange={this.handleNavChange.bind(this)}/>\n                <div className=\"container article-container\">\n                    { this.props.isAdmin && \n                    <Link to='/articles/new'>写文章</Link>\n                    }\n                    <Spin spinning={this.state.loading}>\n                        <ArticleList \n                            articles= {this.props.articles} \n                            deleteArticle={this.onDeleteArticle.bind(this)}\n                            editArticle={this.onEditArticle.bind(this)}\n                            viewDetail={this.onViewDetail.bind(this)}\n                            isAdmin={this.props.isAdmin}\n                        />\n                    </Spin>\n                    { !this.state.noMore &&\n                    <Loading \n                        show={this.state.showLoading}\n                        loadMore={this.loadMore.bind(this)}\n                    />\n                    }\n                    <BackTop target={() => document.getElementsByClassName('container')[0]}/>\n                </div>\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        articles: state.articlesReducer.articles,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initArticles: (articles, pageNum) => {\n            dispatch(initArticles(articles, pageNum));\n        },\n        getArticlesByTagName: (tag) => {\n            getArticlesByTagName(tag).then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(initArticles(data.articles));\n                } \n            });\n        },\n\n        deleteArticle: (articleId) => {\n            dispatch(deleteArticle(articleId));\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ArticleListContainer)","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Icon, message, Spin } from 'antd';\nimport Header from '../../components/Header'\nimport MyComment from '../../components/Comment'\nimport { getArticleDetail, comment as commentArticle, addArticlePv } from \"../../service/fetch\";\nimport { changeCurNav } from '../../reducers/common'\nimport Highlight from 'react-highlight'\nimport 'highlight.js/styles/hopscotch.css'\n\n// atom-one-dark-reasonable\n// gruvbox-dark\n// hopscotch\n\nclass ArticleDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            id: this.props.match.params.id,\n            comments: [],\n            article: {},\n            curPage: 0,\n            clickTypeNum: 0,             // 是否可翻页, 0表示可翻页, -1或1表示已经到最底部和最顶部了\n            tags: [],\n        }\n    }\n    static propTypes = {\n        artilceId: PropTypes.number,\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    handleBrowser() {\n        setTimeout(() => {\n            addArticlePv(this.state.id).then(result => {\n                const { data } = result;\n                if (data) {\n                    let article = Object.assign(this.state.article, { pv: (this.state.article.pv || 0) + 1 })\n                    this.setState({\n                        article: article\n                    });\n                }\n            });\n        }, 2000);\n    }\n\n    componentWillMount() {\n        this.articleDetail(this.state.id);\n        this.props.changeCurNav('文章详情');\n    }\n\n    // 获取某一篇文章及评论\n    articleDetail(id, typeNum = '') {\n        this.setState({ loading: true });\n        getArticleDetail(id, typeNum).then(result => {\n            const { data } = result;\n            if (data) {\n                if (data.noMore) {\n                    message.warning('已经是最后一篇了', 1);\n                    this.setState({ clickTypeNum: typeNum })\n                } else {\n                    this.setState({\n                        article: data.article[0],\n                        id: data.article[0]._id,\n                        clickTypeNum: 0,\n                        comments: data.comment,\n                        tags: data.tags\n                    })\n                    this.context.router.history.push(`/articles/detail/${data.article[0]._id}`);\n                    this.handleBrowser();\n                }\n            }\n            this.setState({ loading: false });\n        });\n    }\n\n    // 上一篇or上一篇\n    lastOrNextArticle = (typeNum) => {\n        this.articleDetail(this.state.id, typeNum);\n    }\n\n    // 发表评论\n    handleSubmit = (comment, cb) => {\n        commentArticle(this.state.id, comment).then(result => {\n            if (result) {\n                cb && cb(result);\n            }\n        });\n    }\n    // 返回列表页\n    backListPage = () => {\n        this.props.changeCurNav('')\n    }\n\n    render() {\n        let date;\n        if (this.state.article.created_at) {\n            date = this.state.article.created_at.replace(/-/g, '.');\n        }\n        return (\n            <div>\n                <Header type={1} />\n                <div className=\"container article-detail-container\">\n                    <Spin spinning={this.state.loading}>\n                    <div className=\"left\">\n                        <Link to=\"/articles\" onClick={this.backListPage.bind(this)}><Icon type=\"left\" className=\"back-btn\" /></Link>\n                        <div className=\"top-info-box\">\n                            <h2>{this.state.article.title}</h2>\n                            <div className=\"top-bottom\">\n                                <span>{date} Beijing</span>\n                                <span className=\"browse-num\"><Icon type=\"fire\" className=\"fire-icon\" />{this.state.article.pv || 0}</span>\n                                \n                            </div>\n                        </div>\n                        <div className=\"left-bottom-box\">\n                            <ul className=\"tag-list\">\n                                {this.state.tags && this.state.tags.map(item => {\n                                    return (<li key={item._id}>{item.name}</li>)\n                                })}\n                            </ul>\n                            {this.state.article.description}\n                        </div>\n                        <div className=\"control-box\">\n                            <span onClick={this.lastOrNextArticle.bind(this, -1)}>上一篇</span>\n                            <span onClick={this.lastOrNextArticle.bind(this, 1)}>下一篇</span>\n                        </div>\n                    </div>\n                        <div className=\"right\">\n                            <Highlight className='language-name-of-snippet' innerHTML={true}>\n                                {this.state.article.content}\n                            </Highlight>\n                            {/* <div dangerouslySetInnerHTML={{ __html: this.state.article.content }}></div> */}\n                            <MyComment \n                                receiver={this.state.article.author}\n                                comments={this.state.comments} \n                                onSubmit={this.handleSubmit.bind(this)} \n                            />\n                        </div>\n                    </Spin>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        curArticle: state.articlesReducer.curArticle,\n        articles: state.articlesReducer.articles,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ArticleDetail)\n\n","import React from 'react'\nimport { Form, Input, Icon, Upload, Select, Col, Row } from 'antd';\nimport PropTypes from 'prop-types'\n\n// 输入表单组件\nclass ArticleForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedTags: [],\n            loading: false, // 上传封面loading\n            coverUrl: '',   // 封面url\n            coverName: '',  // 封面名称\n        }\n    }\n    static propTypes = {\n        article: PropTypes.object,\n        onRef: PropTypes.func,\n        uploadCover: PropTypes.func\n    }\n    componentDidMount() {\n        this.props.onRef(this);\n        this.props.form.setFieldsValue({ type: 0 })\n        \n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.article && !this.props.article) {\n            this.initForm(nextProps.article)\n        }\n    }\n\n    initForm(article) {\n        let { type, title, description } = article;\n        let option = {\n            type,\n            title,\n            description,\n        }\n        this.setState({\n            coverUrl: article.cover_url,\n            selectedTags: article.tags.map(item => {\n                return item.name\n            })\n        })\n        this.props.form.setFieldsValue(option);\n\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n            }\n        });\n    }\n\n    handleTagChange(value) {\n        this.setState({ selectedTags: value })\n    }\n\n    onUploadCover(data) {\n        this.setState({ loading: true });\n        this.props.uploadCover(data, (res) => {\n            if(res.data.resCode === 200) {\n                this.setState({\n                    coverUrl: res.data.url,\n                    loading: false,\n                    coverName: res.data.fileName\n                })\n            }\n        })\n    }\n\n    getFormData = () => {\n        let res;\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n                res = Object.assign(\n                    { \n                        tags: this.state.selectedTags,\n                        coverName: this.state.coverName,\n                        coverUrl: this.state.coverUrl\n                    }, \n                    this.props.form.getFieldsValue()\n                );\n            }\n        });\n        return res;\n    }\n\n    render() {\n        const uploadButton = (\n            <div>\n                <Icon type={this.state.loading ? 'loading' : 'plus'} />\n                <div className=\"ant-upload-text\">文章封面</div>\n            </div>\n        );\n        const Option = Select.Option;\n        const { getFieldDecorator } = this.props.form;\n        const selects = [];\n        if (this.props.allTags) {\n            for (let i = 0; i < this.props.allTags.length; i++) {\n                selects.push(<Option key={this.props.allTags[i].name}>{this.props.allTags[i].name}</Option>);\n            }\n        }\n\n        return (\n            <Form onSubmit={this.handleSubmit} className=\"artile-form\">\n                <Row>\n                    <Col span={4} >\n                        <Form.Item>\n                            {getFieldDecorator('type')(\n                                <Select style={{ width: 100 }}>\n                                    <Option value={0}>笔记</Option>\n                                    <Option value={1}>生活</Option>\n                                </Select>)}\n                        </Form.Item>\n                    </Col>\n                    <Col span={20} >\n                        <Form.Item>\n                            {getFieldDecorator('title', {\n                                rules: [{ required: true, message: '请输入文章标题' }],\n                            })(\n                                <Input placeholder=\"文章标题\" />\n                            )}\n                        </Form.Item>\n                    </Col>\n                </Row>\n                <Form.Item>\n                    {getFieldDecorator('description', {\n                        rules: [{ required: true, message: '请输入文章描述' }],\n                    })(\n                        <Input placeholder=\"描述下文章吧\" />\n                    )}\n                </Form.Item>\n                <Form.Item>\n                    <Row>\n                        <Col span={18} >\n                            <Select\n                                mode=\"tags\"\n                                placeholder='选择标签'\n                                value={this.state.selectedTags}\n                                onChange={this.handleTagChange.bind(this)}\n                                style={{ width: '100%' }}\n                            >\n                                {selects}\n                            </Select>\n                        </Col>\n                        <Col span={2} ></Col>\n                        <Col span={2} >\n                        <Upload\n                            listType=\"picture-card\"\n                            className=\"cover-uploader\"\n                            customRequest={this.onUploadCover.bind(this)}\n                            showUploadList={false}\n                        >\n                            {this.state.coverUrl ? <img src={this.state.coverUrl} alt=\"cover\" /> : uploadButton}\n                        </Upload>\n                        </Col>\n                    </Row>\n                </Form.Item>\n            </Form>\n        );\n    }\n}\n\nexport default Form.create({ name: 'artile-form' })(ArticleForm);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport E from 'wangeditor';\n// import ReactMarkdown from 'react-markdown'\n// import Divider from 'antd';\n\nexport default class EditContent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            editorContent: '',\n            // editorContent: `\n            // This block of Markdown contains <a href=\"https://en.wikipedia.org/wiki/HTML\">HTML</a>, and will require the <code>html-parser</code> AST plugin to be loaded, in addition to setting the <code class=\"prop\">escapeHtml</code> property to false.\n            // `\n        };\n    }\n\n    static propTypes = {\n        article: PropTypes.object,\n        onRef: PropTypes.func\n    }\n\n    componentDidMount() {\n        this.props.onRef(this)\n        const elem = this.refs.editorElem;\n        this.editor = new E(elem);\n        this.editor.customConfig.uploadImgShowBase64 = true\n        // 使用 onchange 函数监听内容的变化，并实时更新到 state 中\n        this.editor.customConfig.onchange = html => {\n            this.setState({\n                editorContent: html\n            })\n        }\n        this.editor.create();\n    }\n    \n    componentWillReceiveProps(nextProps) {\n        if(nextProps.article && !this.props.article) {\n            this.setState({\n                editorContent: nextProps.article.content\n            })\n            this.editor.txt.html(nextProps.article.content);\n        }\n    }\n\n    getContent() {\n        return { content: this.state.editorContent };\n    }\n    \n    render() {\n        return (\n            // <ReactMarkdown className=\"edit-wrapper\" source={this.state.editorContent} />\n            <div ref=\"editorElem\" className=\"edit-wrapper\">\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Header from '../../components/Header'\nimport { setCurArticle, initTags } from '../../reducers/articles'\nimport '../../css/article.less'\nimport { Button } from 'antd';\nimport { getArticleDetail, createArticle, updateArticleById, getTags, uploadImg } from \"../../service/fetch\";\nimport EditForm from '../../components/article/EditForm'\nimport EditContent from '../../components/article/EditContent'\n\nclass EditArticleContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            articleId: this.props.match.params.id,\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    async componentDidMount() {\n        if (this.state.articleId) {\n            await this.props.articleDetail(this.state.articleId);\n        }\n        this.props.initTags();\n    }\n\n    componentWillUnmount() {\n        this.props.resetCurArticle();\n    }\n\n    uploadCover(data, cb) {\n        const formData = new FormData();\n        formData.append(data.filename, data.file);\n        uploadImg(formData).then(res => {\n            if (res.data.resCode === 200) {\n                cb && cb(res)\n                \n            }\n        })\n    }\n\n    // 保存文章 id存在时为编辑状态\n    saveArticleHandler() {\n        let formData = this.form.getFormData();\n        if(!formData) {\n            return;\n        }\n        formData = Object.assign(this.child.getContent(), formData);\n        if (this.state.articleId) {\n            // console.log('编辑====: ', formData);\n            updateArticleById(this.state.articleId, formData).then(result => {\n                const { data } = result;\n                if (data) {\n                    this.context.router.history.push(`/articles`);\n                }\n            });\n        } else {\n            // console.log('新建====: ', formData);\n            createArticle(formData).then(result => {\n                const { data } = result;\n                if (data) {\n                    this.context.router.history.push(`/articles`);\n                }\n            });\n        }\n    }\n\n    onRef = (ref) => {\n        this.child = ref;\n    }\n\n    render() {\n        return (\n            <div>\n                <Header type={1} />\n                <div className=\"container edit-container\">\n                    <EditForm\n                        wrappedComponentRef={(form) => this.form = form}\n                        article={this.props.curArticle}\n                        allTags={this.props.tags}\n                        onRef={this.onRef}\n                        uploadCover={this.uploadCover}\n                    />\n                    <EditContent\n                        onRef={this.onRef}\n                        article={this.props.curArticle}\n                    />\n                    <Button type=\"primary\" className=\"common-btn operate-btn\" onClick={this.saveArticleHandler.bind(this)}>\n                        发布\n                    </Button>\n                    <Button className=\"operate-btn\"><Link to=\"/articles\">取消</Link></Button>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        curArticle: state.articlesReducer.curArticle,\n        tags: state.articlesReducer.tags,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initTags: () => {\n            getTags().then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(initTags(data.tags));\n                }\n            });\n        },\n        articleDetail(id, typeNum = '') {\n            return getArticleDetail(id, typeNum).then(result => {\n                const { data } = result;\n                if (data) {\n                    let obj = Object.assign({ tags: data.tags }, data.article[0])\n                    dispatch(setCurArticle(obj));\n                }\n            });\n        },\n        resetCurArticle() {\n            dispatch(setCurArticle(null));\n        }\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(EditArticleContainer)","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n    Tag, Input, Icon,\n} from 'antd';\nimport { TweenOneGroup } from 'rc-tween-one';\n\nexport default class EditTag extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            inputVisible: false,\n            inputValue: '',\n        }\n    }\n    \n    static propTypes = {\n        tags: PropTypes.array,\n        initTags: PropTypes.func,\n        addTag: PropTypes.func,\n        deleteTag: PropTypes.func,\n        isAdmin: PropTypes.bool,\n        clickTagHandler: PropTypes.func\n    };\n\n    handleClose = (removedTag) => {\n        // const tags = this.props.tags.filter(tag => tag !== removedTag);\n        let tagIndex = 0;\n        try {\n            this.props.tags.forEach((item, index) => {\n                if(item._id === removedTag._id) {\n                    tagIndex = index;\n                    return false;\n                }\n            })\n        } catch(e) {\n            throw new Error('current deleted tag_id is not exist');\n        }\n        this.props.deleteTag(removedTag._id, tagIndex);\n        // this.setState({ tags });\n    }\n\n    showInput = () => {\n        this.setState({ inputVisible: true }, () => this.input.focus());\n    }\n\n    handleInputChange = (e) => {\n        this.setState({ inputValue: e.target.value });\n    }\n\n    clickTagHandler(tag) {\n        this.props.clickTagHandler(tag);\n    }\n\n    handleInputConfirm = () => {\n        const { inputValue } = this.state;\n        this.props.addTag(inputValue);\n        this.setState({\n            inputVisible: false,\n            inputValue: '',\n        });\n    }\n\n    saveInputRef = input => this.input = input\n\n    forMap = (tag) => {\n        const tagElem = (\n            <Tag\n                closable={this.props.isAdmin ? true : false}\n                onClose={(e) => {\n                    e.preventDefault();\n                    this.handleClose(tag);\n                }}\n            >\n                <span onClick={this.clickTagHandler.bind(this, tag.name)}>{tag.name}</span>\n            </Tag>\n        );\n        return (\n            <span key={tag._id} style={{ display: 'inline-block' }}>\n                {tagElem}\n            </span>\n        );\n    }\n\n    render() {\n        const { inputVisible, inputValue } = this.state;\n        let tags = this.props.tags || [];\n        \n        const tagChild = tags.map(this.forMap);\n        return (\n            <div>\n                <div style={{ marginBottom: 16 }}>\n                    <TweenOneGroup\n                        enter={{\n                            scale: 0.8, opacity: 0, type: 'from', duration: 100,\n                            onComplete: (e) => {\n                                e.target.style = '';\n                            },\n                        }}\n                        leave={{ opacity: 0, width: 0, scale: 0, duration: 200 }}\n                        appear={false}\n                    >\n                        {tagChild}\n                    </TweenOneGroup>\n                </div>\n                {inputVisible && (\n                    <Input\n                        ref={this.saveInputRef}\n                        type=\"text\"\n                        size=\"small\"\n                        style={{ width: 78 }}\n                        value={inputValue}\n                        onChange={this.handleInputChange}\n                        onBlur={this.handleInputConfirm}\n                        onPressEnter={this.handleInputConfirm}\n                    />\n                )}\n                {!inputVisible && this.props.isAdmin && (\n                    <Tag\n                        onClick={this.showInput}\n                        style={{ background: '#fff', borderStyle: 'dashed' }}>\n                        <Icon type=\"plus\" /> New Tag\n                    </Tag>\n                )}\n            </div>\n        );\n    }\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Header from '../../components/Header'\nimport EditTag from '../../components/article/editTag'\nimport { createTag, removeTag, getTags } from '../../service/fetch'\nimport { addTag, deleteTag, initTags } from '../../reducers/articles'\nimport { changeCurNav } from '../../reducers/common'\nimport '../../css/article.less'\n\nclass Tags extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n    \n    componentWillMount() {\n        this.props.initTags();      \n        setTimeout(() => {\n            this.props.changeCurNav('Tags')\n        }, 0)  \n    }\n\n    clickTagHandler(tag) {\n        this.context.router.history.push(`/articles/tags/${tag}`);\n    }\n    \n    render() {\n        \n        return (\n            <div>\n                <Header type={1} formParentNav=\"Tags\"/>\n                <div className=\"container article-container\">\n                    <EditTag\n                        isAdmin={this.props.isAdmin}\n                        tags={this.props.tags}\n                        initTags={this.props.initTags}\n                        addTag={this.props.addTag}\n                        deleteTag={this.props.deleteTag}\n                        clickTagHandler={this.clickTagHandler.bind(this)}\n                    />\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        tags: state.articlesReducer.tags,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initTags: () => {\n            getTags().then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(initTags(data.tags));\n                } \n            });\n        },\n        deleteTag: (tagId, tagIndex) => {\n            removeTag({tagId: tagId}).then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(deleteTag(tagIndex));\n                } \n            });\n        },\n        addTag: (tag) => {\n            createTag({name: tag}).then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(addTag(data.res));\n                } \n            });\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Tags)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport Home from './containers/Home'\nimport reducer from './reducers/index'\nimport 'lib-flexible'\nimport './index.less'\n\nimport ImgList from './containers/photograph/ImgList'\nimport ImgDetail from './containers/photograph/ImgDetail'\nimport Group from './containers/photograph/Group'\nimport ArticleList from './containers/article/ArticleList'\nimport ArticleDetail from './containers/article/ArticleDetail'\nimport EditArticle from './containers/article/EditArticle'\nimport ArticlesTags from './containers/article/Tags'\n\nimport {BrowserRouter as Router, Route } from 'react-router-dom';\nimport { ToastContainer } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\n\n// createStore 函数专门生产state和dispatch的集合， 调用后返回state和dispatch\nconst store = createStore(reducer);\nconsole.log('NODE_ENV', process.env.NODE_ENV);\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <div>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/photograph\" component={ImgList} />\n        <Route exact path=\"/photograph/detail/:id\" component={ImgDetail} />\n        <Route exact path=\"/photograph/group/:id\" component={Group} />\n        <Route exact path=\"/articles\" component={ArticleList} />\n        <Route exact path=\"/articles/detail/:id\" component={ArticleDetail} />\n        <Route exact path=\"/articles/new\" component={EditArticle} />\n        <Route exact path=\"/articles/edit/:id\" component={EditArticle} />\n        <Route exact path=\"/articles/tags\" component={ArticlesTags} />\n        <Route exact path=\"/articles/tags/:tag\" component={ArticleList} />\n        <ToastContainer />\n      </div>\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}