{"version":3,"sources":["static/img sync /^/img.*/.jpg$","static/img/img1.jpg","static/img/img10.jpg","static/img/img11.jpg","static/img/img12.jpg","static/img/img13.jpg","static/img/img14.jpg","static/img/img15.jpg","static/img/img16.jpg","static/img/img17.jpg","static/img/img2.jpg","static/img/img3.jpg","static/img/img4.jpg","static/img/img5.jpg","static/img/img6.jpg","static/img/img7.jpg","static/img/img8.jpg","static/img/img9.jpg","static/img/avator.jpeg","reducers/common.js","containers/loginToast.js","util/post.js","service/fetch.js","containers/Home.js","reducers/imgs.js","reducers/articles.js","reducers/index.js","components/photograph/Img.js","components/photograph/ImgList.js","components/photograph/UploadImg.js","components/Header.js","components/Loading.js","containers/photograph/ImgList.js","components/Comment.js","components/Music.js","containers/photograph/ImgDetail.js","containers/photograph/Group.js","components/article/Article.js","components/article/ArticleList.js","containers/article/ArticleList.js","containers/article/ArticleDetail.js","components/article/EditForm.js","components/article/EditContent.js","containers/article/EditArticle.js","components/article/editTag.js","containers/article/Tags.js","components/About.js","index.js"],"names":["map","./img1.jpg","./img10.jpg","./img11.jpg","./img12.jpg","./img13.jpg","./img14.jpg","./img15.jpg","./img16.jpg","./img17.jpg","./img2.jpg","./img3.jpg","./img4.jpg","./img5.jpg","./img6.jpg","./img7.jpg","./img8.jpg","./img9.jpg","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","p","changeCurNav","nav","type","changeLoginStatus","isLogined","changeUserType","isAdmin","LoginForm","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleSubmit","preventDefault","form","validateFields","err","values","register","then","result","data","window","sessionStorage","setItem","res","concat","source","name","toast","dismiss","login","user","state","btnText","setState","getFieldDecorator","react_default","a","createElement","es_form","onSubmit","className","Item","label","rules","required","message","input","placeholder","es_button","htmlType","React","Component","loginToast","Form","create","connect","commonReducer","dispatch","isLogin","get","_ref","asyncToGenerator","regenerator_default","mark","_callee","url","wrap","_context","prev","next","fetch","method","headers","Accept","Content-Type","credentials","sent","json","resCode","error","position","POSITION","TOP_RIGHT","console","log","abrupt","t0","stop","_x","apply","arguments","post","_ref2","_callee2","body","_context2","JSON","stringify","containers_loginToast","autoClose","closeOnClick","draggable","_x2","_x3","formPost","_ref3","_callee3","formData","_context3","_x4","_x5","DEV_URL","publishImgs","group","uploadImg","deleteImgById","params","_id","imgName","group_id","addImgFavor","getArticleDetail","typeNum","comment","getTags","Link","Anchor","Home","bgHeight","height","document","documentElement","clientHeight","screenChange","nextProps","nextState","someData","_this2","addEventListener","_this3","text","item","i","imgStyle","backgroundImage","require","Math","floor","random","backgroundSize","key","style","to","es_anchor","Home_Link","href","title","initImgs","imgs","pageNum","addImg","img","deleteImg","imgIndex","addImgFavorCount","index","initArticles","articles","setCurArticle","article","initTags","tags","reducer","combineReducers","imgsReducer","action","curImg","objectSpread","toConsumableArray","slice","forEach","push","likes","articlesReducer","curArticle","articleIndex","cur","tag","tagIndex","curNav","Boolean","getItem","bgColors","Img","toImgDetailPage","context","router","history","toGroupImg","groupId","stopPropagation","imgBoxStyle","background","length","showGroupBtn","onResizeHandler","location","pathname","indexOf","onresize","resizeThrottle","bind","refs","imgBox","clientWidth","h","w","fn","wait","immediate","timer","args","setTimeout","onClick","ref","src","alt","icon","onDeleteImg","contextTypes","PropTypes","object","isRequired","ImgList","react_masonry_component_lib_default","disableImagesLoaded","updateOnEachImageLoad","options","transitionDuration","Img_Img","textAlign","defaultProps","PicturesWall","previewVisible","previewImage","fileList","handleCancel","handlePreview","file","thumbUrl","onUploadRemove","info","uid","splice","getUploadList","handleChange","FormData","append","filename","getImgWH","fileName","status","v","cb","reader","FileReader","onload","target","image","Image","width","readAsDataURL","_this$state","uploadButton","es_upload","listType","multiple","customRequest","upload","onPreview","onRemove","onChange","modal","visible","footer","onCancel","UploadImg","handleOk","imgList","getFieldsValue","visibleHandler","resetFields","imglist","onAddImg","list","categorys","Option","Select","onOk","UploadImg_PicturesWall","layout","initialValue","es_select","handleTypeChange","value","articleNavArr","imgNavArr","Header","navClickHandler","child","activeIndex","showMenu","undefined","handleNavChange","navArr","isLargeScreen","loginText","route","formParentNav","removeItem","_this4","content","menu","es_menu","item1","dropdown","overlay","trigger","clickAbout","quitHandle","loginHandle","toggleMenu","Loading","loadMore","show","spin","size","handleClick","ImgListContainer","flag","dialogVisible","loading","showLoading","noMore","loadImgs","category","fetchImgs","split","imgId","components_Header","photograph_UploadImg","spinning","ImgList_ImgList","handleAddImgFavor","handleDeleteImg","Loading_Loading","back_top","getElementsByClassName","TextArea","Input","CommentList","comments","count","reduce","dataSource","header","itemLayout","renderItem","es_comment","Editor","submitting","rows","MyComment","receiver","belongId","resComment","curComment","author","sender","avatar","created_at","senderInfo","datetime","isReceiver","actions","replay","queryReceiverName","configComment","Comment_CommentList","es_avatar","Comment_Editor","musics","frameBorder","border","marginWidth","marginHeight","ImgDetail","resizeImgHandler","imgEnlargeble","commentImg","lastOrNextImg","getImgDetail","match","curPage","clickTypeNum","warning","handleBrowser","num","assign","pv","_this5","join","goBack","clickImgFavorHandler","Comment_MyComment","groupInfo","Music_Home","Article","cover_url","v-if","viewDetail","deleteArticle","editArticle","description","ArticleList","Article_Article","ArticleListContainer","onEditArticle","articleId","onViewDetail","search","substring","loadArticles","getArticlesByTagName","fetchArticles","coverName","ArticleList_ArticleList","onDeleteArticle","ArticleDetail","lastOrNextArticle","articleDetail","commentArticle","backListPage","date","replace","react_highlight_default","innerHTML","ArticleForm","getFormData","selectedTags","coverUrl","onRef","setFieldsValue","initForm","option","uploadCover","selects","allTags","row","col","span","mode","handleTagChange","onUploadCover","showUploadList","EditContent","editorContent","elem","editorElem","editor","E","customConfig","uploadImgShowBase64","onchange","html","txt","EditArticleContainer","resetCurArticle","getContent","createArticle","EditForm","wrappedComponentRef","EditContent_EditContent","saveArticleHandler","obj","EditTag","handleClose","removedTag","deleteTag","showInput","inputVisible","focus","handleInputChange","inputValue","handleInputConfirm","addTag","saveInputRef","forMap","tagElem","es_tag","closable","onClose","clickTagHandler","assertThisInitialized","display","tagChild","marginBottom","rc_tween_one_es","enter","scale","opacity","duration","onComplete","leave","appear","onBlur","onPressEnter","borderStyle","Tags","editTag_EditTag","tagId","createTag","Footer","store","createStore","process","ReactDOM","render","es","BrowserRouter","Route","exact","path","component","About","Group","EditArticle","ArticlesTags","lib","getElementById"],"mappings":"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","file":"static/js/main.afc0db65.chunk.js","sourcesContent":["var map = {\n\t\"./img1.jpg\": 340,\n\t\"./img10.jpg\": 341,\n\t\"./img11.jpg\": 342,\n\t\"./img12.jpg\": 343,\n\t\"./img13.jpg\": 344,\n\t\"./img14.jpg\": 345,\n\t\"./img15.jpg\": 346,\n\t\"./img16.jpg\": 347,\n\t\"./img17.jpg\": 348,\n\t\"./img2.jpg\": 349,\n\t\"./img3.jpg\": 350,\n\t\"./img4.jpg\": 351,\n\t\"./img5.jpg\": 352,\n\t\"./img6.jpg\": 353,\n\t\"./img7.jpg\": 354,\n\t\"./img8.jpg\": 355,\n\t\"./img9.jpg\": 356\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 339;","module.exports = __webpack_public_path__ + \"static/media/img1.3351d8f8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img10.39e739c8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img11.e2702cdd.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img12.88a76fdb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img13.366199ec.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img14.8585d4a4.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img15.9a5b0b40.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img16.331a8661.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img17.8b7b57fc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img2.5f0110bf.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img3.fad77519.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img4.32cf8853.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img5.1a6f3ceb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img6.dadad061.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img7.1c35e8bb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img8.7f8bb6f5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img9.1bcce4d0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avator.8bf53cd0.jpeg\";","const CHANGE_CUR_NAV = 'CHANGE_CUR_NAV'\nconst CHANGE_LOGIN_STATUS = 'CHANGE_LOGIN_STATUS'\nconst CHANGE_USER_TYPE = 'CHANGE_USER_TYPE'\n\nexport default function(state, action) {\n    if(!state) {\n        // 初始化\n        state = { \n            curNav: '',             // 当前header选中标签\n            isLogined: Boolean(window.sessionStorage.getItem('user')),         // 是否登录\n            isAdmin: window.sessionStorage.getItem('type') === '1',    // 是否是管理员 \n        }; \n    }\n\n    switch (action.type) {\n        case CHANGE_CUR_NAV: \n            return {\n                ...state,\n                curNav: action.nav\n            }\n        \n        case CHANGE_LOGIN_STATUS:\n            return {\n                ...state,\n                isLogined: action.isLogined\n            }\n        \n        case CHANGE_USER_TYPE:\n            console.log('isAdmin', action.isAdmin);\n            return {\n                ...state,\n                isAdmin: action.isAdmin\n            }\n            \n        default: \n            return state;\n    }\n}\nexport const changeCurNav = (nav) => {\n    return { type: CHANGE_CUR_NAV, nav }\n}\n\nexport const changeLoginStatus = (isLogined) => {\n    return { type: CHANGE_LOGIN_STATUS, isLogined }\n}\n\nexport const changeUserType = (isAdmin) => {\n    return { type: CHANGE_USER_TYPE, isAdmin }\n}\n\n\n\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, Input, Button } from 'antd';\nimport { toast } from \"react-toastify\";\nimport { login, register } from \"../service/fetch\";\nimport { connect } from 'react-redux'\nimport { changeLoginStatus, changeUserType } from '../reducers/common'\n\nclass LoginForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            btnText: '注册',\n        }\n    }\n    static propTypes = {\n        type: PropTypes.number, // 0 注册, 1 登录\n    }\n    componentDidMount() {\n        this.setState({\n            btnText: this.props.type === 0 ? '注 册' : '登 录'\n        })\n    }\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                if(this.props.type === 0) {\n                    register(values).then(result => {\n                        const { data } = result;\n                        if (data) {\n                            window.sessionStorage.setItem('type', data.res.type);\n                            window.sessionStorage.setItem('user', `来自${data.res.source}的${data.res.name}`);\n                            toast.dismiss();\n                            this.props.changeLoginStatus(true); \n                            this.props.changeUserType(data.res.type === 1);\n                        }\n                    });\n                } else {\n                    login(values).then(result => {\n                        const { data } = result;\n                        if (data) {\n                            window.sessionStorage.setItem('type', data.user.type);\n                            window.sessionStorage.setItem('user', `来自${data.user.source}的${data.user.name}`);\n                            toast.dismiss();\n                            this.props.changeLoginStatus(true);\n                            this.props.changeUserType(data.user.type === 1);\n                        }\n                    });\n                }\n            }\n        });\n    }\n\n    render() {\n        const { getFieldDecorator } = this.props.form;\n        return (\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                { this.props.type === 0 && \n                    <div>\n                        <Form.Item label=\"一个来自\">\n                        {getFieldDecorator('source', {\n                            rules: [{ required: true, message: '我要知道你从哪里来啊朋友' }],\n                        })(\n                            <Input placeholder=\"社交平台\" />\n                        )}\n                    </Form.Item>\n                    <Form.Item label=\"的\">\n                        {getFieldDecorator('name', {\n                            rules: [{ required: true, message: '我要知道你的名字啊朋友' }],\n                        })(\n                            <Input placeholder=\"小可爱\" />\n                        )}\n                </Form.Item>        \n                    </div>\n                }\n                <Form.Item label=\"邮箱\">\n                    {getFieldDecorator('email', {\n                        rules: [{ required: true, message: '输入邮箱' }],\n                    })(\n                        <Input placeholder=\"邮箱\" />\n                    )}\n                </Form.Item>\n                <Form.Item label=\"密码\">\n                    {getFieldDecorator('password', {\n                        rules: [{ required: true, message: '输入密码' }],\n                    })(\n                        <Input type=\"password\" placeholder=\"密码\" />\n                    )}\n                </Form.Item>\n                <Form.Item>\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">{ this.state.btnText }</Button>\n                </Form.Item>\n            </Form>\n        );\n    }\n}\n\nconst loginToast = Form.create({ name: 'normal_login' })(LoginForm);\n\nconst mapStateToProps = (state) => {\n    return {\n        isLogined: state.commonReducer.isLogined,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeLoginStatus: (isLogin) => {\n            dispatch(changeLoginStatus(isLogin));\n        },\n        changeUserType: (isAdmin) => {\n            dispatch(changeUserType(isAdmin));\n        }\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(loginToast)\n","import { toast } from \"react-toastify\";\nimport React from 'react'\nimport LoginForm from '../containers/loginToast';\n\nconst CREDENTIALS = process.env.ORIGIN ? \"include\" : \"same-origin\";\n\nexport const get = async url => {\n  try {\n    var result = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      credentials: CREDENTIALS\n    });\n    const data = await result.json();\n    if (data.resCode === 500) {\n      toast.error(data.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      if (data.resCode === 401) {\n        console.log(\"USER_INVALID\");\n        return;\n      }\n      throw new Error(data.message);\n    }\n    return {\n      data\n    };\n  } catch (e) {\n    return {\n      code: -2,\n      message: e.message\n    };\n  }\n};\n\nexport const post = async (url, body) => {\n  try {\n    var result = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body),\n      credentials: CREDENTIALS\n    });\n    const data = await result.json();\n    if (data.resCode !== 200) {\n      if (data.resCode === 401) {\n        console.log(\"USER_INVALID\");\n        toast(<LoginForm />,{\n          autoClose: false,\n          closeOnClick: false,\n          draggable: false,\n        });\n      } else {\n        toast.error(data.message, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n      throw new Error(data.message);\n    }\n    return {\n      data\n    };\n  } catch (e) {\n    return {\n      message: e.message,\n    };\n  }\n};\n\nexport const formPost = async (url, formData) => {\n  try {\n    var result = await fetch(url, {\n      method: \"POST\",\n      // headers: {\n        // \"Content-Type\": \"multipart/form-data\"\n      // },\n      body: formData\n    });\n    const data = await result.json();\n    if (data.resCode === 500) {\n      toast.error(data.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      throw new Error(data.message);\n    }\n    return {\n      data\n    };\n  } catch (e) {\n    return {\n      code: -2,\n      message: \"未知错误\"\n    };\n  }\n};","import { get, post, formPost } from \"../util/post\";\n\nconst DEV_URL = process.env.NODE_ENV === 'development' ? 'http://localhost:3000' : 'http://www.huangchufeng.site:3000';\n\n// 发布照片\nexport const publishImgs = group => {\n  return post(`${DEV_URL}/api/imgs/publish`, group);\n};\n\n// 上传图片\nexport const uploadImg = group => {\n  return formPost(`${DEV_URL}/api/uploadImg`, group);\n};\n\n/*\n    请求所有的照片\n    /api/imgs\n */\nexport const fetchImgs = (params) => {\n  return get(`${DEV_URL}/api/imgs?pageNum=${params.pageNum}&category=${params.category}`);\n};\n\n// 获取组图\nexport const fetchGroupImgs = (groupId) => {\n  return get(`${DEV_URL}/api/groupImgs?groupId=${groupId}`);\n};\n\n// 获取照片详情\nexport const getImgDetail = (id, typeNum) => {\n  return get(`${DEV_URL}/api/imgs/${id}?typeNum=${typeNum}`);\n};\n\n// 删除照片\nexport const deleteImgById = params => {\n  return get(`${DEV_URL}/api/imgs/${params._id}/remove?imgName=${params.imgName}&groupId=${params.group_id}`);\n};\n\n// 更新文章浏览量\nexport const addImgPv = (id, num) => {\n  return get(`${DEV_URL}/api/imgs/${id}/addImgPv`, {\n    num: num,\n  });\n};\n\n// 更新文章喜欢数量\nexport const addImgFavor = (id) => {\n  return get(`${DEV_URL}/api/imgs/${id}/addImgFavor`);\n};\n\n\nexport const login = (user) => {\n  return post(`${DEV_URL}/api/user/login`, user);\n};\n\nexport const register = (user) => {\n  return post(`${DEV_URL}/api/user/register`, user);\n};\n\n// 退出\nexport const quit = () => {\n  return get(`${DEV_URL}/api/user/quit`);\n};\n\n// 获取文章列表\nexport const fetchArticles = (params) => {\n  return get(`${DEV_URL}/api/articles?pageNum=${params.pageNum}&type=${params.type}`);\n};\n\n// 获取文章详情\nexport const getArticleDetail = (id, typeNum) => {\n  return get(`${DEV_URL}/api/articles/${id}?typeNum=${typeNum}`);\n};\n\n// 创建文章\nexport const createArticle = article => {\n  return post(`${DEV_URL}/api/articles/create`, {\n    article: article\n  });\n};\n\n// 删除文章\nexport const deleteArticleById = params => {\n  return get(`${DEV_URL}/api/articles/${params.articleId}/remove?coverName=${params.coverName}`);\n};\n\n// 更新文章\nexport const updateArticleById = (id, article) => {\n  return post(`${DEV_URL}/api/articles/${id}/update`, {\n    article: article,\n  });\n};\n\n// 更新文章浏览量\nexport const addArticlePv = (id) => {\n  return get(`${DEV_URL}/api/articles/${id}/addArticlePv`);\n};\n\n// 发表评论\nexport const comment = (id, comment) => {\n  return post(`${DEV_URL}/api/${id}/comment`, comment);\n};\n\n// 增加新标签\nexport const createTag = (tag) => {\n  return post(`${DEV_URL}/api/articleTags/create`, tag);\n};\n\n// 删除标签\nexport const removeTag = params => {\n  return get(`${DEV_URL}/api/articleTags/${params.tagId}/remove`);\n};\n\n// 获取所有标签\nexport const getTags = params => {\n  return get(`${DEV_URL}/api/articleTags`);\n};\n\n// 获取某篇文章的所有标签\nexport const getTagsByArticleId = params => {\n  return get(`${DEV_URL}/api/articleTags/${params.articleId}`);\n};\n\n// 根据标签name获取对应文章\nexport const getArticlesByTagName = tag => {\n  return get(`${DEV_URL}/api/tag/articles?tag=${tag}`);\n};\n\n\n\n// 获取当前城市\nexport const getLocation = params => {\n  return get(`http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js`);\n};","import React, { Component } from 'react'\nimport { Anchor } from 'antd';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { getLocation } from \"../service/fetch\";\nimport '../css/home.less'\nconst { Link } = Anchor;\nexport default class Home extends Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        bgHeight: {\n          height: document.documentElement.clientHeight + 'px',\n        }\n      }\n  }\n\n  componentDidMount() {\n      // 高度设置\n      this.screenChange();\n      // this.getLocationCity();\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.someData !== this.state.someData\n  }\n\n  getLocationCity() {\n    getLocation().then(result => {\n        // console.log('获取当前城市', result)\n    });\n  }\n\n  screenChange() {\n    window.addEventListener('resize', () => {\n      this.setState({ \n        bgHeight: {\n          height: document.documentElement.clientHeight + 'px'\n        }\n      })\n    });\n  }\n  render() {\n    const arr = [\n      {\n        id: 'first',\n        text: 'IV'\n      }, {\n        id: 'second',\n        text: 'HUSH'\n      }, {\n        id: 'third',\n        text: 'OHIO'\n      }, {\n        id: 'forth',\n        text: 'MYTH'\n      }\n    ]\n    console.log('render');\n    \n    return (\n      <div className=\"home-page\">\n        {\n          arr.map((item, i) => {\n            const imgStyle = {\n              height: document.documentElement.clientHeight + 'px',\n              backgroundImage: `url(${require(\"../static/img/img\" +  Math.floor(Math.random()*17 + 1) + \".jpg\")})`, \n              backgroundSize: 'cover'\n            }\n            return (\n              <div key={i} id={item.id + 'Page'} className={'index-bg ' + item.id } style={ this.state.bgHeight }>\n                <div className=\"img\" style={ imgStyle }></div>\n                <div className=\"mask\" style={ this.state.bgHeight }>{ item.text }</div>\n                { i === 0 &&\n                <ul className=\"nav-ul\">\n                  <li><RouteLink to=\"/photograph\">摄影</RouteLink></li>\n                  <li><RouteLink to=\"/articles\">博客</RouteLink></li>\n                </ul>\n                 }\n              </div>\n            )\n          })\n        }\n        <Anchor>\n          <ul className=\"anchor-list\">\n            <li><Link href=\"#firstPage\" title=\"01\"/></li>\n            <li><Link href=\"#secondPage\" title=\"02\"/></li>\n            <li><Link href=\"#thirdPage\" title=\"03\"/></li>\n            <li><Link href=\"#forthPage\" title=\"04\"/></li>\n          </ul>\n        </Anchor>\n      </div>\n    )\n  }\n}","/* reducer 就是用来描述数据的形态和相应的变更\n * 1. 定义action types\n * 2. 编写reducer\n * 3. 编写与这个reducer相关的action creators\n */\n\n// action types\nconst INIT_IMGS = 'INIT_IMGS';\nconst ADD_IMG = 'ADD_IMG';\nconst DELETE_IMG = 'DELETE_IMG';\nconst ADD_IMG_FAVOR_COUNT = 'ADD_IMG_FAVOR';\n\nexport default function(state, action) {\n    if(!state) {\n        // 初始化\n        state = { \n            imgs: [],\n            curImg: {}\n        }; \n    }\n\n    switch (action.type) {\n        case INIT_IMGS:\n            // 初始化图片列表\n            if(action.pageNum > 1) {\n                return { \n                    ...state,\n                    imgs: [ ...state.imgs, ...action.imgs],\n                };\n            } else {\n                return { \n                    ...state,\n                    imgs: action.imgs,\n                };\n            }\n\n        case ADD_IMG:\n            return { \n                ...state,\n                imgs: [action.img, ...state.imgs],\n            };\n        case DELETE_IMG:\n            return {\n                ...state,\n                imgs: [\n                    ...state.imgs.slice(0, action.imgIndex),\n                    ...state.imgs.slice(action.imgIndex + 1)\n                ]\n            };\n        case ADD_IMG_FAVOR_COUNT:\n            let imgs = [];\n            state.imgs.forEach((item, index) => {\n                imgs.push(item)\n                if(index === action.index) {\n                    imgs[index].likes = (item.likes || 0) + 1;\n                }\n            })\n            return {\n                ...state,\n                imgs\n            }\n\n        default: \n            return state;\n    }\n}\n\nexport const initImgs = (imgs, pageNum) => {\n    return { type: INIT_IMGS, imgs, pageNum }\n}\n\nexport const addImg = (img) => {\n    return { type: ADD_IMG, img }\n}\n\nexport const deleteImg = (imgIndex) => {\n    return { type: DELETE_IMG, imgIndex }\n}\n\nexport const addImgFavorCount = (index) => {\n    return { type: ADD_IMG_FAVOR_COUNT, index }\n}\n\n\n","// action types\nconst INIT_ARTICLES = 'INIT_ARTICLES';\nconst DELETE_ARTICLE = 'DELETE_ARTICLE';\nconst SET_CUR_ARTICLE = 'SET_CUR_ARTICLE';\n\nconst INIT_TAGS = 'INIT_TAGS';\nconst ADD_TAG = 'ADD_TAG';\nconst DELETE_TAG = 'DELETE_TAG';\n\nexport default function(state, action) {\n    if(!state) {\n        // 初始化\n        state = { \n            articles: [],\n            curArticle: null,       // 当前查看或编辑的文章\n            tags: [],\n        }; \n    }\n\n    switch (action.type) {\n        case INIT_ARTICLES:\n            if(action.pageNum > 1) {\n                return { \n                    ...state,\n                    articles: [...state.articles, ...action.articles],\n                };\n            } else {\n                return {\n                    ...state,\n                    articles: action.articles\n                }\n            }\n            \n        case DELETE_ARTICLE:\n            return {\n                ...state,\n                articles: [\n                    ...state.articles.slice(0, action.articleIndex),\n                    ...state.articles.slice(action.articleIndex + 1)\n                ]\n            };\n        \n        case SET_CUR_ARTICLE:\n            let cur = action.article;\n            return { \n                ...state,\n                curArticle: cur \n            };\n\n        case INIT_TAGS:\n            return { \n                ...state,\n                tags: action.tags,\n            };\n\n        case ADD_TAG:\n            return { \n                ...state,\n                tags: [action.tag, ...state.tags],\n            };\n        \n        case DELETE_TAG:\n            return {\n                ...state,\n                tags: [\n                    ...state.tags.slice(0, action.tagIndex),\n                    ...state.tags.slice(action.tagIndex + 1)\n                ]\n            };\n        default: \n            return state;\n    }\n}\n\nexport const initArticles = (articles, pageNum) => {\n    return { type: INIT_ARTICLES, articles, pageNum }\n}\n\nexport const deleteArticle = (articleIndex) => {\n    return { type: DELETE_ARTICLE, articleIndex }\n}\n\nexport const setCurArticle = (article) => {\n    return { type: SET_CUR_ARTICLE, article }\n}\n\nexport const initTags = (tags) => {\n    return { type: INIT_TAGS, tags }\n}\n\nexport const addTag = (tag) => {\n    return { type: ADD_TAG, tag }\n}\n\nexport const deleteTag = (tagIndex) => {\n    return { type: DELETE_TAG, tagIndex }\n}","import { combineReducers } from 'redux'\nimport imgsReducer from './imgs'\nimport articlesReducer from './articles'\nimport commonReducer from './common'\n\nconst reducer = combineReducers({\n    imgsReducer,\n    articlesReducer,\n    commonReducer\n})\n\nexport default reducer","import React, { Component } from 'react'\n\nimport PropTypes from 'prop-types'\nimport { Icon } from 'antd';\n\n\nconst bgColors = ['rgba(106,10,171,.3)', 'rgba(199,0,125,.3)', 'rgba(52,21,176,.3)', 'rgba(68,3,111,.3)', 'rgba(64,19,175,.3)', 'rgba(166,0,166,.3)', 'rgba(108,0,108,.3)'];\n\nexport default class Img extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imgBoxStyle: {\n                background: bgColors[Math.floor(Math.random()*bgColors.length)],\n                height: ''\n            },\n            showGroupBtn: false,\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    static propTypes = {\n        img: PropTypes.object,\n        index: PropTypes.number,\n        onDeleteImg: PropTypes.func,\n        addImgFavor: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.onResizeHandler()\n    }\n\n    componentDidMount() {\n        this.setState({\n            showGroupBtn: this.context.router.history.location.pathname.indexOf('group') === -1\n        });\n        // 这里页面加载完成之后resizeThrottle函数立即执行了, 所以函数内的start直接打印了\n        // 以后每次发生resize事件时只会触发resizeThrottle函数的返回函数\n        this.onResizeHandler();\n        window.onresize = this.resizeThrottle(this.onResizeHandler.bind(this), 500, true);\n    }\n\n    onResizeHandler() {\n        // resize节流 500ms内只能触发一次\n        let width = this.refs.imgBox.clientWidth; // 宽固定\n        let scale = this.props.img.h / this.props.img.w;\n        let height = width * scale;\n        this.refs.imgBox.style.height = height + 'px';\n    }\n\n    resizeThrottle(fn, wait, immediate) {\n        let timer = null;\n        return function() {\n            let args = arguments;\n            if (immediate) {\n                fn.apply(this, args);\n                immediate = false;\n            }\n            if (!timer) {\n                timer = setTimeout(() => {\n                    console.log('timer is null') // 每隔500ms清空一次timer;\n                    fn.apply(this, args);\n                    timer = null;\n                }, wait);\n            }\n        }\n    }\n\n    // 查看图片详情\n    toImgDetailPage = id =>  {\n        this.context.router.history.push(`/photograph/detail/${id}`);       \n    }\n\n    // 查看组图\n    toGroupImg = (e, groupId) => {\n        e.stopPropagation();\n        this.context.router.history.push(`/photograph/group/${groupId}`);\n    }\n\n    render() {\n        return (\n            <div className=\"img-wraper\" onClick={this.toImgDetailPage.bind(this, this.props.img._id)}>\n                <div className=\"img-box\" ref=\"imgBox\" style={this.state.imgBoxStyle}>   \n                    <img src={this.props.img.src} alt=\"\"/>\n                </div>\n\n                <div className=\"img-cover\">\n                    <div className=\"operate-box\">\n                       <div>\n                            <Icon className=\"heart-icon\" type=\"heart\" onClick={(e) => this.props.addImgFavor(e, this.props.img._id, this.props.index)} /> \n                            <span className=\"count-span\">{this.props.img.likes || 0}</span>\n                            { this.state.showGroupBtn &&\n                            <Icon type=\"switcher\" className=\"collection-icon\" onClick={(e) => { this.toGroupImg(e, this.props.img.group_id) }} />\n                            }\n                            { this.props.isAdmin &&\n                            <Icon type=\"delete\" className=\"collection-icon\" onClick={(e) => { this.props.onDeleteImg(e, this.props.img, this.props.index)}}/>\n                            }\n                       </div>\n                    </div>\n                    <div className=\"info-box\">\n                        { this.props.img.title }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport Img from './Img'\nimport Masonry from 'react-masonry-component';\nimport PropTypes from 'prop-types'\n\nexport default class ImgList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n    // 对父组件传入的props数据进行类型检测\n    static propTypes = {\n        imgs: PropTypes.array,\n        onDeleteImg: PropTypes.func,\n        addImgFavor: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    // 声明变量, 初始化默认值\n    static defaultProps = {\n        imgs: [],\n    }\n\n    render() {\n        return (\n            <div>\n            { this.props.imgs.length > 0 &&\n                <Masonry\n                disableImagesLoaded={false}\n                updateOnEachImageLoad={false}\n                options={{transitionDuration: 0}} >\n                    {this.props.imgs.map((img, i) =>\n                    <Img\n                        img={img}\n                        key={i}\n                        index={i}\n                        addImgFavor={this.props.addImgFavor.bind(this)}\n                        onDeleteImg={this.props.onDeleteImg.bind(this)} \n                        isAdmin={this.props.isAdmin}/>\n                    )}\n                </Masonry>\n            }\n            { this.props.imgs.length === 0 &&\n                <div style={{textAlign: 'center'}}>暂无数据</div>\n            }\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\n// import * as qiniu from 'qiniu-js'\nimport PropTypes from 'prop-types'\nimport { Upload, Form, Input, Select, Modal, Icon } from 'antd';\nimport {uploadImg, publishImgs } from \"../../service/fetch\";\n\nclass PicturesWall extends React.Component {\n    state = {\n        previewVisible: false,\n        previewImage: '',\n        fileList: [],\n    };\n\n    static propTypes = {\n        getUploadList: PropTypes.func,\n    }\n    handleCancel = () => this.setState({ previewVisible: false })\n\n    handlePreview = (file) => {\n        this.setState({\n            previewImage: file.url || file.thumbUrl,\n            previewVisible: true,\n        });\n    }\n    upload(data) {\n        const formData = new FormData();\n        formData.append(data.filename, data.file);\n        const _this = this;\n        this.getImgWH(data.file, function() {\n            uploadImg(formData).then(res => {\n                if (res.data.resCode === 200) {\n                    _this.state.fileList.push({\n                        name: res.data.fileName,\n                        status: 'done',\n                        url: res.data.url,\n                        w: data.file.w,\n                        h: data.file.h\n                    })\n                    _this.state.fileList.forEach((v, i) => {\n                        v.uid = i;\n                    })\n                    _this.setState({\n                        fileList: _this.state.fileList\n                    })\n                    _this.props.getUploadList(_this.state.fileList)\n                } \n            })\n        })\n        // console.log('data====', data);\n    }\n    // handleStart\n    getImgWH(file, cb) {\n        // 获取图片宽高\n        var reader = new FileReader();\n        reader.onload = function (e) {\n            var data = e.target.result;\n            var image = new Image();\n            image.onload = function () {\n                file.w = this.width;\n                file.h = this.height;\n                cb();\n            }\n            image.src= data;\n        }\n        reader.readAsDataURL(file);\n    }\n\n    onUploadRemove = (info) => {\n        let uid = info.uid\n        this.state.fileList.forEach((item, i) => {\n            if(uid === item.uid) {\n                this.state.fileList.splice(i, 1);\n                return false;\n            }\n        })\n        this.setState({\n            fileList: this.state.fileList\n        })\n        this.props.getUploadList(this.state.fileList)\n    }\n\n    handleChange = ({ fileList }) => {\n        console.log('change', fileList);\n    }\n\n    render() {\n        const { previewVisible, previewImage, fileList } = this.state;\n        const uploadButton = (\n            <div>\n                <Icon type=\"plus\" />\n                <div className=\"ant-upload-text\">Upload</div>\n            </div>\n        );\n        return (\n            <div className=\"clearfix\">\n                <Upload\n                    // {...uploadProps}\n                    // action=\"http://localhost:3000/api/imgs/upload\"//\"https://upload.qiniup.com\"\n                    listType=\"picture-card\"\n                    multiple\n                    fileList={fileList}\n                    customRequest={this.upload.bind(this)}\n                    onPreview={this.handlePreview}\n                    onRemove={this.onUploadRemove}\n                    onChange={this.handleChange}\n                >\n                    {fileList.length >= 3 ? null : uploadButton}\n                </Upload>\n                \n                <Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}>\n                    <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n                </Modal>\n            </div>\n        );\n    }\n}\n\nclass UploadImg extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imgList: [],\n        }\n    }\n    static propTypes = {\n        visible: PropTypes.bool,\n        visibleHandler: PropTypes.func,\n        onAddImg: PropTypes.func\n    }\n\n    componentDidMount() {\n    }\n\n    handleOk = (e) => {\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let group = {\n                    imgs: this.state.imgList,\n                    info: this.props.form.getFieldsValue()\n                }\n                publishImgs(group).then(result => {\n                    const { data } = result;\n                    if (data.resCode === 200) {\n                        this.props.visibleHandler(false);\n                        this.setState({\n                            imgList: []\n                        })\n                        this.props.form.resetFields();\n                        data.imglist.forEach(img => {\n                            img.title = group.info.title;\n                            this.props.onAddImg(img)\n                        })\n                    } \n                });\n            }\n        });\n    }\n\n    handleCancel = (e) => {\n        this.props.visibleHandler(false);\n    }\n\n    getUploadList = (list) => {\n        this.setState({ imgList: list });\n        console.log('接受子组件filelist', this.state.imgList);\n        \n    }\n\n    render() {\n        const categorys = ['建筑', '人像', '街拍', '风景', '其他'];\n        const { getFieldDecorator } = this.props.form;\n        const Option = Select.Option;\n        return (\n            <Modal\n                width=\"40%\"\n                title=\"上传照片\"\n                visible={this.props.visible}\n                onOk={this.handleOk}\n                onCancel={this.handleCancel}\n            >\n                <PicturesWall getUploadList={this.getUploadList.bind(this)}/>\n                <Form layout=\"inline\" onSubmit={this.handleOk}>\n                    <Form.Item label=\"类别\">\n                        {getFieldDecorator('category', { \n                            initialValue: categorys[0]\n                        })(\n                            <Select style={{ width: 100 }} onChange={this.handleTypeChange}>\n                                {categorys.map((item, i) => {\n                                    return (<Option key={i} value={item}>{item}</Option>)\n                                })}\n                            </Select>)}\n                    </Form.Item>\n                    <Form.Item label=\"标题\">\n                        {getFieldDecorator('title', {\n                            rules: [{ required: true, message: '请输入照片标题' }],\n                        })(<Input placeholder=\"为这组照片起个名字吧\" />\n                        )}\n                    </Form.Item>\n                </Form>\n            </Modal>\n        );\n    }\n}\n\nexport default Form.create({ name: 'artile-form' })(UploadImg);\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\n\nimport PropTypes from 'prop-types'\nimport { Menu, Dropdown, Icon } from 'antd';\nimport { toast } from \"react-toastify\";\nimport LoginForm from '../containers/loginToast';\nimport { connect } from 'react-redux'\nimport { changeCurNav, changeLoginStatus, changeUserType } from '../reducers/common'\nimport { quit } from \"../service/fetch\";\n\n\nconst articleNavArr = [\n    { text: '所有文章' },\n    {\n        text: '笔记',\n        type: 0\n        // child: ['原创', '分享']\n    },\n    { text: '生活', type: 1 },\n    // { text: '项目', url: '/articles' },\n    { text: 'Tags', url: '/articles/tags' },\n    { text: '摄影', url: '/photograph'},\n]\n\nconst imgNavArr = [\n    {\n        text: '所有照片',\n        // child: ['所有排序', '时间排序']\n    },\n    { text: '建筑' },\n    { text: '人像' },\n    { text: '街拍' },\n    { text: '风景' },\n    { text: '其他' },\n    { text: '博客', url: '/articles'},\n]\n\nclass Header extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            activeIndex: 0,\n            navArr: this.props.type === 0 ? imgNavArr : articleNavArr,\n            showMenu: false,\n            isLargeScreen: true,        // 大屏\n            loginText: '退出',\n        }\n    }\n\n    static propTypes = {\n        type: PropTypes.number,\n        formParentNav: PropTypes.string,\n        handleNavChange: PropTypes.func\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    componentDidMount() {\n        if(document.documentElement.clientWidth <= 960) {\n            this.setState({ isLargeScreen: false })\n        }\n        if(this.context.router.route.location.pathname === '/about') {\n            this.setState({\n                activeIndex: this.state.navArr.length\n            })\n        } else {\n            this.state.navArr.forEach((item, index) => {\n                if (item.text === this.props.formParentNav || item.text === this.props.curNav) {\n                    this.setState({\n                        activeIndex: index\n                    })\n                }\n            })\n        }\n    }\n    \n    navClickHandler = (item, index) => {\n        if(!item.child && !item.url) {\n            let url = '';\n            this.setState({\n                activeIndex: index,\n                showMenu: false,\n            });\n            if(this.props.type !== 0) {\n                url = '/articles';\n                if(item.type !== undefined) {\n                    url += `?type=${item.type}`\n                }\n                this.props.handleNavChange && this.props.handleNavChange(item.type);\n            } else {\n                url = '/photograph';\n                url += `?type=${item.text}`\n                this.props.handleNavChange && this.props.handleNavChange(item.text);\n            }\n            this.context.router.history.push(url);\n            this.props.changeCurNav && this.props.changeCurNav(this.state.navArr[index].text)\n        } else {\n            this.props.changeCurNav('')\n        }\n    }\n\n    clickAbout() {\n        console.log(this.state.navArr.length, this.state.activeIndex)\n        this.setState({\n            activeIndex: this.state.navArr.length,\n            showMenu: false,\n        });\n        this.context.router.history.push('/about');\n    }\n\n    toggleMenu() {\n        this.setState({\n            showMenu: !this.state.showMenu,\n        })\n    }\n    \n    quitHandle() {\n        quit().then(result => {\n            if (result) {\n                this.setState({ isLogined: false })\n                window.sessionStorage.removeItem('user');\n                window.sessionStorage.removeItem('type');\n                this.props.changeLoginStatus(false);\n                this.props.changeUserType(false);\n                this.context.router.history.push(`/`);     \n            }\n        });\n    }\n\n    loginHandle(type) {\n        toast(<LoginForm type={type}/>,{\n            autoClose: false,\n            closeOnClick: false,\n            draggable: false,\n        });\n        this.setState({\n            showMenu: false,\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"page-header\">\n                    { (this.state.isLargeScreen || this.state.showMenu) && \n                    <ul className=\"img-nav-ul\">\n                        <li><Link to='/'><Icon type=\"home\" className=\"index-btn\" /></Link></li>\n                        { this.state.navArr.map((item, i) => {\n                                let content = '';\n                                if(item.child) {\n                                    let menu = (\n                                        <Menu>\n                                            {item.child.map((item1, i) => \n                                                <Menu.Item key={i}>\n                                                    <span>{ item1 }</span>\n                                                </Menu.Item>\n                                                )\n                                            }\n                                        </Menu>\n                                    );\n                                    content = <Dropdown overlay={menu} trigger={['click']}>\n                                                <span onClick={this.navClickHandler.bind(this, item.child, i)}>{ item.text }<Icon type=\"down\" /></span>\n                                            </Dropdown>;\n                                } else if(item.url) {\n                                    content = <Link to={ item.url }>{ item.text }</Link>;\n                                } else {\n                                    content = <span>{ item.text }</span>\n                                }\n                                return <li key={i} onClick={this.navClickHandler.bind(this, item, i)} className={ i === this.state.activeIndex ? 'active' : '' }>{ content }</li>\n                            }\n                        )}\n                        <li onClick={this.clickAbout.bind(this)} className={ this.state.navArr.length === this.state.activeIndex ? 'active' : '' }>关于</li>\n                        <li className=\"to-index-link\">\n                            { this.props.isLogined &&\n                                <span className=\"op-btn\" onClick={this.quitHandle.bind(this)}>退出</span>\n                            }\n                            { !this.props.isLogined && \n                                <span>\n                                    <span className=\"op-btn\" onClick={this.loginHandle.bind(this, 1)}>登录 </span>\n                                    <span className=\"op-btn\" onClick={this.loginHandle.bind(this, 0)}>注册</span>\n                                </span>\n                            }\n                        </li>\n                    </ul>\n                    }\n                    { !this.state.showMenu && \n                    <div>\n                        <Link to='/'><Icon type=\"home\" className=\"index-btn-1\" /></Link>\n                        <span className=\"current-nav\">{ this.props.curNav }</span>\n                    </div>\n                    }\n                    <div className=\"menu-icon\" onClick={this.toggleMenu.bind(this)}>\n                        { !this.state.showMenu && \n                            <span>\n                                <Icon type=\"bars\"/>\n                            </span>\n                            \n                        }\n                        { this.state.showMenu && \n                            <Icon type=\"close\"/>\n                        }\n                    </div>\n                </div>\n                { this.state.showMenu && \n                    <div className=\"nav-mask\"></div>\n                }\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        curNav: state.commonReducer.curNav,\n        isLogined: state.commonReducer.isLogined,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n        changeLoginStatus: (isLogin) => {\n            dispatch(changeLoginStatus(isLogin));\n        },\n        changeUserType: (isAdmin) => {\n            dispatch(changeUserType(isAdmin));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Header)\n\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Spin } from 'antd';\n\nexport default class Loading extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n    }\n\n    static propTypes = {\n        show: PropTypes.bool,\n        loadMore: PropTypes.func,\n    }\n\n    handleClick() {\n        this.props.loadMore()\n    }\n\n    render() {\n        const text = this.props.show ? '正在加载' : '加载更多';\n        return (\n            <div className=\"loading-wrap\">\n            { this.props.show &&\n                <Spin size=\"small\" />\n            }\n                <span onClick={this.handleClick.bind(this)}>{ text } </span>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { initImgs, deleteImg, addImg, addImgFavorCount } from '../../reducers/imgs'\nimport { changeCurNav } from '../../reducers/common'\nimport { Button, BackTop, Spin } from 'antd';\nimport ImgList from '../../components/photograph/ImgList'\nimport UploadImg from '../../components/photograph/UploadImg'\nimport Header from '../../components/Header'\nimport Loading from '../../components/Loading'\nimport '../../css/img.less'\n\nimport { fetchImgs, deleteImgById, addImgFavor } from \"../../service/fetch\";\n\nclass ImgListContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dialogVisible: false,\n            loading: false,\n            showLoading: false,\n            pageNum: 1,\n            noMore: false,  // 是否没有更多了\n        }\n    }\n    componentWillMount() {\n        let otherNav = ['所有照片', '所有文章', '笔记', '生活', 'Tags'];\n        if(!this.props.curNav || otherNav.indexOf(this.props.curNav) >= 0) {\n            this.props.changeCurNav('所有照片')\n            this.loadImgs()\n        } else {\n            this.loadImgs(this.props.curNav)\n        }\n    }\n\n    loadImgs(category = '') {\n        let params = {\n            pageNum: this.state.pageNum,\n            category\n        }\n        \n        if(params.pageNum === 1) {\n            this.setState({ loading: true })\n            this.props.initImgs([], this.state.pageNum);\n        } else {\n            this.setState({ showLoading: true });\n        }\n        return fetchImgs(params).then(result => {\n            const {data} = result;\n            if (data) {\n                this.props.initImgs(data.imgs, this.state.pageNum);\n                this.setState({ \n                    noMore: data.noMore,\n                    showLoading: false,\n                    loading: false\n                })\n            } else {\n                this.setState({ \n                    showLoading: false,\n                    loading: false,\n                    noMore: true\n                });\n            }\n        })\n    }\n\n    loadMore() {\n        this.setState({ pageNum: this.state.pageNum + 1 }, function () {\n            this.loadImgs();\n        })\n    }\n\n    visibleHandler = (flag) => {\n        this.setState({ dialogVisible: flag });\n    }\n\n    handleDeleteImg(e, img, index) {\n        let { src, _id, group_id } = img;\n        src = src.split('/');\n        let imgName = src[src.length - 1];\n        e.stopPropagation();\n        deleteImgById({_id, imgName, group_id}).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.deleteImg(index);\n            } \n        })\n    }\n    handleAddImgFavor(e, imgId, index) {\n        e.stopPropagation();\n        addImgFavor(imgId).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.addImgFavorCount(index);\n            }\n        });\n    }\n\n    handleNavChange(category) {\n        this.setState({ pageNum: 1 })\n        category = (category === '所有照片' ? '' : category);\n        this.loadImgs(category);\n    }\n\n    render () {\n        return (\n            <div>\n                <Header \n                    type={0} \n                    handleNavChange={this.handleNavChange.bind(this)}\n                />\n                {/* <Music/> */}\n                <div className=\"container img-container list-wrap\">\n                    { this.props.isAdmin && \n                    <Button type=\"primary\" className=\"common-btn\" onClick={this.visibleHandler.bind(this, true)}>\n                        上传照片\n                    </Button>\n                    }\n                    <UploadImg \n                        visible={this.state.dialogVisible} \n                        visibleHandler={this.visibleHandler}\n                        onAddImg={this.props.addImg}\n                    />\n                    <Spin spinning={this.state.loading}>\n                        <ImgList\n                            imgs= {this.props.imgs}\n                            addImgFavor={this.handleAddImgFavor.bind(this)}\n                            onDeleteImg= {this.handleDeleteImg.bind(this)}\n                            isAdmin={this.props.isAdmin} \n                        />\n                    </Spin>\n                    { !this.state.noMore && \n                    <Loading \n                        show={this.state.showLoading}\n                        loadMore={this.loadMore.bind(this)}\n                    />\n                    }\n                </div>\n                <BackTop target={() => document.getElementsByClassName('container')[0]}/>\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        imgs: state.imgsReducer.imgs,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initImgs: (imgs, pageNum) => {\n            dispatch(initImgs(imgs, pageNum));\n        },\n        deleteImg: (imgIndex) => {\n            dispatch(deleteImg(imgIndex))\n        },\n        addImg: (img) => {\n            dispatch(addImg(img))\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n        addImgFavorCount: (index) => {\n            dispatch(addImgFavorCount(index));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ImgListContainer)","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Comment, Avatar, Form, Button, List, Input,\n} from 'antd';\n// import moment from 'moment';\n\nconst TextArea = Input.TextArea;\nconst CommentList = ({ comments }) => {\n  let count = comments.length;\n  if(count > 1) {\n    count += comments.reduce((prev, next) => {\n      console.log('prev', prev, next);\n      return (prev.child ? prev.child.length : 0) + (next.child ? next.child.length : 0)\n    }, 0)\n  } else if(comments[0].child) {\n    count += comments[0].child.length\n  }\n  return (<List\n    dataSource={comments}\n    header={`${count} 条评论`}\n    itemLayout=\"horizontal\"\n    renderItem={ props => {\n      return (<Comment {...props} >\n        { props.child && props.child.length && \n          (<List\n            dataSource={props.child}\n            itemLayout=\"horizontal\"\n            renderItem={ props => (\n              <Comment {...props} />\n            )\n          }\n          />)\n        }\n      </Comment>)\n    }\n  }\n  />)\n};\n\nconst Editor = ({\n  onChange, onSubmit, submitting, value, placeholder\n}) => (\n    <div>\n      <Form.Item>\n        <TextArea placeholder={placeholder} rows={4} onChange={onChange} value={value} />\n      </Form.Item>\n      <Form.Item>\n        <Button\n          className=\"common-btn\"\n          htmlType=\"submit\"\n          loading={submitting}\n          onClick={onSubmit}\n          type=\"primary\">\n          评论\n        </Button>\n      </Form.Item>\n    </div>\n  );\nexport default class MyComment extends Component {\n  state = {\n    submitting: false,\n    value: '',  // 评论内容\n    comments: [],\n    placeholder: '输入评论内容...',\n    receiver: null,\n    belongId: '', // 属于哪条初始评论\n  }\n\n  static propTypes = {\n    type: PropTypes.number, // 1: 摄影, 0: 文章\n    onSubmit: PropTypes.func,\n    comments: PropTypes.array,\n    receiver: PropTypes.string   // 默认接受者是作者\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      comments: nextProps.comments\n    })\n  }\n\n  handleSubmit = () => {\n    if (!this.state.value) {\n      return;\n    } else {\n      this.setState({\n        submitting: true,\n      });\n      let params = {\n        type: this.props.type,\n        receiver: this.state.receiver || this.props.receiver,\n        content: this.state.value,\n        belongId: this.state.belongId\n      }\n      this.props.onSubmit(params, (result) => {\n        if (result.data && result.data.comment) {\n          let resComment = result.data.comment;\n          let author = '';\n          if(resComment.sender === this.props.receiver) {\n            author = '作者'\n          } else{\n            author = window.sessionStorage.getItem('user');\n          }\n          let curComment = {\n            author,\n            avatar: resComment.avatar || '',\n            content: this.state.value,\n            created_at: resComment.created_at,\n          }\n          if(params.belongId) {\n            this.state.comments.forEach(item => {\n              if(item._id + '' === params.belongId) {\n                curComment.author += `回复@作者`\n                item.child = [\n                  curComment,\n                  ...item.child\n                ]\n                return false;\n              }\n            })\n            this.setState({\n              submitting: false,\n              value: '',\n              comments: this.state.comments\n            });\n          } else {\n            this.setState({\n              submitting: false,\n              value: '',\n              comments: [\n                curComment,\n                ...this.state.comments,\n              ]\n            });\n          }\n        } else {\n          this.setState({ submitting: false })\n        }\n      });\n    }\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      value: e.target.value,\n    });\n  }\n\n  // 回复评论\n  replay(belongId, sender, senderInfo) {\n    if(this.props.receiver === sender) {\n      senderInfo = '作者';\n    }\n    this.setState({\n      placeholder: `回复${senderInfo} :`,\n      receiver: sender,\n      belongId\n    });\n  }\n\n  // 查找接收用户的名称\n  queryReceiverName(belongId) {\n    let name = '';\n    this.state.comments.forEach(item => {\n      if(item._id === belongId) {\n        name = item.senderInfo;\n        return false;\n      }\n    })\n    return name;\n  }\n\n  // 评论配置\n  configComment(item) {\n    let avatar = '', res;\n    if (item.user && item.user.avatar) {\n      avatar = item.user.avatar;\n    }\n    item.avatar && (avatar = item.avatar);\n    res = {\n      avatar: avatar,\n      content: <p>{item.content}</p>,\n      datetime: item.created_at,\n      child: item.child\n    }\n    // 接收者是自己时显示回复按钮\n    if(item.isReceiver) {\n      res.actions = [ <span onClick={this.replay.bind(this, item.belongId || item._id, item.sender, item.author || item.senderInfo)}>回复</span>]\n    }\n    if(item.sender === this.props.receiver) {\n      res.author = '作者'\n    } else {\n      res.author = item.author || item.senderInfo\n    }\n    if(item.belongId) {\n      let name = this.queryReceiverName(item.belongId);\n      if(name === res.author) {\n        name = '作者';\n      }\n      res.author += `回复@${name}`\n    }\n    return res;\n  }\n\n  render() {\n    const { submitting, value, placeholder } = this.state;\n    const comments = this.state.comments.map(item => {\n      let res = this.configComment(item)\n      if(item.child) {\n        res.child = item.child.map(item1 => {\n          return this.configComment(item1)\n        })\n      }\n      return res;\n    }); \n    \n    return (\n      <div>\n        {comments.length > 0 && <CommentList comments={comments} />}\n        <Comment\n          avatar={(\n            <Avatar src=\"\" alt=\"\" />\n          )}\n          content={(\n            <Editor\n              onChange={this.handleChange}\n              onSubmit={this.handleSubmit}\n              submitting={submitting}\n              value={value}\n              placeholder={placeholder}\n            />\n          )}\n        />\n      </div>\n    );\n  }\n}","import React, { Component } from 'react'\n\nconst musics = ['3940933', '3947469', '428350031', '448917907', '19466001', '29729012', '16649839', '1651735', '21469678', '410925920', \n'425684928', '466333783', '400690256', '19535983', '4405800', '3947469', '4111185', '18861490', '462516170', '417833085'];\nexport default class Home extends Component {\n  render() {\n    return (\n      <div className=\"music-wrap\">\n        <iframe id=\"musicFrame\" title=\"music\" frameBorder=\"no\" border=\"0\" marginWidth=\"0\" marginHeight=\"0\" width=\"200\" height=\"86\"\n         src={`//music.163.com/outchain/player?type=2&id=${musics[Math.floor(Math.random()*musics.length)]}&auto=1&height=66`}>\n        </iframe>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Icon, message, Spin } from 'antd';\nimport { getImgDetail, comment as commentImg, addImgPv, addImgFavor } from \"../../service/fetch\";\nimport MyComment from '../../components/Comment'\nimport Music from '../../components/Music'\n\nclass ImgDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            id: this.props.match.params.id,\n            imgEnlargeble: false,\n            comments: [],\n            img: {},\n            curPage: 0,\n            clickTypeNum: 0,             // 是否可翻页, 0表示可翻页, -1或1表示已经到最底部和最顶部了\n        }\n    }\n\n    static propTypes = {\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    componentWillMount() {\n        this.getImgDetail(this.state.id);\n    }\n\n    getImgDetail(id, typeNum) {\n        this.setState({ loading: true });\n        getImgDetail(id, typeNum).then(result => {\n            const { data } = result;\n            if (data) {\n                if (data.noMore) {\n                    message.warning('已经是最后一张了', 1);\n                    this.setState({ clickTypeNum: typeNum })\n                } else {\n                    this.setState({\n                        img: data.img[0],\n                        id: data.img[0]._id,\n                        clickTypeNum: 0,\n                        comments: data.comment,\n                    })\n                    this.context.router.history.push(`/photograph/detail/${data.img[0]._id}`);\n                    this.handleBrowser();\n                }\n                this.setState({ loading: false });\n            }\n        });\n    }\n\n    // 放大/缩小图片\n    resizeImgHandler = () => {\n        this.setState({ \n            imgEnlargeble : !this.state.imgEnlargeble, \n        });\n    }\n\n    // 发表评论\n    handleSubmit = (comment, cb) => {\n        commentImg(this.state.id, comment).then(result => {\n            if (result) {\n                cb && cb(result);\n            }\n        });\n    }\n\n    handleBrowser() {\n        setTimeout(() => {\n            addImgPv(this.state.id).then(result => {\n                const { data } = result;\n                if (data) {\n                    let img = Object.assign(this.state.img, { pv: (this.state.img.pv || 0)+ 1 })\n                    this.setState({\n                        img: img\n                    });\n                }\n            });\n        }, 2000);\n    }\n    \n    // 上一张or上一张\n    lastOrNextImg = (typeNum) => {\n        this.getImgDetail(this.state.id, typeNum);\n    }\n\n    clickImgFavorHandler() {\n        addImgFavor(this.state.id).then(result => {\n            const { data } = result;\n            if (data) {\n                let img = Object.assign(this.state.img, { likes: (this.state.img.likes || 0) + 1 })\n                this.setState({\n                    img: img\n                });\n            }\n        });\n    }\n\n    // 查看组图\n    toGroupImg = (groupId) => {\n        this.context.router.history.push(`/photograph/group/${groupId}`);\n    }\n\n    goBack() {\n        this.context.router.history.push(`/photograph`);\n    }\n\n    render() {\n        return (\n            <div className=\"img-detail-page\">\n                {/* <Music/> */}\n                <Spin spinning={this.state.loading}>\n                    <div className={[\"img-switch-wraper\", this.state.imgEnlargeble ? 'active' : ''].join(' ')}>\n                        <div className=\"center-box\">\n                            { !this.state.imgEnlargeble &&\n                                // <Link to=\"/photograph\">\n                                    <Icon type=\"close\" className=\"icon close-icon\" onClick={this.goBack.bind(this)}/>\n                                // </Link>\n                            }\n                            <Icon type=\"left\" className=\"icon left-icon\" onClick={this.lastOrNextImg.bind(this, -1)}/>\n                            <img src={this.state.img.src} alt=\"\" />\n                            <Icon type={ this.state.imgEnlargeble ? 'shrink' : 'arrows-alt'} className=\"icon size-icon\" onClick={ this.resizeImgHandler.bind(this) } />\n                            <Icon type=\"right\" className=\"icon right-icon\" onClick={this.lastOrNextImg.bind(this, 1)}/>\n                        </div>\n                    </div>\n                    <div className=\"detail-box\">\n                        <div className=\"operate-box\">\n                            <div>\n                                <Icon className=\"icon heart-icon\" type=\"heart\" onClick={this.clickImgFavorHandler.bind(this)}/> \n                                <span className=\"count-span\">{this.state.img.likes || 0}</span>\n                                <Icon className=\"icon\" type=\"eye\" />\n                                <span className=\"count-span\">{this.state.img.pv || 0}</span>\n                                <Icon type=\"switcher\" className=\"icon collection-icon\" onClick={(e) => { this.toGroupImg(this.state.img.groupId) }}/>\n                            </div>\n                        </div>\n                        <div className=\"comment-wrap\">\n                            <MyComment \n                                type={1}\n                                receiver={this.state.img.author}\n                                comments={this.state.comments} \n                                onSubmit={this.handleSubmit.bind(this)} \n                            />\n                        </div>\n                    </div>\n                </Spin>\n            </div>\n        )\n    }\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        imgs: state.imgs,  // 告诉Connect组件我们需要什么数据\n        curImg: state.curImg\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ImgDetail)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { initImgs, deleteImg, addImg, addImgFavorCount } from '../../reducers/imgs'\nimport PropTypes from 'prop-types'\nimport { changeCurNav } from '../../reducers/common'\nimport ImgList from '../../components/photograph/ImgList'\nimport Header from '../../components/Header'\nimport Music from '../../components/Music'\nimport { Button, Spin } from 'antd';\nimport '../../css/img.less'\n\nimport { fetchGroupImgs, deleteImgById, addImgFavor } from \"../../service/fetch\";\n\nclass ImgListContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            groupId: this.props.match.params.id,\n            groupInfo: {}\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    componentWillMount() {\n        this.loadImgs();\n        if(!this.props.curNav) {\n            this.props.changeCurNav('所有照片')\n        }\n    }\n\n    loadImgs() {\n        this.setState({ loading: true })\n        this.props.initImgs([], 1);\n        return fetchGroupImgs(this.state.groupId).then(result => {\n            const {data} = result;\n            if (data) {\n                this.setState({\n                    groupInfo: data.group.info\n                })\n                this.props.initImgs(data.group.imgs, 1);\n            }\n            this.setState({ loading: false })\n        })\n    }\n\n    handleDeleteImg(e, img, index) {\n        let { src, _id, group_id } = img;\n        src = src.split('/');\n        let imgName = src[src.length - 1];\n        e.stopPropagation();\n        deleteImgById({_id, imgName, group_id}).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.deleteImg(index);\n            } \n        })\n    }\n\n    handleAddImgFavor(e, imgId, index) {\n        e.stopPropagation();\n        addImgFavor(imgId).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.addImgFavorCount(index);\n            }\n        });\n    }\n\n    handleNavChange(category) {\n        this.setState({ pageNum: 1 })\n        category = (category === '所有照片' ? '' : category);\n        this.loadImgs(category);\n    }\n    goBack() {\n        this.context.router.history.push(`/photograph`);\n    }\n\n    render () {\n        return (\n            <div>\n                <Header \n                    type={0} \n                    handleNavChange={this.handleNavChange.bind(this)}\n                />\n                <Music/>\n                <div className=\"container img-container\">\n                    <Spin spinning={this.state.loading}>\n                        <div className=\"group-info\">\n                            <p className=\"title\">{ this.state.groupInfo.title }</p>\n                            <ul className=\"tag-list\">\n                                <li>{ this.state.groupInfo.category }</li>\n                            </ul>\n                            <p className=\"date\">{ this.state.groupInfo.created_at }</p>\n                        </div>\n                        <ImgList\n                            imgs= {this.props.imgs}\n                            addImgFavor={this.handleAddImgFavor.bind(this)}\n                            onDeleteImg= {this.handleDeleteImg.bind(this)}\n                            isAdmin={this.props.isAdmin}\n                        />\n                        <div className=\"group-info\">\n                            <Button onClick={this.goBack.bind(this)}>返 回</Button>\n                        </div>\n                    </Spin>\n                </div>\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        imgs: state.imgsReducer.imgs,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initImgs: (imgs, pageNum) => {\n            dispatch(initImgs(imgs, pageNum));\n        },\n        deleteImg: (imgIndex) => {\n            dispatch(deleteImg(imgIndex))\n        },\n        addImg: (img) => {\n            dispatch(addImg(img))\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n        addImgFavorCount: (index) => {\n            dispatch(addImgFavorCount(index));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ImgListContainer)","import React, { Component } from 'react'\n\nimport PropTypes from 'prop-types'\nimport { Icon } from 'antd';\n\nexport default class Article extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    static propTypes = {\n        article: PropTypes.object,\n        index: PropTypes.number,\n        deleteArticle: PropTypes.func,\n        editArticle: PropTypes.func,\n        viewDetail: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    render() {\n        let article = this.props.article;\n        return (\n            <div className=\"article-wraper\">\n                <div className={[\"cover-box\", (!article.cover_url ? 'no-cover' : '')].join(' ') }>\n                    <img v-if={article.cover_url} src={article.cover_url} alt=\"\"/>\n                </div>\n               <div className=\"info\">\n                    <h3 className=\"title\">\n                        <p onClick={this.props.viewDetail.bind(this, article._id)}>{ article.title }</p>\n                        { this.props.isAdmin &&\n                            <span className=\"operate-btn\">\n                                <Icon type=\"delete\" onClick={this.props.deleteArticle.bind(this, article._id, this.props.index, article.cover_url)}/>\n                                <Icon type=\"edit\" onClick={this.props.editArticle.bind(this, article._id)}/>\n                            </span>\n                        }\n                    </h3>\n                    <p className=\"time\">{ article.created_at }\n                        <span><Icon type=\"message\" className=\"icon\"/>{ article.comments || 0 }</span>\n                        <span><Icon type=\"fire\" className=\"icon\"/>{ article.pv || 0 }</span>\n                    </p>\n                    <div className=\"description\">{ article.description }</div>\n               </div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport Article from '../article/Article'\nimport PropTypes from 'prop-types'\nexport default class ArticleList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n    // 对父组件传入的props数据进行类型检测\n    static propTypes = {\n        articles: PropTypes.array,\n        deleteArticle: PropTypes.func,\n        editArticle: PropTypes.func,\n        viewDetail: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    // 声明变量, 初始化默认值\n    static defaultProps = {\n        articles: [],\n    }\n\n    render() {\n        return (\n            <div>\n                { this.props.articles.length > 0 &&\n                    <div>\n                        {this.props.articles.map((article, i) =>\n                        <Article\n                            article={article}\n                            key={article._id}\n                            index={i} \n                            deleteArticle={this.props.deleteArticle.bind(this)}\n                            editArticle={this.props.editArticle.bind(this)}\n                            viewDetail={this.props.viewDetail.bind(this)}\n                            isAdmin={this.props.isAdmin}\n                            />\n                        )}\n                    </div>\n                }\n                { this.props.articles.length === 0 &&\n                    <div style={{textAlign: 'center'}}>暂无数据</div>\n                }\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport { BackTop, Spin } from 'antd';\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport ArticleList from '../../components/article/ArticleList'\nimport Header from '../../components/Header'\nimport Loading from '../../components/Loading'\nimport { initArticles, deleteArticle } from '../../reducers/articles'\nimport { changeCurNav } from '../../reducers/common'\nimport '../../css/article.less'\n\nimport { fetchArticles, deleteArticleById, getArticlesByTagName } from \"../../service/fetch\";\n\nclass ArticleListContainer extends Component {\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            showLoading: false,\n            pageNum: 1,\n            noMore: true,  // 是否没有更多了\n        }\n    }\n\n    componentWillMount() {\n        let search = this.context.router.route.location.search;\n        let type = search.substring(search.length-1);\n        let tag = this.props.match.params.tag;\n        if(type) {\n            this.loadArticles(type);\n            let curNav = (type === '0' ? '笔记' : '生活');\n            this.props.changeCurNav(curNav)\n        } else {\n            // 按标签获取\n            if(tag) {\n                this.props.getArticlesByTagName(tag);\n            } else {\n                this.loadArticles();\n            }\n            if(!this.props.curNav) {\n                this.props.changeCurNav('所有文章')\n            }\n        }\n    }\n\n    loadArticles(type = '') {\n        let params = {\n            pageNum: this.state.pageNum,\n            type,\n        }\n        this.setState({ showLoading: true });\n        if(params.pageNum === 1) {\n            this.setState({ loading: true })\n            this.props.initArticles([], this.state.pageNum);\n        }\n        fetchArticles(params).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.initArticles(data.articles, this.state.pageNum);\n                this.setState({ showLoading: false });\n                if(data.articles.length === 0) {\n                    this.setState({ noMore: true })\n                } else {\n                    this.setState({ noMore: false })\n                }\n                this.setState({ loading: false })\n            } else {\n                this.setState({ \n                    showLoading: false,\n                    loading: false,\n                    noMore: true\n                });\n            }\n        })\n    }\n\n    loadMore() {\n        this.setState({ pageNum: this.state.pageNum + 1 }, function () {\n            this.loadArticles();\n        })\n    }\n\n    handleNavChange(type) {\n        this.loadArticles(type);\n    }\n\n    onDeleteArticle(articleId, index, url) {\n        let coverName = ''\n        if(url) {\n        url = url.split('/');\n            coverName = url[url.length - 1];\n        }\n        deleteArticleById({articleId, coverName}).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.deleteArticle(index);\n            } \n        })\n    }    \n\n    onEditArticle = (articleId) => {\n        this.context.router.history.push(`/articles/edit/${articleId}`);\n    }\n\n    onViewDetail = (articleId) => {\n        this.context.router.history.push(`/articles/detail/${articleId}`);\n    }\n\n    render () {\n        return (\n            <div>\n                <Header\n                    type={1}\n                    formParentNav=\"所有文章\"\n                    handleNavChange={this.handleNavChange.bind(this)}/>\n                <div className=\"container article-container list-wrap\">\n                    { this.props.isAdmin && \n                    <Link to='/articles/new'>写文章</Link>\n                    }\n                    <Spin spinning={this.state.loading}>\n                        <div>\n                            <ArticleList \n                                articles= {this.props.articles} \n                                deleteArticle={this.onDeleteArticle.bind(this)}\n                                editArticle={this.onEditArticle.bind(this)}\n                                viewDetail={this.onViewDetail.bind(this)}\n                                isAdmin={this.props.isAdmin}\n                            />\n                            { !this.state.noMore &&\n                            <Loading \n                                show={this.state.showLoading}\n                                loadMore={this.loadMore.bind(this)}\n                            />\n                        }\n                        </div>\n                    </Spin>\n                    <BackTop target={() => document.getElementsByClassName('container')[0]}/>\n                </div>\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        articles: state.articlesReducer.articles,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initArticles: (articles, pageNum) => {\n            dispatch(initArticles(articles, pageNum));\n        },\n        getArticlesByTagName: (tag) => {\n            getArticlesByTagName(tag).then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(initArticles(data.articles));\n                } \n            });\n        },\n\n        deleteArticle: (articleId) => {\n            dispatch(deleteArticle(articleId));\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ArticleListContainer)","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Icon, message, Spin } from 'antd';\nimport Header from '../../components/Header'\nimport MyComment from '../../components/Comment'\nimport { getArticleDetail, comment as commentArticle, addArticlePv } from \"../../service/fetch\";\nimport { changeCurNav } from '../../reducers/common'\nimport Highlight from 'react-highlight'\nimport 'highlight.js/styles/hopscotch.css'\n\n// atom-one-dark-reasonable\n// gruvbox-dark\n// hopscotch\n\nclass ArticleDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            id: this.props.match.params.id,\n            comments: [],\n            article: {},\n            curPage: 0,\n            clickTypeNum: 0,             // 是否可翻页, 0表示可翻页, -1或1表示已经到最底部和最顶部了\n            tags: [],\n        }\n    }\n    static propTypes = {\n        artilceId: PropTypes.number,\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    handleBrowser() {\n        setTimeout(() => {\n            addArticlePv(this.state.id).then(result => {\n                const { data } = result;\n                if (data) {\n                    let article = Object.assign(this.state.article, { pv: (this.state.article.pv || 0) + 1 })\n                    this.setState({\n                        article: article\n                    });\n                }\n            });\n        }, 2000);\n    }\n\n    componentWillMount() {\n        this.articleDetail(this.state.id);\n        this.props.changeCurNav('文章详情');\n    }\n\n    // 获取某一篇文章及评论\n    articleDetail(id, typeNum = '') {\n        this.setState({ loading: true });\n        getArticleDetail(id, typeNum).then(result => {\n            const { data } = result;\n            if (data) {\n                if (data.noMore) {\n                    message.warning('已经是最后一篇了', 1);\n                    this.setState({ clickTypeNum: typeNum })\n                } else {\n                    this.setState({\n                        article: data.article[0],\n                        id: data.article[0]._id,\n                        clickTypeNum: 0,\n                        comments: data.comment,\n                        tags: data.tags\n                    })\n                    this.context.router.history.push(`/articles/detail/${data.article[0]._id}`);\n                    this.handleBrowser();\n                }\n            }\n            this.setState({ loading: false });\n        });\n    }\n\n    // 上一篇or上一篇\n    lastOrNextArticle = (typeNum) => {\n        this.articleDetail(this.state.id, typeNum);\n    }\n\n    // 发表评论\n    handleSubmit = (comment, cb) => {\n        commentArticle(this.state.id, comment).then(result => {\n            if (result) {\n                cb && cb(result);\n            }\n        });\n    }\n    // 返回列表页\n    backListPage = () => {\n        this.props.changeCurNav('')\n    }\n\n    render() {\n        let date;\n        if (this.state.article.created_at) {\n            date = this.state.article.created_at.replace(/-/g, '.');\n        }\n        return (\n            <div>\n                <Header type={1} />\n                <div className=\"container article-detail-container\">\n                    <Spin spinning={this.state.loading}>\n                    <div className=\"left\">\n                        <Link to=\"/articles\" onClick={this.backListPage.bind(this)}><Icon type=\"left\" className=\"back-btn\" /></Link>\n                        <div className=\"top-info-box\">\n                            <h2>{this.state.article.title}</h2>\n                            <div className=\"top-bottom\">\n                                <span>{date} Beijing</span>\n                                <span className=\"browse-num\"><Icon type=\"fire\" className=\"fire-icon\" />{this.state.article.pv || 0}</span>\n                                \n                            </div>\n                        </div>\n                        <div className=\"left-bottom-box\">\n                            <ul className=\"tag-list\">\n                                {this.state.tags && this.state.tags.map(item => {\n                                    return (<li key={item._id}>{item.name}</li>)\n                                })}\n                            </ul>\n                            {this.state.article.description}\n                        </div>\n                        <div className=\"control-box\">\n                            <span onClick={this.lastOrNextArticle.bind(this, -1)}>上一篇</span>\n                            <span onClick={this.lastOrNextArticle.bind(this, 1)}>下一篇</span>\n                        </div>\n                    </div>\n                        <div className=\"right\">\n                            <Highlight className='language-name-of-snippet' innerHTML={true}>\n                                {this.state.article.content}\n                            </Highlight>\n                            {/* <div dangerouslySetInnerHTML={{ __html: this.state.article.content }}></div> */}\n                            <MyComment \n                                type={0}\n                                receiver={this.state.article.author}\n                                comments={this.state.comments} \n                                onSubmit={this.handleSubmit.bind(this)} \n                            />\n                        </div>\n                    </Spin>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        curArticle: state.articlesReducer.curArticle,\n        articles: state.articlesReducer.articles,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ArticleDetail)\n\n","import React from 'react'\nimport { Form, Input, Icon, Upload, Select, Col, Row } from 'antd';\nimport PropTypes from 'prop-types'\n\n// 输入表单组件\nclass ArticleForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedTags: [],\n            loading: false, // 上传封面loading\n            coverUrl: '',   // 封面url\n            coverName: '',  // 封面名称\n        }\n    }\n    static propTypes = {\n        article: PropTypes.object,\n        onRef: PropTypes.func,\n        uploadCover: PropTypes.func\n    }\n    componentDidMount() {\n        this.props.onRef(this);\n        this.props.form.setFieldsValue({ type: 0 })\n        \n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.article && !this.props.article) {\n            this.initForm(nextProps.article)\n        }\n    }\n\n    initForm(article) {\n        let { type, title, description } = article;\n        let option = {\n            type,\n            title,\n            description,\n        }\n        this.setState({\n            coverUrl: article.cover_url,\n            selectedTags: article.tags.map(item => {\n                return item.name\n            })\n        })\n        this.props.form.setFieldsValue(option);\n\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n            }\n        });\n    }\n\n    handleTagChange(value) {\n        this.setState({ selectedTags: value })\n    }\n\n    onUploadCover(data) {\n        this.setState({ loading: true });\n        this.props.uploadCover(data, (res) => {\n            if(res.data.resCode === 200) {\n                this.setState({\n                    coverUrl: res.data.url,\n                    loading: false,\n                    coverName: res.data.fileName\n                })\n            }\n        })\n    }\n\n    getFormData = () => {\n        let res;\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n                res = Object.assign(\n                    { \n                        tags: this.state.selectedTags,\n                        coverName: this.state.coverName,\n                        coverUrl: this.state.coverUrl\n                    }, \n                    this.props.form.getFieldsValue()\n                );\n            }\n        });\n        return res;\n    }\n\n    render() {\n        const uploadButton = (\n            <div>\n                <Icon type={this.state.loading ? 'loading' : 'plus'} />\n                <div className=\"ant-upload-text\">文章封面</div>\n            </div>\n        );\n        const Option = Select.Option;\n        const { getFieldDecorator } = this.props.form;\n        const selects = [];\n        if (this.props.allTags) {\n            for (let i = 0; i < this.props.allTags.length; i++) {\n                selects.push(<Option key={this.props.allTags[i].name}>{this.props.allTags[i].name}</Option>);\n            }\n        }\n\n        return (\n            <Form onSubmit={this.handleSubmit} className=\"artile-form\">\n                <Row>\n                    <Col span={4} >\n                        <Form.Item>\n                            {getFieldDecorator('type')(\n                                <Select style={{ width: 100 }}>\n                                    <Option value={0}>笔记</Option>\n                                    <Option value={1}>生活</Option>\n                                </Select>)}\n                        </Form.Item>\n                    </Col>\n                    <Col span={20} >\n                        <Form.Item>\n                            {getFieldDecorator('title', {\n                                rules: [{ required: true, message: '请输入文章标题' }],\n                            })(\n                                <Input placeholder=\"文章标题\" />\n                            )}\n                        </Form.Item>\n                    </Col>\n                </Row>\n                <Form.Item>\n                    {getFieldDecorator('description', {\n                        rules: [{ required: true, message: '请输入文章描述' }],\n                    })(\n                        <Input placeholder=\"描述下文章吧\" />\n                    )}\n                </Form.Item>\n                <Form.Item>\n                    <Row>\n                        <Col span={18} >\n                            <Select\n                                mode=\"tags\"\n                                placeholder='选择标签'\n                                value={this.state.selectedTags}\n                                onChange={this.handleTagChange.bind(this)}\n                                style={{ width: '100%' }}\n                            >\n                                {selects}\n                            </Select>\n                        </Col>\n                        <Col span={2} ></Col>\n                        <Col span={2} >\n                        <Upload\n                            listType=\"picture-card\"\n                            className=\"cover-uploader\"\n                            customRequest={this.onUploadCover.bind(this)}\n                            showUploadList={false}\n                        >\n                            {this.state.coverUrl ? <img src={this.state.coverUrl} alt=\"cover\" /> : uploadButton}\n                        </Upload>\n                        </Col>\n                    </Row>\n                </Form.Item>\n            </Form>\n        );\n    }\n}\n\nexport default Form.create({ name: 'artile-form' })(ArticleForm);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport E from 'wangeditor';\n// import ReactMarkdown from 'react-markdown'\n// import Divider from 'antd';\n\nexport default class EditContent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            editorContent: '',\n            // editorContent: `\n            // This block of Markdown contains <a href=\"https://en.wikipedia.org/wiki/HTML\">HTML</a>, and will require the <code>html-parser</code> AST plugin to be loaded, in addition to setting the <code class=\"prop\">escapeHtml</code> property to false.\n            // `\n        };\n    }\n\n    static propTypes = {\n        article: PropTypes.object,\n        onRef: PropTypes.func\n    }\n\n    componentDidMount() {\n        this.props.onRef(this)\n        const elem = this.refs.editorElem;\n        this.editor = new E(elem);\n        this.editor.customConfig.uploadImgShowBase64 = true\n        // 使用 onchange 函数监听内容的变化，并实时更新到 state 中\n        this.editor.customConfig.onchange = html => {\n            this.setState({\n                editorContent: html\n            })\n        }\n        this.editor.create();\n    }\n    \n    componentWillReceiveProps(nextProps) {\n        if(nextProps.article && !this.props.article) {\n            this.setState({\n                editorContent: nextProps.article.content\n            })\n            this.editor.txt.html(nextProps.article.content);\n        }\n    }\n\n    getContent() {\n        return { content: this.state.editorContent };\n    }\n    \n    render() {\n        return (\n            // <ReactMarkdown className=\"edit-wrapper\" source={this.state.editorContent} />\n            <div ref=\"editorElem\" className=\"edit-wrapper\">\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Header from '../../components/Header'\nimport { setCurArticle, initTags } from '../../reducers/articles'\nimport '../../css/article.less'\nimport { Button } from 'antd';\nimport { getArticleDetail, createArticle, updateArticleById, getTags, uploadImg } from \"../../service/fetch\";\nimport EditForm from '../../components/article/EditForm'\nimport EditContent from '../../components/article/EditContent'\n\nclass EditArticleContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            articleId: this.props.match.params.id,\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    async componentDidMount() {\n        if (this.state.articleId) {\n            await this.props.articleDetail(this.state.articleId);\n        }\n        this.props.initTags();\n    }\n\n    componentWillUnmount() {\n        this.props.resetCurArticle();\n    }\n\n    uploadCover(data, cb) {\n        const formData = new FormData();\n        formData.append(data.filename, data.file);\n        uploadImg(formData).then(res => {\n            if (res.data.resCode === 200) {\n                cb && cb(res)\n                \n            }\n        })\n    }\n\n    // 保存文章 id存在时为编辑状态\n    saveArticleHandler() {\n        let formData = this.form.getFormData();\n        if(!formData) {\n            return;\n        }\n        formData = Object.assign(this.child.getContent(), formData);\n        if (this.state.articleId) {\n            // console.log('编辑====: ', formData);\n            updateArticleById(this.state.articleId, formData).then(result => {\n                const { data } = result;\n                if (data) {\n                    this.context.router.history.push(`/articles`);\n                }\n            });\n        } else {\n            // console.log('新建====: ', formData);\n            createArticle(formData).then(result => {\n                const { data } = result;\n                if (data) {\n                    this.context.router.history.push(`/articles`);\n                }\n            });\n        }\n    }\n\n    onRef = (ref) => {\n        this.child = ref;\n    }\n\n    render() {\n        return (\n            <div>\n                <Header type={1} />\n                <div className=\"container edit-container\">\n                    <EditForm\n                        wrappedComponentRef={(form) => this.form = form}\n                        article={this.props.curArticle}\n                        allTags={this.props.tags}\n                        onRef={this.onRef}\n                        uploadCover={this.uploadCover}\n                    />\n                    <EditContent\n                        onRef={this.onRef}\n                        article={this.props.curArticle}\n                    />\n                    <Button type=\"primary\" className=\"common-btn operate-btn\" onClick={this.saveArticleHandler.bind(this)}>\n                        发布\n                    </Button>\n                    <Button className=\"operate-btn\"><Link to=\"/articles\">取消</Link></Button>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        curArticle: state.articlesReducer.curArticle,\n        tags: state.articlesReducer.tags,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initTags: () => {\n            getTags().then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(initTags(data.tags));\n                }\n            });\n        },\n        articleDetail(id, typeNum = '') {\n            return getArticleDetail(id, typeNum).then(result => {\n                const { data } = result;\n                if (data) {\n                    let obj = Object.assign({ tags: data.tags }, data.article[0])\n                    dispatch(setCurArticle(obj));\n                }\n            });\n        },\n        resetCurArticle() {\n            dispatch(setCurArticle(null));\n        }\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(EditArticleContainer)","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n    Tag, Input, Icon,\n} from 'antd';\nimport { TweenOneGroup } from 'rc-tween-one';\n\nexport default class EditTag extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            inputVisible: false,\n            inputValue: '',\n        }\n    }\n    \n    static propTypes = {\n        tags: PropTypes.array,\n        initTags: PropTypes.func,\n        addTag: PropTypes.func,\n        deleteTag: PropTypes.func,\n        isAdmin: PropTypes.bool,\n        clickTagHandler: PropTypes.func\n    };\n\n    handleClose = (removedTag) => {\n        // const tags = this.props.tags.filter(tag => tag !== removedTag);\n        let tagIndex = 0;\n        try {\n            this.props.tags.forEach((item, index) => {\n                if(item._id === removedTag._id) {\n                    tagIndex = index;\n                    return false;\n                }\n            })\n        } catch(e) {\n            throw new Error('current deleted tag_id is not exist');\n        }\n        this.props.deleteTag(removedTag._id, tagIndex);\n        // this.setState({ tags });\n    }\n\n    showInput = () => {\n        this.setState({ inputVisible: true }, () => this.input.focus());\n    }\n\n    handleInputChange = (e) => {\n        this.setState({ inputValue: e.target.value });\n    }\n\n    clickTagHandler(tag) {\n        this.props.clickTagHandler(tag);\n    }\n\n    handleInputConfirm = () => {\n        const { inputValue } = this.state;\n        this.props.addTag(inputValue);\n        this.setState({\n            inputVisible: false,\n            inputValue: '',\n        });\n    }\n\n    saveInputRef = input => this.input = input\n\n    forMap = (tag) => {\n        const tagElem = (\n            <Tag\n                closable={this.props.isAdmin ? true : false}\n                onClose={(e) => {\n                    e.preventDefault();\n                    this.handleClose(tag);\n                }}\n            >\n                <span onClick={this.clickTagHandler.bind(this, tag.name)}>{tag.name}</span>\n            </Tag>\n        );\n        return (\n            <span key={tag._id} style={{ display: 'inline-block' }}>\n                {tagElem}\n            </span>\n        );\n    }\n\n    render() {\n        const { inputVisible, inputValue } = this.state;\n        let tags = this.props.tags || [];\n        \n        const tagChild = tags.map(this.forMap);\n        return (\n            <div>\n                <div style={{ marginBottom: 16 }}>\n                    <TweenOneGroup\n                        enter={{\n                            scale: 0.8, opacity: 0, type: 'from', duration: 100,\n                            onComplete: (e) => {\n                                e.target.style = '';\n                            },\n                        }}\n                        leave={{ opacity: 0, width: 0, scale: 0, duration: 200 }}\n                        appear={false}\n                    >\n                        {tagChild}\n                    </TweenOneGroup>\n                </div>\n                {inputVisible && (\n                    <Input\n                        ref={this.saveInputRef}\n                        type=\"text\"\n                        size=\"small\"\n                        style={{ width: 78 }}\n                        value={inputValue}\n                        onChange={this.handleInputChange}\n                        onBlur={this.handleInputConfirm}\n                        onPressEnter={this.handleInputConfirm}\n                    />\n                )}\n                {!inputVisible && this.props.isAdmin && (\n                    <Tag\n                        onClick={this.showInput}\n                        style={{ background: '#fff', borderStyle: 'dashed' }}>\n                        <Icon type=\"plus\" /> New Tag\n                    </Tag>\n                )}\n            </div>\n        );\n    }\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Header from '../../components/Header'\nimport EditTag from '../../components/article/editTag'\nimport { createTag, removeTag, getTags } from '../../service/fetch'\nimport { addTag, deleteTag, initTags } from '../../reducers/articles'\nimport { changeCurNav } from '../../reducers/common'\nimport '../../css/article.less'\n\nclass Tags extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n    \n    componentWillMount() {\n        this.props.initTags();      \n        setTimeout(() => {\n            this.props.changeCurNav('Tags')\n        }, 0)  \n    }\n\n    clickTagHandler(tag) {\n        this.context.router.history.push(`/articles/tags/${tag}`);\n    }\n    \n    render() {\n        \n        return (\n            <div>\n                <Header type={1} formParentNav=\"Tags\"/>\n                <div className=\"container article-container\">\n                    <EditTag\n                        isAdmin={this.props.isAdmin}\n                        tags={this.props.tags}\n                        initTags={this.props.initTags}\n                        addTag={this.props.addTag}\n                        deleteTag={this.props.deleteTag}\n                        clickTagHandler={this.clickTagHandler.bind(this)}\n                    />\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        tags: state.articlesReducer.tags,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initTags: () => {\n            getTags().then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(initTags(data.tags));\n                } \n            });\n        },\n        deleteTag: (tagId, tagIndex) => {\n            removeTag({tagId: tagId}).then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(deleteTag(tagIndex));\n                } \n            });\n        },\n        addTag: (tag) => {\n            createTag({name: tag}).then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(addTag(data.res));\n                } \n            });\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Tags)\n","import React, { Component } from 'react'\nimport { Icon } from 'antd';\nimport Header from '../components/Header'\nimport { connect } from 'react-redux'\nimport { changeCurNav } from '../reducers/common'\nclass Footer extends Component {\ncomponentWillMount() {\n    setTimeout(() => {\n        this.props.changeCurNav('关于')\n    }, 0)  \n}\n  render() {\n    return (\n        <div>\n            <Header />\n            <div className=\"container\">\n                <div className=\"about-me\">\n                    <img className=\"avator\" alt=\"\" src={require('../static/img/avator.jpeg')} />\n                    <div>\n                        <p>麻烦让我一夜暴富 实在不行的话 半个月也行 一年也可以</p>\n                        <p><a target=\"blank\" href=\"https://github.com/HuangChuFeng\"><Icon type=\"github\" /> <span>github</span></a>&nbsp;&nbsp;&nbsp;&nbsp;\n                        <a target=\"blank\" href=\"https://weibo.com/5454891945/profile\"><Icon type=\"weibo-circle\" /> <span>__cranky</span></a></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n    return {\n        curNav: state.commonReducer.curNav,\n    }\n}\n  \nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Footer)","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport Home from './containers/Home'\nimport reducer from './reducers/index'\nimport 'lib-flexible'\nimport './index.less'\n\nimport ImgList from './containers/photograph/ImgList'\nimport ImgDetail from './containers/photograph/ImgDetail'\nimport Group from './containers/photograph/Group'\nimport ArticleList from './containers/article/ArticleList'\nimport ArticleDetail from './containers/article/ArticleDetail'\nimport EditArticle from './containers/article/EditArticle'\nimport ArticlesTags from './containers/article/Tags'\nimport Music from './components/Music'\nimport About from './components/About'\n\nimport {BrowserRouter as Router, Route } from 'react-router-dom';\nimport { ToastContainer } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\n\n// createStore 函数专门生产state和dispatch的集合， 调用后返回state和dispatch\nconst store = createStore(reducer);\nconsole.log('NODE_ENV', process.env.NODE_ENV);\n\nReactDOM.render(\n  <Provider store={store}>\n    <div>\n      <Music />\n      <Router>\n        <div>\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/about\" component={About} />\n          <Route exact path=\"/photograph\" component={ImgList} />\n          <Route exact path=\"/photograph/detail/:id\" component={ImgDetail} />\n          <Route exact path=\"/photograph/group/:id\" component={Group} />\n          <Route exact path=\"/articles\" component={ArticleList} />\n          <Route exact path=\"/articles/detail/:id\" component={ArticleDetail} />\n          <Route exact path=\"/articles/new\" component={EditArticle} />\n          <Route exact path=\"/articles/edit/:id\" component={EditArticle} />\n          <Route exact path=\"/articles/tags\" component={ArticlesTags} />\n          <Route exact path=\"/articles/tags/:tag\" component={ArticleList} />\n          <ToastContainer />\n        </div>\n      </Router>\n    </div>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}