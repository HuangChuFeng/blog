{"version":3,"sources":["static/img sync /^/img.*/.jpg$","static/img/img1.jpg","static/img/img10.jpg","static/img/img11.jpg","static/img/img12.jpg","static/img/img13.jpg","static/img/img14.jpg","static/img/img15.jpg","static/img/img16.jpg","static/img/img17.jpg","static/img/img2.jpg","static/img/img3.jpg","static/img/img4.jpg","static/img/img5.jpg","static/img/img6.jpg","static/img/img7.jpg","static/img/img8.jpg","static/img/img9.jpg","static/img/avator.jpeg","reducers/common.js","containers/loginToast.js","util/post.js","service/fetch.js","containers/Home.js","reducers/imgs.js","reducers/articles.js","reducers/index.js","components/photograph/Img.js","components/photograph/ImgList.js","components/photograph/UploadImg.js","components/Header.js","components/Loading.js","containers/photograph/ImgList.js","components/Comment.js","containers/photograph/ImgDetail.js","components/Music.js","containers/photograph/Group.js","components/article/Article.js","components/article/ArticleList.js","containers/article/ArticleList.js","containers/article/ArticleDetail.js","components/article/EditForm.js","components/article/EditContent.js","containers/article/EditArticle.js","components/article/editTag.js","containers/article/Tags.js","components/About.js","index.js"],"names":["map","./img1.jpg","./img10.jpg","./img11.jpg","./img12.jpg","./img13.jpg","./img14.jpg","./img15.jpg","./img16.jpg","./img17.jpg","./img2.jpg","./img3.jpg","./img4.jpg","./img5.jpg","./img6.jpg","./img7.jpg","./img8.jpg","./img9.jpg","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","p","changeCurNav","nav","type","changeLoginStatus","isLogined","changeUserType","isAdmin","LoginForm","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleSubmit","preventDefault","form","validateFields","err","values","register","then","result","handleResult","login","state","btnText","setState","data","console","log","window","sessionStorage","setItem","user","concat","source","name","toast","dismiss","getFieldDecorator","react_default","a","createElement","es_form","onSubmit","className","Item","label","rules","required","message","input","placeholder","es_button","htmlType","React","Component","loginToast","Form","create","connect","commonReducer","dispatch","isLogin","setLikes","likes","get","_ref","asyncToGenerator","regenerator_default","mark","_callee","url","wrap","_context","prev","next","fetch","method","headers","Accept","Content-Type","credentials","sent","json","resCode","error","position","POSITION","TOP_RIGHT","abrupt","t0","stop","_x","apply","arguments","post","_ref2","_callee2","body","_context2","JSON","stringify","containers_loginToast","autoClose","closeOnClick","draggable","_x2","_x3","formPost","_ref3","_callee3","formData","_context3","_x4","_x5","DEV_URL","publishImgs","group","uploadImg","deleteImgById","params","_id","imgName","group_id","addImgFavor","getArticleDetail","typeNum","comment","getTags","Link","Anchor","Home","bgHeight","height","document","documentElement","clientHeight","screenChange","nextProps","nextState","someData","_this2","addEventListener","_this3","text","item","i","imgStyle","backgroundImage","require","Math","floor","random","backgroundSize","key","style","to","es_anchor","Home_Link","href","title","initImgs","imgs","pageNum","addImg","img","deleteImg","imgIndex","addImgFavorCount","index","likeType","initArticles","articles","setCurArticle","article","initTags","tags","reducer","combineReducers","imgsReducer","action","curImg","objectSpread","toConsumableArray","slice","forEach","push","count","articlesReducer","curArticle","articleIndex","cur","tag","tagIndex","changeMusic","location","pathname","curNav","Boolean","getItem","bgColors","Img","toImgDetailPage","context","router","history","toGroupImg","groupId","stopPropagation","imgBoxStyle","background","length","showGroupBtn","onResizeHandler","indexOf","onresize","resizeThrottle","bind","refs","imgBox","clientWidth","h","w","fn","wait","immediate","timer","args","setTimeout","onClick","ref","src","alt","icon","onDeleteImg","contextTypes","PropTypes","object","isRequired","ImgList","react_masonry_component_lib_default","disableImagesLoaded","updateOnEachImageLoad","options","transitionDuration","Img_Img","textAlign","defaultProps","PicturesWall","previewVisible","previewImage","fileList","handleCancel","handlePreview","file","thumbUrl","onUploadRemove","info","uid","splice","getUploadList","handleChange","FormData","append","filename","getImgWH","res","fileName","status","v","cb","reader","FileReader","onload","target","image","Image","width","readAsDataURL","_this$state","uploadButton","es_upload","listType","multiple","customRequest","upload","onPreview","onRemove","onChange","modal","visible","footer","onCancel","UploadImg","handleOk","imgList","getFieldsValue","visibleHandler","resetFields","imglist","onAddImg","list","categorys","Option","Select","onOk","UploadImg_PicturesWall","layout","initialValue","es_select","handleTypeChange","value","articleNavArr","imgNavArr","Header","navClickHandler","child","activeIndex","showMenu","undefined","handleNavChange","navArr","isLargeScreen","loginText","route","formParentNav","removeItem","_this4","content","menu","es_menu","item1","dropdown","overlay","trigger","clickAbout","quitHandle","loginHandle","toggleMenu","Loading","loadMore","show","spin","size","handleClick","ImgListContainer","flag","dialogVisible","loading","showLoading","pageSize","noMore","loadImgs","category","fetchImgs","allCount","split","imgId","components_Header","photograph_UploadImg","spinning","ImgList_ImgList","handleAddImgFavor","handleDeleteImg","Loading_Loading","back_top","getElementsByClassName","TextArea","Input","CommentList","comments","reduce","dataSource","header","itemLayout","renderItem","es_comment","MyComment","submitting","receiver","textArea","belongId","resComment","curComment","author","sender","avatar","created_at","handleBlur","senderInfo","focus","datetime","isReceiver","actions","replay","queryReceiverName","configComment","Comment_CommentList","es_avatar","rows","onBlur","ImgDetail","resizeImgHandler","imgEnlargeble","commentImg","lastOrNextImg","getImgDetail","match","curPage","clickTypeNum","warning","handleBrowser","num","assign","pv","_this5","join","goBack","clickImgFavorHandler","Comment_MyComment","musics","Music","frameBorder","border","marginWidth","marginHeight","groupInfo","components_Music","Article","cover_url","v-if","viewDetail","deleteArticle","editArticle","description","ArticleList","Article_Article","ArticleListContainer","onEditArticle","articleId","onViewDetail","search","substring","loadArticles","getArticlesByTagName","fetchArticles","coverName","ArticleList_ArticleList","onDeleteArticle","ArticleDetail","lastOrNextArticle","articleDetail","commentArticle","backListPage","date","replace","clickArticleFavorHandler","react_highlight_default","innerHTML","ArticleForm","getFormData","selectedTags","coverUrl","onRef","setFieldsValue","initForm","option","uploadCover","selects","allTags","row","col","span","mode","handleTagChange","onUploadCover","showUploadList","EditContent","editorContent","elem","editorElem","editor","E","customConfig","uploadImgShowBase64","onchange","html","txt","EditArticleContainer","resetCurArticle","getContent","createArticle","EditForm","wrappedComponentRef","EditContent_EditContent","saveArticleHandler","obj","EditTag","handleClose","removedTag","deleteTag","showInput","inputVisible","handleInputChange","inputValue","handleInputConfirm","addTag","saveInputRef","forMap","tagElem","es_tag","closable","onClose","clickTagHandler","assertThisInitialized","display","tagChild","marginBottom","rc_tween_one_es","enter","scale","opacity","duration","onComplete","leave","appear","onPressEnter","borderStyle","Tags","editTag_EditTag","tagId","createTag","Footer","changeShowMusic","changeSong","store","createStore","process","ReactDOM","render","es","BrowserRouter","Route","exact","path","component","About","Group","EditArticle","ArticlesTags","lib","getElementById"],"mappings":"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","file":"static/js/main.77f4c900.chunk.js","sourcesContent":["var map = {\n\t\"./img1.jpg\": 340,\n\t\"./img10.jpg\": 341,\n\t\"./img11.jpg\": 342,\n\t\"./img12.jpg\": 343,\n\t\"./img13.jpg\": 344,\n\t\"./img14.jpg\": 345,\n\t\"./img15.jpg\": 346,\n\t\"./img16.jpg\": 347,\n\t\"./img17.jpg\": 348,\n\t\"./img2.jpg\": 349,\n\t\"./img3.jpg\": 350,\n\t\"./img4.jpg\": 351,\n\t\"./img5.jpg\": 352,\n\t\"./img6.jpg\": 353,\n\t\"./img7.jpg\": 354,\n\t\"./img8.jpg\": 355,\n\t\"./img9.jpg\": 356\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 339;","module.exports = __webpack_public_path__ + \"static/media/img1.3351d8f8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img10.39e739c8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img11.e2702cdd.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img12.88a76fdb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img13.366199ec.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img14.8585d4a4.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img15.9a5b0b40.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img16.331a8661.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img17.8b7b57fc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img2.5f0110bf.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img3.fad77519.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img4.32cf8853.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img5.1a6f3ceb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img6.dadad061.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img7.1c35e8bb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img8.7f8bb6f5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img9.1bcce4d0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avator.8bf53cd0.jpeg\";","const CHANGE_CUR_NAV = 'CHANGE_CUR_NAV'\nconst CHANGE_LOGIN_STATUS = 'CHANGE_LOGIN_STATUS'\nconst CHANGE_USER_TYPE = 'CHANGE_USER_TYPE'\nconst CHANGE_SHOW_MUSIC = 'CHANGE_SHOW_MUSIC'\nconst SET_LIKES = 'SET_LIKES'\n\nexport default function(state, action) {\n    if(!state) {\n        // 初始化\n        state = { \n            likes: [],  // 用户likes\n            changeMusic: window.location.pathname === '/about',       // 是否显示音乐模块\n            curNav: '',             // 当前header选中标签\n            isLogined: Boolean(window.sessionStorage.getItem('user')),         // 是否登录\n            isAdmin: window.sessionStorage.getItem('type') === '1',    // 是否是管理员 \n        }; \n    }\n\n    switch (action.type) {\n        case CHANGE_CUR_NAV: \n            return {\n                ...state,\n                curNav: action.nav\n            }\n        \n        case CHANGE_LOGIN_STATUS:\n            return {\n                ...state,\n                isLogined: action.isLogined\n            }\n        \n        case CHANGE_USER_TYPE:\n            console.log('isAdmin', action.isAdmin);\n            return {\n                ...state,\n                isAdmin: action.isAdmin\n            }\n        \n        case CHANGE_SHOW_MUSIC: \n            return {\n                ...state,\n                changeMusic: action.changeMusic\n            }\n            \n        case SET_LIKES: \n            return {\n                ...state,\n                likes: action.likes\n            }\n\n        default: \n            return state;\n    }\n}\nexport const changeCurNav = (nav) => {\n    return { type: CHANGE_CUR_NAV, nav }\n}\n\nexport const changeLoginStatus = (isLogined) => {\n    return { type: CHANGE_LOGIN_STATUS, isLogined }\n}\n\nexport const changeUserType = (isAdmin) => {\n    return { type: CHANGE_USER_TYPE, isAdmin }\n}\n\nexport const changeShowMusic = (changeMusic) => {\n    return { type: CHANGE_SHOW_MUSIC, changeMusic }\n}\n\nexport const setLikes = (likes) => {\n    return { type: SET_LIKES, likes }\n}\n\n\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, Input, Button } from 'antd';\nimport { toast } from \"react-toastify\";\nimport { login, register } from \"../service/fetch\";\nimport { connect } from 'react-redux'\nimport { changeLoginStatus, changeUserType, setLikes } from '../reducers/common'\n\nclass LoginForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            btnText: '注册',\n        }\n    }\n    static propTypes = {\n        type: PropTypes.number, // 0 注册, 1 登录\n    }\n    componentDidMount() {\n        this.setState({\n            btnText: this.props.type === 0 ? '注 册' : '登 录'\n        })\n    }\n\n    handleResult(result) {\n        const { data } = result;\n        console.log('data===', data);\n        \n        if (data) {\n            window.sessionStorage.setItem('type', data.user.type);\n            window.sessionStorage.setItem('user', `来自${data.user.source}的${data.user.name}`);\n            toast.dismiss();\n            this.props.changeLoginStatus(true); \n            this.props.changeUserType(data.user.type === 1);\n        }\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                if(this.props.type === 0) {\n                    register(values).then(result => {\n                        this.handleResult(result);\n                    });\n                } else {\n                    login(values).then(result => {\n                        this.handleResult(result);\n                    });\n                }\n            }\n        });\n    }\n\n    render() {\n        const { getFieldDecorator } = this.props.form;\n        return (\n            <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                { this.props.type === 0 && \n                    <div>\n                        <Form.Item label=\"一个来自\">\n                        {getFieldDecorator('source', {\n                            rules: [{ required: true, message: '我要知道你从哪里来啊朋友' }],\n                        })(\n                            <Input placeholder=\"社交平台\" />\n                        )}\n                    </Form.Item>\n                    <Form.Item label=\"的\">\n                        {getFieldDecorator('name', {\n                            rules: [{ required: true, message: '我要知道你的名字啊朋友' }],\n                        })(\n                            <Input placeholder=\"小可爱\" />\n                        )}\n                </Form.Item>        \n                    </div>\n                }\n                <Form.Item label=\"邮箱\">\n                    {getFieldDecorator('email', {\n                        rules: [{ required: true, message: '输入邮箱' }],\n                    })(\n                        <Input placeholder=\"邮箱(接收评论回复)\" />\n                    )}\n                </Form.Item>\n                <Form.Item label=\"密码\">\n                    {getFieldDecorator('password', {\n                        rules: [{ required: true, message: '输入密码' }],\n                    })(\n                        <Input type=\"password\" placeholder=\"密码\" />\n                    )}\n                </Form.Item>\n                <Form.Item>\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">{ this.state.btnText }</Button>\n                </Form.Item>\n            </Form>\n        );\n    }\n}\n\nconst loginToast = Form.create({ name: 'normal_login' })(LoginForm);\n\nconst mapStateToProps = (state) => {\n    return {\n        isLogined: state.commonReducer.isLogined,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeLoginStatus: (isLogin) => {\n            dispatch(changeLoginStatus(isLogin));\n        },\n        changeUserType: (isAdmin) => {\n            dispatch(changeUserType(isAdmin));\n        },\n        setLikes: (likes) => {\n            dispatch(setLikes(likes));\n        }\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(loginToast)\n","import { toast } from \"react-toastify\";\nimport React from 'react'\nimport LoginForm from '../containers/loginToast';\n\nconst CREDENTIALS = process.env.ORIGIN ? \"include\" : \"same-origin\";\n\nexport const get = async url => {\n  try {\n    var result = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      credentials: CREDENTIALS\n    });\n    const data = await result.json();\n    if (data.resCode === 500) {\n      toast.error(data.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      if (data.resCode === 401) {\n        console.log(\"USER_INVALID\");\n        return;\n      }\n      throw new Error(data.message);\n    }\n    return {\n      data\n    };\n  } catch (e) {\n    return {\n      code: -2,\n      message: e.message\n    };\n  }\n};\n\nexport const post = async (url, body) => {\n  try {\n    var result = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body),\n      credentials: CREDENTIALS\n    });\n    const data = await result.json();\n    if (data.resCode !== 200) {\n      if (data.resCode === 401) {\n        console.log(\"USER_INVALID\");\n        toast(<LoginForm />,{\n          autoClose: false,\n          closeOnClick: false,\n          draggable: false,\n        });\n      } else {\n        toast.error(data.message, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n      throw new Error(data.message);\n    }\n    return {\n      data\n    };\n  } catch (e) {\n    return {\n      message: e.message,\n    };\n  }\n};\n\nexport const formPost = async (url, formData) => {\n  try {\n    var result = await fetch(url, {\n      method: \"POST\",\n      // headers: {\n        // \"Content-Type\": \"multipart/form-data\"\n      // },\n      body: formData\n    });\n    const data = await result.json();\n    if (data.resCode === 500) {\n      toast.error(data.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      throw new Error(data.message);\n    }\n    return {\n      data\n    };\n  } catch (e) {\n    return {\n      code: -2,\n      message: \"未知错误\"\n    };\n  }\n};","import { get, post, formPost } from \"../util/post\";\n\nconst DEV_URL = process.env.NODE_ENV === 'development' ? 'http://localhost:3000' : 'http://www.huangchufeng.site:3000';\n\n// 发布照片\nexport const publishImgs = group => {\n  return post(`${DEV_URL}/api/imgs/publish`, group);\n};\n\n// 上传图片\nexport const uploadImg = group => {\n  return formPost(`${DEV_URL}/api/uploadImg`, group);\n};\n\n/*\n    请求所有的照片\n    /api/imgs\n */\nexport const fetchImgs = (params) => {\n  return get(`${DEV_URL}/api/imgs?pageNum=${params.pageNum}&category=${params.category}`);\n};\n\n// 获取组图\nexport const fetchGroupImgs = (groupId) => {\n  return get(`${DEV_URL}/api/groupImgs?groupId=${groupId}`);\n};\n\n// 获取照片详情\nexport const getImgDetail = (id, typeNum) => {\n  return get(`${DEV_URL}/api/imgs/${id}?typeNum=${typeNum}`);\n};\n\n// 删除照片\nexport const deleteImgById = params => {\n  return get(`${DEV_URL}/api/imgs/${params._id}/remove?imgName=${params.imgName}&groupId=${params.group_id}`);\n};\n\n// 更新图片浏览量\nexport const addImgPv = (id, num) => {\n  return get(`${DEV_URL}/api/imgs/${id}/addImgPv`, {\n    num: num,\n  });\n};\n\n// 更新图片喜欢数量\nexport const addImgFavor = (id) => {\n  return get(`${DEV_URL}/api/imgs/${id}/addImgFavor`);\n};\n\n\nexport const login = (user) => {\n  return post(`${DEV_URL}/api/user/login`, user);\n};\n\nexport const register = (user) => {\n  return post(`${DEV_URL}/api/user/register`, user);\n};\n\n// 获取用户likes\nexport const getLikes = () => {\n  return get(`${DEV_URL}/api/user/likes`)\n}\n\n// 退出\nexport const quit = () => {\n  return get(`${DEV_URL}/api/user/quit`);\n};\n\n// 获取文章列表\nexport const fetchArticles = (params) => {\n  return get(`${DEV_URL}/api/articles?pageNum=${params.pageNum}&type=${params.type}`);\n};\n\n// 获取文章详情\nexport const getArticleDetail = (id, typeNum) => {\n  return get(`${DEV_URL}/api/articles/${id}?typeNum=${typeNum}`);\n};\n\n// 创建文章\nexport const createArticle = article => {\n  return post(`${DEV_URL}/api/articles/create`, {\n    article: article\n  });\n};\n\n// 删除文章\nexport const deleteArticleById = params => {\n  return get(`${DEV_URL}/api/articles/${params.articleId}/remove?coverName=${params.coverName}`);\n};\n\n// 更新文章\nexport const updateArticleById = (id, article) => {\n  return post(`${DEV_URL}/api/articles/${id}/update`, {\n    article: article,\n  });\n};\n\n// 更新文章浏览量\nexport const addArticlePv = (id) => {\n  return get(`${DEV_URL}/api/articles/${id}/addArticlePv`);\n};\n\n// 更新图片喜欢数量\nexport const addArticleFavor = (id) => {\n  return get(`${DEV_URL}/api/articles/${id}/addArticleFavor`);\n};\n\n// 发表评论\nexport const comment = (id, comment) => {\n  return post(`${DEV_URL}/api/${id}/comment`, comment);\n};\n\n// 增加新标签\nexport const createTag = (tag) => {\n  return post(`${DEV_URL}/api/articleTags/create`, tag);\n};\n\n// 删除标签\nexport const removeTag = params => {\n  return get(`${DEV_URL}/api/articleTags/${params.tagId}/remove`);\n};\n\n// 获取所有标签\nexport const getTags = params => {\n  return get(`${DEV_URL}/api/articleTags`);\n};\n\n// 获取某篇文章的所有标签\nexport const getTagsByArticleId = params => {\n  return get(`${DEV_URL}/api/articleTags/${params.articleId}`);\n};\n\n// 根据标签name获取对应文章\nexport const getArticlesByTagName = tag => {\n  return get(`${DEV_URL}/api/tag/articles?tag=${tag}`);\n};\n\n\n\n// 获取当前城市\nexport const getLocation = params => {\n  return get(`http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js`);\n};","import React, { Component } from 'react'\nimport { Anchor } from 'antd';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { getLocation } from \"../service/fetch\";\nimport '../css/home.less'\nconst { Link } = Anchor;\nexport default class Home extends Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n        bgHeight: {\n          height: document.documentElement.clientHeight + 'px',\n        }\n      }\n  }\n\n  componentDidMount() {\n      // 高度设置\n      this.screenChange();\n      // this.getLocationCity();\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.someData !== this.state.someData\n  }\n\n  getLocationCity() {\n    getLocation().then(result => {\n        // console.log('获取当前城市', result)\n    });\n  }\n\n  screenChange() {\n    window.addEventListener('resize', () => {\n      this.setState({ \n        bgHeight: {\n          height: document.documentElement.clientHeight + 'px'\n        }\n      })\n    });\n  }\n  render() {\n    const arr = [\n      {\n        id: 'first',\n        text: 'IV'\n      }, {\n        id: 'second',\n        text: 'HUSH'\n      }, {\n        id: 'third',\n        text: 'OHIO'\n      }, {\n        id: 'forth',\n        text: 'MYTH'\n      }\n    ]\n    console.log('render');\n    \n    return (\n      <div className=\"home-page\">\n        {\n          arr.map((item, i) => {\n            const imgStyle = {\n              height: document.documentElement.clientHeight + 'px',\n              backgroundImage: `url(${require(\"../static/img/img\" +  Math.floor(Math.random()*17 + 1) + \".jpg\")})`, \n              backgroundSize: 'cover'\n            }\n            return (\n              <div key={i} id={item.id + 'Page'} className={'index-bg ' + item.id } style={ this.state.bgHeight }>\n                <div className=\"img\" style={ imgStyle }></div>\n                <div className=\"mask\" style={ this.state.bgHeight }>{ item.text }</div>\n                { i === 0 &&\n                <ul className=\"nav-ul\">\n                  <li><RouteLink to=\"/photograph\">摄影</RouteLink></li>\n                  <li><RouteLink to=\"/articles\">博客</RouteLink></li>\n                </ul>\n                 }\n              </div>\n            )\n          })\n        }\n        <Anchor>\n          <ul className=\"anchor-list\">\n            <li><Link href=\"#firstPage\" title=\"01\"/></li>\n            <li><Link href=\"#secondPage\" title=\"02\"/></li>\n            <li><Link href=\"#thirdPage\" title=\"03\"/></li>\n            <li><Link href=\"#forthPage\" title=\"04\"/></li>\n          </ul>\n        </Anchor>\n      </div>\n    )\n  }\n}","/* reducer 就是用来描述数据的形态和相应的变更\n * 1. 定义action types\n * 2. 编写reducer\n * 3. 编写与这个reducer相关的action creators\n */\n\n// action types\nconst INIT_IMGS = 'INIT_IMGS';\nconst ADD_IMG = 'ADD_IMG';\nconst DELETE_IMG = 'DELETE_IMG';\nconst ADD_IMG_FAVOR_COUNT = 'ADD_IMG_FAVOR';\n\nexport default function(state, action) {\n    if(!state) {\n        // 初始化\n        state = { \n            imgs: [],\n            curImg: {}\n        }; \n    }\n\n    switch (action.type) {\n        case INIT_IMGS:\n            // 初始化图片列表\n            if(action.pageNum > 1) {\n                return { \n                    ...state,\n                    imgs: [ ...state.imgs, ...action.imgs],\n                };\n            } else {\n                return { \n                    ...state,\n                    imgs: action.imgs,\n                };\n            }\n\n        case ADD_IMG:\n            return { \n                ...state,\n                imgs: [action.img, ...state.imgs],\n            };\n        case DELETE_IMG:\n            return {\n                ...state,\n                imgs: [\n                    ...state.imgs.slice(0, action.imgIndex),\n                    ...state.imgs.slice(action.imgIndex + 1)\n                ]\n            };\n        case ADD_IMG_FAVOR_COUNT:\n            let imgs = [];\n            state.imgs.forEach((item, index) => {\n                imgs.push(item)\n                if(index === action.index) {\n                    let count = action.likeType === 0 ? (item.likes || 0) - 1 : (item.likes || 0) + 1\n                    imgs[index].likes = count;\n                }\n            })\n            return {\n                ...state,\n                imgs\n            }\n\n        default: \n            return state;\n    }\n}\n\nexport const initImgs = (imgs, pageNum) => {\n    return { type: INIT_IMGS, imgs, pageNum }\n}\n\nexport const addImg = (img) => {\n    return { type: ADD_IMG, img }\n}\n\nexport const deleteImg = (imgIndex) => {\n    return { type: DELETE_IMG, imgIndex }\n}\n\nexport const addImgFavorCount = (index, likeType) => {\n    return { type: ADD_IMG_FAVOR_COUNT, index, likeType }\n}\n\n\n","// action types\nconst INIT_ARTICLES = 'INIT_ARTICLES';\nconst DELETE_ARTICLE = 'DELETE_ARTICLE';\nconst SET_CUR_ARTICLE = 'SET_CUR_ARTICLE';\n\nconst INIT_TAGS = 'INIT_TAGS';\nconst ADD_TAG = 'ADD_TAG';\nconst DELETE_TAG = 'DELETE_TAG';\n\nexport default function(state, action) {\n    if(!state) {\n        // 初始化\n        state = { \n            articles: [],\n            curArticle: null,       // 当前查看或编辑的文章\n            tags: [],\n        }; \n    }\n\n    switch (action.type) {\n        case INIT_ARTICLES:\n            if(action.pageNum > 1) {\n                return { \n                    ...state,\n                    articles: [...state.articles, ...action.articles],\n                };\n            } else {\n                return {\n                    ...state,\n                    articles: action.articles\n                }\n            }\n            \n        case DELETE_ARTICLE:\n            return {\n                ...state,\n                articles: [\n                    ...state.articles.slice(0, action.articleIndex),\n                    ...state.articles.slice(action.articleIndex + 1)\n                ]\n            };\n        \n        case SET_CUR_ARTICLE:\n            let cur = action.article;\n            return { \n                ...state,\n                curArticle: cur \n            };\n\n        case INIT_TAGS:\n            return { \n                ...state,\n                tags: action.tags,\n            };\n\n        case ADD_TAG:\n            return { \n                ...state,\n                tags: [action.tag, ...state.tags],\n            };\n        \n        case DELETE_TAG:\n            return {\n                ...state,\n                tags: [\n                    ...state.tags.slice(0, action.tagIndex),\n                    ...state.tags.slice(action.tagIndex + 1)\n                ]\n            };\n        default: \n            return state;\n    }\n}\n\nexport const initArticles = (articles, pageNum) => {\n    return { type: INIT_ARTICLES, articles, pageNum }\n}\n\nexport const deleteArticle = (articleIndex) => {\n    return { type: DELETE_ARTICLE, articleIndex }\n}\n\nexport const setCurArticle = (article) => {\n    return { type: SET_CUR_ARTICLE, article }\n}\n\nexport const initTags = (tags) => {\n    return { type: INIT_TAGS, tags }\n}\n\nexport const addTag = (tag) => {\n    return { type: ADD_TAG, tag }\n}\n\nexport const deleteTag = (tagIndex) => {\n    return { type: DELETE_TAG, tagIndex }\n}","import { combineReducers } from 'redux'\nimport imgsReducer from './imgs'\nimport articlesReducer from './articles'\nimport commonReducer from './common'\n\nconst reducer = combineReducers({\n    imgsReducer,\n    articlesReducer,\n    commonReducer\n})\n\nexport default reducer","import React, { Component } from 'react'\n\nimport PropTypes from 'prop-types'\nimport { Icon } from 'antd';\n\n\nconst bgColors = ['rgba(106,10,171,.3)', 'rgba(199,0,125,.3)', 'rgba(52,21,176,.3)', 'rgba(68,3,111,.3)', 'rgba(64,19,175,.3)', 'rgba(166,0,166,.3)', 'rgba(108,0,108,.3)'];\n\nexport default class Img extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imgBoxStyle: {\n                background: bgColors[Math.floor(Math.random()*bgColors.length)],\n                height: ''\n            },\n            showGroupBtn: false,\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    static propTypes = {\n        img: PropTypes.object,\n        index: PropTypes.number,\n        onDeleteImg: PropTypes.func,\n        addImgFavor: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.onResizeHandler()\n    }\n\n    componentDidMount() {\n        this.setState({\n            showGroupBtn: this.context.router.history.location.pathname.indexOf('group') === -1\n        });\n        // 这里页面加载完成之后resizeThrottle函数立即执行了, 所以函数内的start直接打印了\n        // 以后每次发生resize事件时只会触发resizeThrottle函数的返回函数\n        this.onResizeHandler();\n        window.onresize = this.resizeThrottle(this.onResizeHandler.bind(this), 500, true);\n    }\n\n    onResizeHandler() {\n        // resize节流 500ms内只能触发一次\n        let width = this.refs.imgBox.clientWidth; // 宽固定\n        let scale = this.props.img.h / this.props.img.w;\n        let height = width * scale;\n        this.refs.imgBox.style.height = height + 'px';\n    }\n\n    resizeThrottle(fn, wait, immediate) {\n        let timer = null;\n        return function() {\n            let args = arguments;\n            if (immediate) {\n                fn.apply(this, args);\n                immediate = false;\n            }\n            if (!timer) {\n                timer = setTimeout(() => {\n                    console.log('timer is null') // 每隔500ms清空一次timer;\n                    fn.apply(this, args);\n                    timer = null;\n                }, wait);\n            }\n        }\n    }\n\n    // 查看图片详情\n    toImgDetailPage = id =>  {\n        this.context.router.history.push(`/photograph/detail/${id}`);       \n    }\n\n    // 查看组图\n    toGroupImg = (e, groupId) => {\n        e.stopPropagation();\n        this.context.router.history.push(`/photograph/group/${groupId}`);\n    }\n\n    render() {\n        return (\n            <div className=\"img-wraper\" onClick={this.toImgDetailPage.bind(this, this.props.img._id)}>\n                <div className=\"img-box\" ref=\"imgBox\" style={this.state.imgBoxStyle}>   \n                    <img src={this.props.img.src} alt=\"\"/>\n                </div>\n\n                <div className=\"img-cover\">\n                    <div className=\"operate-box\">\n                       <div>\n                            <Icon className=\"heart-icon\" type=\"heart\" onClick={(e) => this.props.addImgFavor(e, this.props.img._id, this.props.index)} /> \n                            <span className=\"count-span\">{this.props.img.likes || 0}</span>\n                            { this.state.showGroupBtn &&\n                            <Icon type=\"switcher\" className=\"collection-icon\" onClick={(e) => { this.toGroupImg(e, this.props.img.group_id) }} />\n                            }\n                            { this.props.isAdmin &&\n                            <Icon type=\"delete\" className=\"collection-icon\" onClick={(e) => { this.props.onDeleteImg(e, this.props.img, this.props.index)}}/>\n                            }\n                       </div>\n                    </div>\n                    <div className=\"info-box\">\n                        { this.props.img.title }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport Img from './Img'\nimport Masonry from 'react-masonry-component';\nimport PropTypes from 'prop-types'\n\nexport default class ImgList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n    // 对父组件传入的props数据进行类型检测\n    static propTypes = {\n        imgs: PropTypes.array,\n        onDeleteImg: PropTypes.func,\n        addImgFavor: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    // 声明变量, 初始化默认值\n    static defaultProps = {\n        imgs: [],\n    }\n\n    render() {\n        return (\n            <div>\n            { this.props.imgs.length > 0 &&\n                <Masonry\n                disableImagesLoaded={false}\n                updateOnEachImageLoad={false}\n                options={{transitionDuration: 0}} >\n                    {this.props.imgs.map((img, i) =>\n                    <Img\n                        img={img}\n                        key={i}\n                        index={i}\n                        addImgFavor={this.props.addImgFavor.bind(this)}\n                        onDeleteImg={this.props.onDeleteImg.bind(this)} \n                        isAdmin={this.props.isAdmin}/>\n                    )}\n                </Masonry>\n            }\n            { this.props.imgs.length === 0 &&\n                <div style={{textAlign: 'center'}}>暂无数据</div>\n            }\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\n// import * as qiniu from 'qiniu-js'\nimport PropTypes from 'prop-types'\nimport { Upload, Form, Input, Select, Modal, Icon } from 'antd';\nimport {uploadImg, publishImgs } from \"../../service/fetch\";\n\nclass PicturesWall extends React.Component {\n    state = {\n        previewVisible: false,\n        previewImage: '',\n        fileList: [],\n    };\n\n    static propTypes = {\n        getUploadList: PropTypes.func,\n    }\n    handleCancel = () => this.setState({ previewVisible: false })\n\n    handlePreview = (file) => {\n        this.setState({\n            previewImage: file.url || file.thumbUrl,\n            previewVisible: true,\n        });\n    }\n    upload(data) {\n        const formData = new FormData();\n        formData.append(data.filename, data.file);\n        const _this = this;\n        this.getImgWH(data.file, function() {\n            uploadImg(formData).then(res => {\n                if (res.data.resCode === 200) {\n                    _this.state.fileList.push({\n                        name: res.data.fileName,\n                        status: 'done',\n                        url: res.data.url,\n                        w: data.file.w,\n                        h: data.file.h\n                    })\n                    _this.state.fileList.forEach((v, i) => {\n                        v.uid = i;\n                    })\n                    _this.setState({\n                        fileList: _this.state.fileList\n                    })\n                    _this.props.getUploadList(_this.state.fileList)\n                } \n            })\n        })\n        // console.log('data====', data);\n    }\n    // handleStart\n    getImgWH(file, cb) {\n        // 获取图片宽高\n        var reader = new FileReader();\n        reader.onload = function (e) {\n            var data = e.target.result;\n            var image = new Image();\n            image.onload = function () {\n                file.w = this.width;\n                file.h = this.height;\n                cb();\n            }\n            image.src= data;\n        }\n        reader.readAsDataURL(file);\n    }\n\n    onUploadRemove = (info) => {\n        let uid = info.uid\n        this.state.fileList.forEach((item, i) => {\n            if(uid === item.uid) {\n                this.state.fileList.splice(i, 1);\n                return false;\n            }\n        })\n        this.setState({\n            fileList: this.state.fileList\n        })\n        this.props.getUploadList(this.state.fileList)\n    }\n\n    handleChange = ({ fileList }) => {\n        console.log('change', fileList);\n    }\n\n    render() {\n        const { previewVisible, previewImage, fileList } = this.state;\n        const uploadButton = (\n            <div>\n                <Icon type=\"plus\" />\n                <div className=\"ant-upload-text\">Upload</div>\n            </div>\n        );\n        return (\n            <div className=\"clearfix\">\n                <Upload\n                    // {...uploadProps}\n                    // action=\"http://localhost:3000/api/imgs/upload\"//\"https://upload.qiniup.com\"\n                    listType=\"picture-card\"\n                    multiple\n                    fileList={fileList}\n                    customRequest={this.upload.bind(this)}\n                    onPreview={this.handlePreview}\n                    onRemove={this.onUploadRemove}\n                    onChange={this.handleChange}\n                >\n                    {fileList.length >= 3 ? null : uploadButton}\n                </Upload>\n                \n                <Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}>\n                    <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n                </Modal>\n            </div>\n        );\n    }\n}\n\nclass UploadImg extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            imgList: [],\n        }\n    }\n    static propTypes = {\n        visible: PropTypes.bool,\n        visibleHandler: PropTypes.func,\n        onAddImg: PropTypes.func\n    }\n\n    componentDidMount() {\n    }\n\n    handleOk = (e) => {\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                let group = {\n                    imgs: this.state.imgList,\n                    info: this.props.form.getFieldsValue()\n                }\n                publishImgs(group).then(result => {\n                    const { data } = result;\n                    if (data.resCode === 200) {\n                        this.props.visibleHandler(false);\n                        this.setState({\n                            imgList: []\n                        })\n                        this.props.form.resetFields();\n                        data.imglist.forEach(img => {\n                            img.title = group.info.title;\n                            this.props.onAddImg(img)\n                        })\n                    } \n                });\n            }\n        });\n    }\n\n    handleCancel = (e) => {\n        this.props.visibleHandler(false);\n    }\n\n    getUploadList = (list) => {\n        this.setState({ imgList: list });\n        console.log('接受子组件filelist', this.state.imgList);\n        \n    }\n\n    render() {\n        const categorys = ['建筑', '人像', '街拍', '风景', '其他'];\n        const { getFieldDecorator } = this.props.form;\n        const Option = Select.Option;\n        return (\n            <Modal\n                width=\"40%\"\n                title=\"上传照片\"\n                visible={this.props.visible}\n                onOk={this.handleOk}\n                onCancel={this.handleCancel}\n            >\n                <PicturesWall getUploadList={this.getUploadList.bind(this)}/>\n                <Form layout=\"inline\" onSubmit={this.handleOk}>\n                    <Form.Item label=\"类别\">\n                        {getFieldDecorator('category', { \n                            initialValue: categorys[0]\n                        })(\n                            <Select style={{ width: 100 }} onChange={this.handleTypeChange}>\n                                {categorys.map((item, i) => {\n                                    return (<Option key={i} value={item}>{item}</Option>)\n                                })}\n                            </Select>)}\n                    </Form.Item>\n                    <Form.Item label=\"标题\">\n                        {getFieldDecorator('title', {\n                            rules: [{ required: true, message: '请输入照片标题' }],\n                        })(<Input placeholder=\"为这组照片起个名字吧\" />\n                        )}\n                    </Form.Item>\n                </Form>\n            </Modal>\n        );\n    }\n}\n\nexport default Form.create({ name: 'artile-form' })(UploadImg);\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\n\nimport PropTypes from 'prop-types'\nimport { Menu, Dropdown, Icon } from 'antd';\nimport { toast } from \"react-toastify\";\nimport LoginForm from '../containers/loginToast';\nimport { connect } from 'react-redux'\nimport { changeCurNav, changeLoginStatus, changeUserType } from '../reducers/common'\nimport { quit } from \"../service/fetch\";\n\n\nconst articleNavArr = [\n    { text: '所有文章' },\n    {\n        text: '笔记',\n        type: 0\n        // child: ['原创', '分享']\n    },\n    { text: '生活', type: 1 },\n    // { text: '项目', url: '/articles' },\n    { text: 'Tags', url: '/articles/tags' },\n    { text: '摄影', url: '/photograph'},\n]\n\nconst imgNavArr = [\n    {\n        text: '所有照片',\n        // child: ['所有排序', '时间排序']\n    },\n    { text: '建筑' },\n    { text: '人像' },\n    { text: '街拍' },\n    { text: '风景' },\n    { text: '其他' },\n    { text: '博客', url: '/articles'},\n]\n\nclass Header extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            activeIndex: 0,\n            navArr: this.props.type === 0 ? imgNavArr : articleNavArr,\n            showMenu: false,\n            isLargeScreen: true,        // 大屏\n            loginText: '退出',\n        }\n    }\n\n    static propTypes = {\n        type: PropTypes.number,\n        formParentNav: PropTypes.string,\n        handleNavChange: PropTypes.func\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    componentDidMount() {\n        if(document.documentElement.clientWidth <= 960) {\n            this.setState({ isLargeScreen: false })\n        }\n        if(this.context.router.route.location.pathname === '/about') {\n            this.setState({\n                activeIndex: this.state.navArr.length\n            })\n        } else {\n            this.state.navArr.forEach((item, index) => {\n                if (item.text === this.props.formParentNav || item.text === this.props.curNav) {\n                    this.setState({\n                        activeIndex: index\n                    })\n                }\n            })\n        }\n    }\n    \n    navClickHandler = (item, index) => {\n        if(!item.child && !item.url) {\n            let url = '';\n            this.setState({\n                activeIndex: index,\n                showMenu: false,\n            });\n            if(this.props.type !== 0) {\n                url = '/articles';\n                if(item.type !== undefined) {\n                    url += `?type=${item.type}`\n                }\n                this.props.handleNavChange && this.props.handleNavChange(item.type);\n            } else {\n                url = '/photograph';\n                url += `?type=${item.text}`\n                this.props.handleNavChange && this.props.handleNavChange(item.text);\n            }\n            this.context.router.history.push(url);\n            this.props.changeCurNav && this.props.changeCurNav(this.state.navArr[index].text)\n        } else {\n            this.props.changeCurNav('')\n        }\n    }\n\n    clickAbout() {\n        // this.props.changeShowMusic(true)\n        this.setState({\n            activeIndex: this.state.navArr.length,\n            showMenu: false,\n        });\n        this.context.router.history.push('/about');\n    }\n\n    toggleMenu() {\n        this.setState({\n            showMenu: !this.state.showMenu,\n        })\n    }\n    \n    quitHandle() {\n        quit().then(result => {\n            if (result) {\n                this.setState({ isLogined: false })\n                window.sessionStorage.removeItem('user');\n                window.sessionStorage.removeItem('type');\n                this.props.changeLoginStatus(false);\n                this.props.changeUserType(false);\n                this.context.router.history.push(`/`);     \n            }\n        });\n    }\n\n    loginHandle(type) {\n        toast(<LoginForm type={type}/>,{\n            autoClose: false,\n            closeOnClick: false,\n            draggable: false,\n        });\n        this.setState({\n            showMenu: false,\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"page-header\">\n                    { (this.state.isLargeScreen || this.state.showMenu) && \n                    <ul className=\"img-nav-ul\">\n                        <li><Link to='/'><Icon type=\"home\" className=\"index-btn\" /></Link></li>\n                        { this.state.navArr.map((item, i) => {\n                                let content = '';\n                                if(item.child) {\n                                    let menu = (\n                                        <Menu>\n                                            {item.child.map((item1, i) => \n                                                <Menu.Item key={i}>\n                                                    <span>{ item1 }</span>\n                                                </Menu.Item>\n                                                )\n                                            }\n                                        </Menu>\n                                    );\n                                    content = <Dropdown overlay={menu} trigger={['click']}>\n                                                <span onClick={this.navClickHandler.bind(this, item.child, i)}>{ item.text }<Icon type=\"down\" /></span>\n                                            </Dropdown>;\n                                } else if(item.url) {\n                                    content = <Link to={ item.url }>{ item.text }</Link>;\n                                } else {\n                                    content = <span>{ item.text }</span>\n                                }\n                                return <li key={i} onClick={this.navClickHandler.bind(this, item, i)} className={ i === this.state.activeIndex ? 'active' : '' }>{ content }</li>\n                            }\n                        )}\n                        <li onClick={this.clickAbout.bind(this)} className={ this.state.navArr.length === this.state.activeIndex ? 'active' : '' }>关于</li>\n                        <li className=\"to-index-link\">\n                            { this.props.isLogined &&\n                                <span className=\"op-btn\" onClick={this.quitHandle.bind(this)}>退出</span>\n                            }\n                            { !this.props.isLogined && \n                                <span>\n                                    <span className=\"op-btn\" onClick={this.loginHandle.bind(this, 1)}>登录 </span>\n                                    <span className=\"op-btn\" onClick={this.loginHandle.bind(this, 0)}>注册</span>\n                                </span>\n                            }\n                        </li>\n                    </ul>\n                    }\n                    { !this.state.showMenu && \n                    <div>\n                        <Link to='/'><Icon type=\"home\" className=\"index-btn-1\" /></Link>\n                        <span className=\"current-nav\">{ this.props.curNav }</span>\n                    </div>\n                    }\n                    <div className=\"menu-icon\" onClick={this.toggleMenu.bind(this)}>\n                        { !this.state.showMenu && \n                            <span>\n                                <Icon type=\"bars\"/>\n                            </span>\n                            \n                        }\n                        { this.state.showMenu && \n                            <Icon type=\"close\"/>\n                        }\n                    </div>\n                </div>\n                { this.state.showMenu && \n                    <div className=\"nav-mask\" onClick={this.toggleMenu.bind(this)}></div>\n                }\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        curNav: state.commonReducer.curNav,\n        isLogined: state.commonReducer.isLogined,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n        changeLoginStatus: (isLogin) => {\n            dispatch(changeLoginStatus(isLogin));\n        },\n        changeUserType: (isAdmin) => {\n            dispatch(changeUserType(isAdmin));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Header)\n\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Spin } from 'antd';\n\nexport default class Loading extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n    }\n\n    static propTypes = {\n        show: PropTypes.bool,\n        loadMore: PropTypes.func,\n    }\n\n    handleClick() {\n        this.props.loadMore()\n    }\n\n    render() {\n        const text = this.props.show ? '正在加载' : '加载更多';\n        return (\n            <div className=\"loading-wrap\">\n            { this.props.show &&\n                <Spin size=\"small\" />\n            }\n                <span onClick={this.handleClick.bind(this)}>{ text } </span>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { initImgs, deleteImg, addImg, addImgFavorCount } from '../../reducers/imgs'\nimport { changeCurNav } from '../../reducers/common'\nimport { Button, BackTop, Spin } from 'antd';\nimport ImgList from '../../components/photograph/ImgList'\nimport UploadImg from '../../components/photograph/UploadImg'\nimport Header from '../../components/Header'\nimport Loading from '../../components/Loading'\nimport '../../css/img.less'\n\nimport { fetchImgs, deleteImgById, addImgFavor } from \"../../service/fetch\";\n\nclass ImgListContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dialogVisible: false,\n            loading: false,\n            showLoading: false,\n            pageNum: 1,\n            pageSize: 3,\n            noMore: false,  // 是否没有更多了\n        }\n    }\n    componentWillMount() {\n        let otherNav = ['所有照片', '所有文章', '笔记', '生活', 'Tags'];\n        if(!this.props.curNav || otherNav.indexOf(this.props.curNav) >= 0) {\n            this.props.changeCurNav('所有照片')\n            this.loadImgs()\n        } else {\n            this.loadImgs(this.props.curNav)\n        }\n    }\n\n    loadImgs(category = '') {\n        let params = {\n            pageNum: this.state.pageNum,\n            category,\n            pageSize: this.state.pageSize\n        }\n        \n        if(params.pageNum === 1) {\n            this.setState({ loading: true })\n            this.props.initImgs([], this.state.pageNum);\n        } else {\n            this.setState({ showLoading: true });\n        }\n        return fetchImgs(params).then(result => {\n            const {data} = result;\n            if (data) {\n                this.props.initImgs(data.imgs, this.state.pageNum);\n                this.setState({ \n                    showLoading: false,\n                    loading: false\n                })\n                if(data.allCount <= params.pageNum * params.pageSize) {\n                    this.setState({ noMore: true })\n                } else {\n                    this.setState({ noMore: false })\n                }\n            } else {\n                this.setState({ \n                    showLoading: false,\n                    loading: false,\n                    noMore: true\n                });\n            }\n        })\n    }\n\n    loadMore() {\n        this.setState({ pageNum: this.state.pageNum + 1 }, function () {\n            this.loadImgs();\n        })\n    }\n\n    visibleHandler = (flag) => {\n        this.setState({ dialogVisible: flag });\n    }\n\n    handleDeleteImg(e, img, index) {\n        let { src, _id, group_id } = img;\n        src = src.split('/');\n        let imgName = src[src.length - 1];\n        e.stopPropagation();\n        deleteImgById({_id, imgName, group_id}).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.deleteImg(index);\n            } \n        })\n    }\n    handleAddImgFavor(e, imgId, index) {\n        e.stopPropagation();\n        addImgFavor(imgId).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.addImgFavorCount(index, data.type);\n            }\n        });\n    }\n\n    handleNavChange(category) {\n        this.setState({ pageNum: 1 })\n        category = (category === '所有照片' ? '' : category);\n        this.loadImgs(category);\n    }\n\n    render () {\n        return (\n            <div>\n                <Header \n                    type={0} \n                    handleNavChange={this.handleNavChange.bind(this)}\n                />\n                {/* <Music/> */}\n                <div className=\"container img-container\">\n                    { this.props.isAdmin && \n                    <Button type=\"primary\" className=\"common-btn\" onClick={this.visibleHandler.bind(this, true)}>\n                        上传照片\n                    </Button>\n                    }\n                    <UploadImg \n                        visible={this.state.dialogVisible} \n                        visibleHandler={this.visibleHandler}\n                        onAddImg={this.props.addImg}\n                    />\n                    <Spin spinning={this.state.loading}>\n                        <ImgList\n                            imgs= {this.props.imgs}\n                            addImgFavor={this.handleAddImgFavor.bind(this)}\n                            onDeleteImg= {this.handleDeleteImg.bind(this)}\n                            isAdmin={this.props.isAdmin} \n                        />\n                    </Spin>\n                    { !this.state.noMore && \n                    <Loading \n                        show={this.state.showLoading}\n                        loadMore={this.loadMore.bind(this)}\n                    />\n                    }\n                </div>\n                <BackTop target={() => document.getElementsByClassName('container')[0]}/>\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        imgs: state.imgsReducer.imgs,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin,\n        likes: state.commonReducer.likes\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initImgs: (imgs, pageNum) => {\n            dispatch(initImgs(imgs, pageNum));\n        },\n        deleteImg: (imgIndex) => {\n            dispatch(deleteImg(imgIndex))\n        },\n        addImg: (img) => {\n            dispatch(addImg(img))\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n        addImgFavorCount: (index, type) => {\n            dispatch(addImgFavorCount(index, type));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ImgListContainer)","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Comment, Avatar, Form, Button, List, Input,\n} from 'antd';\n// import moment from 'moment';\n\nconst TextArea = Input.TextArea;\nconst CommentList = ({ comments }) => {\n  let count = comments.length;\n  if(count > 1) {\n    count += comments.reduce((prev, next) => {\n      return (prev.child ? prev.child.length : 0) + (next.child ? next.child.length : 0)\n    }, 0)\n  } else if(comments[0].child) {\n    count += comments[0].child.length\n  }\n  return (<List\n    dataSource={comments}\n    header={`${count} 条评论`}\n    itemLayout=\"horizontal\"\n    renderItem={ props => {\n      return (<Comment {...props} >\n        { props.child && props.child.length && \n          (<List\n            dataSource={props.child}\n            itemLayout=\"horizontal\"\n            renderItem={ props => (\n              <Comment {...props} />\n            )\n          }\n          />)\n        }\n      </Comment>)\n    }\n  }\n  />)\n};\n\nexport default class MyComment extends Component {\n  state = {\n    submitting: false,\n    value: '',  // 评论内容\n    comments: [],\n    placeholder: '输入评论内容...',\n    receiver: null,\n    textArea: null, // 评论输入框\n    belongId: '', // 属于哪条初始评论\n  }\n\n  static propTypes = {\n    type: PropTypes.number, // 1: 摄影, 0: 文章\n    onSubmit: PropTypes.func,\n    comments: PropTypes.array,\n    receiver: PropTypes.string   // 默认接受者是作者\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      comments: nextProps.comments\n    })\n  }\n\n  handleSubmit = () => {\n    if (!this.state.value) {\n      return;\n    } else {\n      this.setState({\n        submitting: true,\n      });\n      let params = {\n        type: this.props.type,\n        receiver: this.state.receiver || this.props.receiver,\n        content: this.state.value,\n        belongId: this.state.belongId\n      }\n      this.props.onSubmit(params, (result) => {\n        if (result.data && result.data.comment) {\n          let resComment = result.data.comment;\n          let author = '';\n          if(resComment.sender === this.props.receiver) {\n            author = '作者'\n          } else{\n            author = window.sessionStorage.getItem('user');\n          }\n          let curComment = {\n            author,\n            avatar: resComment.avatar || '',\n            content: this.state.value,\n            created_at: resComment.created_at,\n          }\n          if(params.belongId) {\n            this.state.comments.forEach(item => {\n              if(item._id + '' === params.belongId) {\n                curComment.author += `回复@作者`\n                item.child = [\n                  curComment,\n                  ...item.child\n                ]\n                return false;\n              }\n            })\n            this.setState({\n              submitting: false,\n              value: '',\n              comments: this.state.comments\n            });\n          } else {\n            this.setState({\n              submitting: false,\n              value: '',\n              comments: [\n                curComment,\n                ...this.state.comments,\n              ]\n            });\n          }\n        } else {\n          this.setState({ submitting: false })\n        }\n      });\n    }\n  }\n\n  handleChange = (e) => {\n    this.setState({\n      value: e.target.value,\n    });\n  }\n\n  // 评论输入框失焦\n  handleBlur = () => {\n    if(!this.state.value) {\n      this.setState({\n        placeholder: `输入评论内容...`,\n        receiver: null,\n        belongId: ''\n      });\n    }\n  }\n\n  // 回复评论\n  replay(belongId, sender, senderInfo) {\n    if(this.props.receiver === sender) {\n      senderInfo = '作者';\n    }\n    this.setState({\n      placeholder: `回复${senderInfo} :`,\n      receiver: sender,\n      belongId\n    });\n    this.textArea.focus()\n  }\n\n  // 查找接收用户的名称\n  queryReceiverName(belongId) {\n    let name = '';\n    this.state.comments.forEach(item => {\n      if(item._id === belongId) {\n        name = item.senderInfo;\n        return false;\n      }\n    })\n    return name;\n  }\n\n  // 评论配置\n  configComment(item) {\n    let avatar = '', res;\n    if (item.user && item.user.avatar) {\n      avatar = item.user.avatar;\n    }\n    item.avatar && (avatar = item.avatar);\n    res = {\n      avatar: avatar,\n      content: <p>{item.content}</p>,\n      datetime: item.created_at,\n      child: item.child\n    }\n    // 接收者是自己时显示回复按钮\n    if(item.isReceiver) {\n      res.actions = [ <span onClick={this.replay.bind(this, item.belongId || item._id, item.sender, item.author || item.senderInfo)}>回复</span>]\n    }\n    if(item.sender === this.props.receiver) {\n      res.author = '作者'\n    } else {\n      res.author = item.author || item.senderInfo\n    }\n    if(item.belongId) {\n      let name = this.queryReceiverName(item.belongId);\n      if(name === res.author) {\n        name = '作者';\n      }\n      res.author += `回复@${name}`\n    }\n    return res;\n  }\n\n  render() {\n    const { submitting, value, placeholder } = this.state;\n    const comments = this.state.comments.map(item => {\n      let res = this.configComment(item)\n      if(item.child) {\n        res.child = item.child.map(item1 => {\n          return this.configComment(item1)\n        })\n      }\n      return res;\n    }); \n    \n    return (\n      <div>\n        {comments.length > 0 && <CommentList comments={comments} />}\n        <Comment\n          avatar={(\n            <Avatar src=\"\" alt=\"\" />\n          )}\n          content={(\n            // <Editor\n            //   textArea={this.textArea}\n            //   onBlur={this.handleBlur}\n            //   onChange={this.handleChange}\n            //   onSubmit={this.handleSubmit}\n            //   submitting={submitting}\n            //   value={value}\n            //   placeholder={placeholder}\n            // />\n            <div>\n            <Form.Item>\n              <TextArea \n                placeholder={placeholder} \n                ref={(textArea) => this.textArea = textArea} \n                rows={4} \n                onBlur={this.handleBlur}\n                onChange={this.handleChange} \n                value={value} />\n            </Form.Item>\n            <Form.Item>\n              <Button\n                className=\"common-btn\"\n                htmlType=\"submit\"\n                loading={submitting}\n                onClick={this.handleSubmit}\n                type=\"primary\">\n                评论\n              </Button>\n            </Form.Item>\n          </div>\n          )}\n        />\n      </div>\n    );\n  }\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Icon, message, Spin } from 'antd';\nimport { getImgDetail, comment as commentImg, addImgPv, addImgFavor } from \"../../service/fetch\";\nimport MyComment from '../../components/Comment'\n\nclass ImgDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            id: this.props.match.params.id,\n            imgEnlargeble: false,\n            comments: [],\n            img: {},\n            curPage: 0,\n            clickTypeNum: 0,             // 是否可翻页, 0表示可翻页, -1或1表示已经到最底部和最顶部了\n        }\n    }\n\n    static propTypes = {\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    componentWillMount() {\n        this.getImgDetail(this.state.id);\n    }\n\n    getImgDetail(id, typeNum) {\n        this.setState({ loading: true });\n        getImgDetail(id, typeNum).then(result => {\n            const { data } = result;\n            if (data) {\n                if (data.noMore) {\n                    message.warning('已经是最后一张了', 1);\n                    this.setState({ clickTypeNum: typeNum })\n                } else {\n                    this.setState({\n                        img: data.img[0],\n                        id: data.img[0]._id,\n                        clickTypeNum: 0,\n                        comments: data.comment,\n                    })\n                    this.context.router.history.push(`/photograph/detail/${data.img[0]._id}`);\n                    this.handleBrowser();\n                }\n                this.setState({ loading: false });\n            }\n        });\n    }\n\n    // 放大/缩小图片\n    resizeImgHandler = () => {\n        this.setState({ \n            imgEnlargeble : !this.state.imgEnlargeble, \n        });\n    }\n\n    // 发表评论\n    handleSubmit = (comment, cb) => {\n        commentImg(this.state.id, comment).then(result => {\n            if (result) {\n                cb && cb(result);\n            }\n        });\n    }\n\n    handleBrowser() {\n        setTimeout(() => {\n            addImgPv(this.state.id).then(result => {\n                const { data } = result;\n                if (data) {\n                    let img = Object.assign(this.state.img, { pv: (this.state.img.pv || 0)+ 1 })\n                    this.setState({\n                        img: img\n                    });\n                }\n            });\n        }, 2000);\n    }\n    \n    // 上一张or上一张\n    lastOrNextImg = (typeNum) => {\n        this.getImgDetail(this.state.id, typeNum);\n    }\n\n    clickImgFavorHandler() {\n        addImgFavor(this.state.id).then(result => {\n            const { data } = result;\n            if (data) {\n                let count = data.type === 0 ? (this.state.img.likes || 0) - 1 : (this.state.img.likes || 0) + 1\n                let img = Object.assign(this.state.img, { likes: count })\n                this.setState({\n                    img: img\n                });\n            }\n        });\n    }\n\n    // 查看组图\n    toGroupImg = (groupId) => {\n        this.context.router.history.push(`/photograph/group/${groupId}`);\n    }\n\n    goBack() {\n        this.context.router.history.push(`/photograph`);\n    }\n\n    render() {\n        return (\n            <div className=\"img-detail-page\">\n                {/* <Music/> */}\n                <Spin spinning={this.state.loading}>\n                    <div className={[\"img-switch-wraper\", this.state.imgEnlargeble ? 'active' : ''].join(' ')}>\n                        <div className=\"center-box\">\n                            { !this.state.imgEnlargeble &&\n                                // <Link to=\"/photograph\">\n                                    <Icon type=\"close\" className=\"icon close-icon\" onClick={this.goBack.bind(this)}/>\n                                // </Link>\n                            }\n                            <Icon type=\"left\" className=\"icon left-icon\" onClick={this.lastOrNextImg.bind(this, -1)}/>\n                            <img src={this.state.img.src} alt=\"\" />\n                            <Icon type={ this.state.imgEnlargeble ? 'shrink' : 'arrows-alt'} className=\"icon size-icon\" onClick={ this.resizeImgHandler.bind(this) } />\n                            <Icon type=\"right\" className=\"icon right-icon\" onClick={this.lastOrNextImg.bind(this, 1)}/>\n                        </div>\n                    </div>\n                    <div className=\"detail-box\">\n                        <div className=\"operate-box\">\n                            <div>\n                                <Icon className=\"icon heart-icon\" type=\"heart\" onClick={this.clickImgFavorHandler.bind(this)}/> \n                                <span className=\"count-span\">{this.state.img.likes || 0}</span>\n                                <Icon className=\"icon\" type=\"eye\" />\n                                <span className=\"count-span\">{this.state.img.pv || 0}</span>\n                                <Icon type=\"switcher\" className=\"icon collection-icon\" onClick={(e) => { this.toGroupImg(this.state.img.groupId) }}/>\n                            </div>\n                        </div>\n                        <div className=\"comment-wrap\">\n                            <MyComment \n                                type={1}\n                                receiver={this.state.img.author}\n                                comments={this.state.comments} \n                                onSubmit={this.handleSubmit.bind(this)} \n                            />\n                        </div>\n                    </div>\n                </Spin>\n            </div>\n        )\n    }\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        imgs: state.imgs,  // 告诉Connect组件我们需要什么数据\n        curImg: state.curImg\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ImgDetail)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nconst musics = ['3940933', '3947469', '428350031', '448917907', '19466001', '29729012', '16649839', '1651735', '21469678', '410925920', \n'425684928', '466333783', '400690256', '19535983', '4405800', '3947469', '4111185', '18861490', '462516170', '417833085'];\nclass Music extends Component {\n  render() {\n    return (\n      <div className={'music-wrap ' + (this.props.changeMusic ? 'show' : 'hide')}>\n        <iframe id=\"musicFrame\" title=\"music\" frameBorder=\"no\" border=\"0\" marginWidth=\"0\" marginHeight=\"0\" width=\"200\" height=\"86\"\n         src={`//music.163.com/outchain/player?type=2&id=${musics[Math.floor(Math.random()*musics.length)]}&auto=1&height=66`}>\n        </iframe>\n      </div>\n    )\n  }\n}\n\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n  return {\n      changeMusic: state.commonReducer.changeMusic\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n)(Music)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { initImgs, deleteImg, addImg, addImgFavorCount } from '../../reducers/imgs'\nimport PropTypes from 'prop-types'\nimport { changeCurNav } from '../../reducers/common'\nimport ImgList from '../../components/photograph/ImgList'\nimport Header from '../../components/Header'\nimport Music from '../../components/Music'\nimport { Button, Spin } from 'antd';\nimport '../../css/img.less'\n\nimport { fetchGroupImgs, deleteImgById, addImgFavor } from \"../../service/fetch\";\n\nclass ImgListContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            groupId: this.props.match.params.id,\n            groupInfo: {}\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    componentWillMount() {\n        this.loadImgs();\n        if(!this.props.curNav) {\n            this.props.changeCurNav('所有照片')\n        }\n    }\n\n    loadImgs() {\n        this.setState({ loading: true })\n        this.props.initImgs([], 1);\n        return fetchGroupImgs(this.state.groupId).then(result => {\n            const {data} = result;\n            if (data) {\n                this.setState({\n                    groupInfo: data.group.info\n                })\n                this.props.initImgs(data.group.imgs, 1);\n            }\n            this.setState({ loading: false })\n        })\n    }\n\n    handleDeleteImg(e, img, index) {\n        let { src, _id, group_id } = img;\n        src = src.split('/');\n        let imgName = src[src.length - 1];\n        e.stopPropagation();\n        deleteImgById({_id, imgName, group_id}).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.deleteImg(index);\n            } \n        })\n    }\n\n    handleAddImgFavor(e, imgId, index) {\n        e.stopPropagation();\n        addImgFavor(imgId).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.addImgFavorCount(index);\n            }\n        });\n    }\n\n    handleNavChange(category) {\n        this.setState({ pageNum: 1 })\n        category = (category === '所有照片' ? '' : category);\n        this.loadImgs(category);\n    }\n    goBack() {\n        this.context.router.history.push(`/photograph`);\n    }\n\n    render () {\n        return (\n            <div>\n                <Header \n                    type={0} \n                    handleNavChange={this.handleNavChange.bind(this)}\n                />\n                <Music/>\n                <div className=\"container img-container\">\n                    <Spin spinning={this.state.loading}>\n                        <div className=\"group-info\">\n                            <p className=\"title\">{ this.state.groupInfo.title }</p>\n                            <ul className=\"tag-list\">\n                                <li>{ this.state.groupInfo.category }</li>\n                            </ul>\n                            <p className=\"date\">{ this.state.groupInfo.created_at }</p>\n                        </div>\n                        <ImgList\n                            imgs= {this.props.imgs}\n                            addImgFavor={this.handleAddImgFavor.bind(this)}\n                            onDeleteImg= {this.handleDeleteImg.bind(this)}\n                            isAdmin={this.props.isAdmin}\n                        />\n                        <div className=\"group-info\">\n                            <Button onClick={this.goBack.bind(this)}>返 回</Button>\n                        </div>\n                    </Spin>\n                </div>\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        imgs: state.imgsReducer.imgs,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initImgs: (imgs, pageNum) => {\n            dispatch(initImgs(imgs, pageNum));\n        },\n        deleteImg: (imgIndex) => {\n            dispatch(deleteImg(imgIndex))\n        },\n        addImg: (img) => {\n            dispatch(addImg(img))\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n        addImgFavorCount: (index) => {\n            dispatch(addImgFavorCount(index));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ImgListContainer)","import React, { Component } from 'react'\n\nimport PropTypes from 'prop-types'\nimport { Icon } from 'antd';\n\nexport default class Article extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    static propTypes = {\n        article: PropTypes.object,\n        index: PropTypes.number,\n        deleteArticle: PropTypes.func,\n        editArticle: PropTypes.func,\n        viewDetail: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    render() {\n        let article = this.props.article;\n        return (\n            <div className=\"article-wraper\">\n                <div className={[\"cover-box\", (!article.cover_url ? 'no-cover' : '')].join(' ') }>\n                    <img v-if={article.cover_url} src={article.cover_url} alt=\"\"/>\n                </div>\n               <div className=\"info\">\n                    <h3 className=\"title\">\n                        <p onClick={this.props.viewDetail.bind(this, article._id)}>{ article.title }</p>\n                        { this.props.isAdmin &&\n                            <span className=\"operate-btn\">\n                                <Icon type=\"delete\" onClick={this.props.deleteArticle.bind(this, article._id, this.props.index, article.cover_url)}/>\n                                <Icon type=\"edit\" onClick={this.props.editArticle.bind(this, article._id)}/>\n                            </span>\n                        }\n                    </h3>\n                    <p className=\"time\">{ article.created_at }\n                        <span><Icon type=\"message\" className=\"icon\"/>{ article.comments || 0 }</span>\n                        <span><Icon type=\"fire\" className=\"icon\"/>{ article.pv || 0 }</span>\n                    </p>\n                    <div className=\"description\">{ article.description }</div>\n               </div>\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport Article from '../article/Article'\nimport PropTypes from 'prop-types'\nexport default class ArticleList extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n    // 对父组件传入的props数据进行类型检测\n    static propTypes = {\n        articles: PropTypes.array,\n        deleteArticle: PropTypes.func,\n        editArticle: PropTypes.func,\n        viewDetail: PropTypes.func,\n        isAdmin: PropTypes.bool\n    }\n\n    // 声明变量, 初始化默认值\n    static defaultProps = {\n        articles: [],\n    }\n\n    render() {\n        return (\n            <div>\n                { this.props.articles.length > 0 &&\n                    <div>\n                        {this.props.articles.map((article, i) =>\n                        <Article\n                            article={article}\n                            key={article._id}\n                            index={i} \n                            deleteArticle={this.props.deleteArticle.bind(this)}\n                            editArticle={this.props.editArticle.bind(this)}\n                            viewDetail={this.props.viewDetail.bind(this)}\n                            isAdmin={this.props.isAdmin}\n                            />\n                        )}\n                    </div>\n                }\n                { this.props.articles.length === 0 &&\n                    <div style={{textAlign: 'center'}}>暂无数据</div>\n                }\n            </div>\n        )\n    }\n}\n\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport { BackTop, Spin } from 'antd';\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport ArticleList from '../../components/article/ArticleList'\nimport Header from '../../components/Header'\nimport Loading from '../../components/Loading'\nimport { initArticles, deleteArticle } from '../../reducers/articles'\nimport { changeCurNav } from '../../reducers/common'\nimport '../../css/article.less'\n\nimport { fetchArticles, deleteArticleById, getArticlesByTagName } from \"../../service/fetch\";\n\nclass ArticleListContainer extends Component {\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            showLoading: false,\n            pageNum: 1,\n            pageSize: 10,\n            noMore: true,  // 是否没有更多了\n        }\n    }\n\n    componentWillMount() {\n        let search = this.context.router.route.location.search;\n        let type = search.substring(search.length-1);\n        let tag = this.props.match.params.tag;\n        if(type) {\n            this.loadArticles(type);\n            let curNav = (type === '0' ? '笔记' : '生活');\n            this.props.changeCurNav(curNav)\n        } else {\n            // 按标签获取\n            if(tag) {\n                this.props.getArticlesByTagName(tag);\n            } else {\n                this.loadArticles();\n            }\n            if(!this.props.curNav) {\n                this.props.changeCurNav('所有文章')\n            }\n        }\n    }\n\n    loadArticles(type = '') {\n        let params = {\n            pageNum: this.state.pageNum,\n            pageSize: this.state.pageSize,\n            type,\n        }\n        this.setState({ showLoading: true });\n        if(params.pageNum === 1) {\n            this.setState({ loading: true })\n            this.props.initArticles([], this.state.pageNum);\n        }\n        fetchArticles(params).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.initArticles(data.articles, this.state.pageNum);\n                this.setState({ showLoading: false });\n                if(data.allCount <= params.pageNum * params.pageSize) {\n                    this.setState({ noMore: true })\n                } else {\n                    this.setState({ noMore: false })\n                }\n                this.setState({ loading: false })\n            } else {\n                this.setState({ \n                    showLoading: false,\n                    loading: false,\n                    noMore: true\n                });\n            }\n        })\n    }\n\n    loadMore() {\n        this.setState({ pageNum: this.state.pageNum + 1 }, function () {\n            this.loadArticles();\n        })\n    }\n\n    handleNavChange(type) {\n        this.loadArticles(type);\n    }\n\n    onDeleteArticle(articleId, index, url) {\n        let coverName = ''\n        if(url) {\n        url = url.split('/');\n            coverName = url[url.length - 1];\n        }\n        deleteArticleById({articleId, coverName}).then(result => {\n            const { data } = result;\n            if (data) {\n                this.props.deleteArticle(index);\n            } \n        })\n    }    \n\n    onEditArticle = (articleId) => {\n        this.context.router.history.push(`/articles/edit/${articleId}`);\n    }\n\n    onViewDetail = (articleId) => {\n        this.context.router.history.push(`/articles/detail/${articleId}`);\n    }\n\n    render () {\n        return (\n            <div>\n                <Header\n                    type={1}\n                    formParentNav=\"所有文章\"\n                    handleNavChange={this.handleNavChange.bind(this)}/>\n                <div className=\"container article-container\">\n                    { this.props.isAdmin && \n                    <Link to='/articles/new'>写文章</Link>\n                    }\n                    <Spin spinning={this.state.loading}>\n                        <div>\n                            <ArticleList \n                                articles= {this.props.articles} \n                                deleteArticle={this.onDeleteArticle.bind(this)}\n                                editArticle={this.onEditArticle.bind(this)}\n                                viewDetail={this.onViewDetail.bind(this)}\n                                isAdmin={this.props.isAdmin}\n                            />\n                            { !this.state.noMore &&\n                            <Loading \n                                show={this.state.showLoading}\n                                loadMore={this.loadMore.bind(this)}\n                            />\n                        }\n                        </div>\n                    </Spin>\n                    <BackTop target={() => document.getElementsByClassName('container')[0]}/>\n                </div>\n            </div>\n        )\n    }\n}\n\n// 当前组件需要的state数据\nconst mapStateToProps = (state) => {\n    return {\n        articles: state.articlesReducer.articles,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \n// 当前组件需要发起的事件\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initArticles: (articles, pageNum) => {\n            dispatch(initArticles(articles, pageNum));\n        },\n        getArticlesByTagName: (tag) => {\n            getArticlesByTagName(tag).then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(initArticles(data.articles));\n                } \n            });\n        },\n\n        deleteArticle: (articleId) => {\n            dispatch(deleteArticle(articleId));\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ArticleListContainer)","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Icon, message, Spin } from 'antd';\nimport Header from '../../components/Header'\nimport MyComment from '../../components/Comment'\nimport { getArticleDetail, comment as commentArticle, addArticlePv, addArticleFavor } from \"../../service/fetch\";\nimport { changeCurNav } from '../../reducers/common'\nimport Highlight from 'react-highlight'\nimport 'highlight.js/styles/hopscotch.css'\n\n// atom-one-dark-reasonable\n// gruvbox-dark\n// hopscotch\n\nclass ArticleDetail extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: false,\n            id: this.props.match.params.id,\n            comments: [],\n            article: {},\n            curPage: 0,\n            clickTypeNum: 0,             // 是否可翻页, 0表示可翻页, -1或1表示已经到最底部和最顶部了\n            tags: [],\n        }\n    }\n    static propTypes = {\n        artilceId: PropTypes.number,\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    handleBrowser() {\n        setTimeout(() => {\n            addArticlePv(this.state.id).then(result => {\n                const { data } = result;\n                if (data) {\n                    let article = Object.assign(this.state.article, { pv: (this.state.article.pv || 0) + 1 })\n                    this.setState({\n                        article: article\n                    });\n                }\n            });\n        }, 2000);\n    }\n\n    componentWillMount() {\n        this.articleDetail(this.state.id);\n        this.props.changeCurNav('文章详情');\n    }\n\n    // 获取某一篇文章及评论\n    articleDetail(id, typeNum = '') {\n        this.setState({ loading: true });\n        getArticleDetail(id, typeNum).then(result => {\n            const { data } = result;\n            if (data) {\n                if (data.noMore) {\n                    message.warning('已经是最后一篇了', 1);\n                    this.setState({ clickTypeNum: typeNum })\n                } else {\n                    this.setState({\n                        article: data.article[0],\n                        id: data.article[0]._id,\n                        clickTypeNum: 0,\n                        comments: data.comment,\n                        tags: data.tags\n                    })\n                    this.context.router.history.push(`/articles/detail/${data.article[0]._id}`);\n                    this.handleBrowser();\n                }\n            }\n            this.setState({ loading: false });\n        });\n    }\n\n    // 上一篇or上一篇\n    lastOrNextArticle = (typeNum) => {\n        this.articleDetail(this.state.id, typeNum);\n    }\n\n    // 更新文章喜欢数量\n    clickArticleFavorHandler() {\n        console.log('click');\n        \n        addArticleFavor(this.state.id).then(result => {\n            const { data } = result;\n            if (data) {\n                let count = data.type === 0 ? (this.state.article.likes || 0) - 1 : (this.state.article.likes || 0) + 1\n                let article = Object.assign(this.state.article, { likes: count })\n                this.setState({\n                    article: article\n                });\n            }\n        });\n    }\n\n    // 发表评论\n    handleSubmit = (comment, cb) => {\n        commentArticle(this.state.id, comment).then(result => {\n            if (result) {\n                cb && cb(result);\n            }\n        });\n    }\n    // 返回列表页\n    backListPage = () => {\n        this.props.changeCurNav('')\n    }\n\n    render() {\n        let date;\n        if (this.state.article.created_at) {\n            date = this.state.article.created_at.replace(/-/g, '.');\n        }\n        return (\n            <div>\n                <Header type={1} />\n                <div className=\"container article-detail-container\">\n                    <Spin spinning={this.state.loading}>\n                    <div className=\"left\">\n                        <Link to=\"/articles\" onClick={this.backListPage.bind(this)}><Icon type=\"left\" className=\"back-btn\" /></Link>\n                        <div className=\"top-info-box\">\n                            <h2>{this.state.article.title}</h2>\n                            <div className=\"top-bottom\">\n                                <span>{date} Beijing</span>\n                                <span className=\"browse-num\"><Icon type=\"fire\" className=\"fire-icon\" />{this.state.article.pv || 0}</span>\n                                <span className=\"browse-num like-num\" onClick={this.clickArticleFavorHandler.bind(this)}><Icon type=\"heart\" className=\"fire-icon\" />{this.state.article.likes || 0}</span>\n                            </div>\n                        </div>\n                        <div className=\"left-bottom-box\">\n                            <ul className=\"tag-list\">\n                                {this.state.tags && this.state.tags.map(item => {\n                                    return (<li key={item._id}>{item.name}</li>)\n                                })}\n                            </ul>\n                            {this.state.article.description}\n                        </div>\n                        <div className=\"control-box\">\n                            <span onClick={this.lastOrNextArticle.bind(this, -1)}>上一篇</span>\n                            <span onClick={this.lastOrNextArticle.bind(this, 1)}>下一篇</span>\n                        </div>\n                    </div>\n                        <div className=\"right\">\n                            <Highlight className='language-name-of-snippet' innerHTML={true}>\n                                {this.state.article.content}\n                            </Highlight>\n                            <MyComment \n                                type={0}\n                                receiver={this.state.article.author}\n                                comments={this.state.comments} \n                                onSubmit={this.handleSubmit.bind(this)} \n                            />\n                        </div>\n                    </Spin>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        curArticle: state.articlesReducer.curArticle,\n        articles: state.articlesReducer.articles,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ArticleDetail)\n\n","import React from 'react'\nimport { Form, Input, Icon, Upload, Select, Col, Row } from 'antd';\nimport PropTypes from 'prop-types'\n\n// 输入表单组件\nclass ArticleForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedTags: [],\n            loading: false, // 上传封面loading\n            coverUrl: '',   // 封面url\n            coverName: '',  // 封面名称\n        }\n    }\n    static propTypes = {\n        article: PropTypes.object,\n        onRef: PropTypes.func,\n        uploadCover: PropTypes.func\n    }\n    componentDidMount() {\n        this.props.onRef(this);\n        this.props.form.setFieldsValue({ type: 0 })\n        \n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.article && !this.props.article) {\n            this.initForm(nextProps.article)\n        }\n    }\n\n    initForm(article) {\n        let { type, title, description } = article;\n        let option = {\n            type,\n            title,\n            description,\n        }\n        this.setState({\n            coverUrl: article.cover_url,\n            selectedTags: article.tags.map(item => {\n                return item.name\n            })\n        })\n        this.props.form.setFieldsValue(option);\n\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n            }\n        });\n    }\n\n    handleTagChange(value) {\n        this.setState({ selectedTags: value })\n    }\n\n    onUploadCover(data) {\n        this.setState({ loading: true });\n        this.props.uploadCover(data, (res) => {\n            if(res.data.resCode === 200) {\n                this.setState({\n                    coverUrl: res.data.url,\n                    loading: false,\n                    coverName: res.data.fileName\n                })\n            }\n        })\n    }\n\n    getFormData = () => {\n        let res;\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n                res = Object.assign(\n                    { \n                        tags: this.state.selectedTags,\n                        coverName: this.state.coverName,\n                        coverUrl: this.state.coverUrl\n                    }, \n                    this.props.form.getFieldsValue()\n                );\n            }\n        });\n        return res;\n    }\n\n    render() {\n        const uploadButton = (\n            <div>\n                <Icon type={this.state.loading ? 'loading' : 'plus'} />\n                <div className=\"ant-upload-text\">文章封面</div>\n            </div>\n        );\n        const Option = Select.Option;\n        const { getFieldDecorator } = this.props.form;\n        const selects = [];\n        if (this.props.allTags) {\n            for (let i = 0; i < this.props.allTags.length; i++) {\n                selects.push(<Option key={this.props.allTags[i].name}>{this.props.allTags[i].name}</Option>);\n            }\n        }\n\n        return (\n            <Form onSubmit={this.handleSubmit} className=\"artile-form\">\n                <Row>\n                    <Col span={4} >\n                        <Form.Item>\n                            {getFieldDecorator('type')(\n                                <Select style={{ width: 100 }}>\n                                    <Option value={0}>笔记</Option>\n                                    <Option value={1}>生活</Option>\n                                </Select>)}\n                        </Form.Item>\n                    </Col>\n                    <Col span={20} >\n                        <Form.Item>\n                            {getFieldDecorator('title', {\n                                rules: [{ required: true, message: '请输入文章标题' }],\n                            })(\n                                <Input placeholder=\"文章标题\" />\n                            )}\n                        </Form.Item>\n                    </Col>\n                </Row>\n                <Form.Item>\n                    {getFieldDecorator('description', {\n                        rules: [{ required: true, message: '请输入文章描述' }],\n                    })(\n                        <Input placeholder=\"描述下文章吧\" />\n                    )}\n                </Form.Item>\n                <Form.Item>\n                    <Row>\n                        <Col span={18} >\n                            <Select\n                                mode=\"tags\"\n                                placeholder='选择标签'\n                                value={this.state.selectedTags}\n                                onChange={this.handleTagChange.bind(this)}\n                                style={{ width: '100%' }}\n                            >\n                                {selects}\n                            </Select>\n                        </Col>\n                        <Col span={2} ></Col>\n                        <Col span={2} >\n                        <Upload\n                            listType=\"picture-card\"\n                            className=\"cover-uploader\"\n                            customRequest={this.onUploadCover.bind(this)}\n                            showUploadList={false}\n                        >\n                            {this.state.coverUrl ? <img src={this.state.coverUrl} alt=\"cover\" /> : uploadButton}\n                        </Upload>\n                        </Col>\n                    </Row>\n                </Form.Item>\n            </Form>\n        );\n    }\n}\n\nexport default Form.create({ name: 'artile-form' })(ArticleForm);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport E from 'wangeditor';\n// import ReactMarkdown from 'react-markdown'\n// import Divider from 'antd';\n\nexport default class EditContent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            editorContent: '',\n            // editorContent: `\n            // This block of Markdown contains <a href=\"https://en.wikipedia.org/wiki/HTML\">HTML</a>, and will require the <code>html-parser</code> AST plugin to be loaded, in addition to setting the <code class=\"prop\">escapeHtml</code> property to false.\n            // `\n        };\n    }\n\n    static propTypes = {\n        article: PropTypes.object,\n        onRef: PropTypes.func\n    }\n\n    componentDidMount() {\n        this.props.onRef(this)\n        const elem = this.refs.editorElem;\n        this.editor = new E(elem);\n        this.editor.customConfig.uploadImgShowBase64 = true\n        // 使用 onchange 函数监听内容的变化，并实时更新到 state 中\n        this.editor.customConfig.onchange = html => {\n            this.setState({\n                editorContent: html\n            })\n        }\n        this.editor.create();\n    }\n    \n    componentWillReceiveProps(nextProps) {\n        if(nextProps.article && !this.props.article) {\n            this.setState({\n                editorContent: nextProps.article.content\n            })\n            this.editor.txt.html(nextProps.article.content);\n        }\n    }\n\n    getContent() {\n        return { content: this.state.editorContent };\n    }\n    \n    render() {\n        return (\n            // <ReactMarkdown className=\"edit-wrapper\" source={this.state.editorContent} />\n            <div ref=\"editorElem\" className=\"edit-wrapper\">\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Header from '../../components/Header'\nimport { setCurArticle, initTags } from '../../reducers/articles'\nimport '../../css/article.less'\nimport { Button } from 'antd';\nimport { getArticleDetail, createArticle, updateArticleById, getTags, uploadImg } from \"../../service/fetch\";\nimport EditForm from '../../components/article/EditForm'\nimport EditContent from '../../components/article/EditContent'\n\nclass EditArticleContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            articleId: this.props.match.params.id,\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n\n    async componentDidMount() {\n        if (this.state.articleId) {\n            await this.props.articleDetail(this.state.articleId);\n        }\n        this.props.initTags();\n    }\n\n    componentWillUnmount() {\n        this.props.resetCurArticle();\n    }\n\n    uploadCover(data, cb) {\n        const formData = new FormData();\n        formData.append(data.filename, data.file);\n        uploadImg(formData).then(res => {\n            if (res.data.resCode === 200) {\n                cb && cb(res)\n                \n            }\n        })\n    }\n\n    // 保存文章 id存在时为编辑状态\n    saveArticleHandler() {\n        let formData = this.form.getFormData();\n        if(!formData) {\n            return;\n        }\n        formData = Object.assign(this.child.getContent(), formData);\n        if (this.state.articleId) {\n            // console.log('编辑====: ', formData);\n            updateArticleById(this.state.articleId, formData).then(result => {\n                const { data } = result;\n                if (data) {\n                    this.context.router.history.push(`/articles`);\n                }\n            });\n        } else {\n            // console.log('新建====: ', formData);\n            createArticle(formData).then(result => {\n                const { data } = result;\n                if (data) {\n                    this.context.router.history.push(`/articles`);\n                }\n            });\n        }\n    }\n\n    onRef = (ref) => {\n        this.child = ref;\n    }\n\n    render() {\n        return (\n            <div>\n                <Header type={1} />\n                <div className=\"container edit-container\">\n                    <EditForm\n                        wrappedComponentRef={(form) => this.form = form}\n                        article={this.props.curArticle}\n                        allTags={this.props.tags}\n                        onRef={this.onRef}\n                        uploadCover={this.uploadCover}\n                    />\n                    <EditContent\n                        onRef={this.onRef}\n                        article={this.props.curArticle}\n                    />\n                    <Button type=\"primary\" className=\"common-btn operate-btn\" onClick={this.saveArticleHandler.bind(this)}>\n                        发布\n                    </Button>\n                    <Button className=\"operate-btn\"><Link to=\"/articles\">取消</Link></Button>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        curArticle: state.articlesReducer.curArticle,\n        tags: state.articlesReducer.tags,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initTags: () => {\n            getTags().then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(initTags(data.tags));\n                }\n            });\n        },\n        articleDetail(id, typeNum = '') {\n            return getArticleDetail(id, typeNum).then(result => {\n                const { data } = result;\n                if (data) {\n                    let obj = Object.assign({ tags: data.tags }, data.article[0])\n                    dispatch(setCurArticle(obj));\n                }\n            });\n        },\n        resetCurArticle() {\n            dispatch(setCurArticle(null));\n        }\n    }\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(EditArticleContainer)","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n    Tag, Input, Icon,\n} from 'antd';\nimport { TweenOneGroup } from 'rc-tween-one';\n\nexport default class EditTag extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            inputVisible: false,\n            inputValue: '',\n        }\n    }\n    \n    static propTypes = {\n        tags: PropTypes.array,\n        initTags: PropTypes.func,\n        addTag: PropTypes.func,\n        deleteTag: PropTypes.func,\n        isAdmin: PropTypes.bool,\n        clickTagHandler: PropTypes.func\n    };\n\n    handleClose = (removedTag) => {\n        // const tags = this.props.tags.filter(tag => tag !== removedTag);\n        let tagIndex = 0;\n        try {\n            this.props.tags.forEach((item, index) => {\n                if(item._id === removedTag._id) {\n                    tagIndex = index;\n                    return false;\n                }\n            })\n        } catch(e) {\n            throw new Error('current deleted tag_id is not exist');\n        }\n        this.props.deleteTag(removedTag._id, tagIndex);\n        // this.setState({ tags });\n    }\n\n    showInput = () => {\n        this.setState({ inputVisible: true }, () => this.input.focus());\n    }\n\n    handleInputChange = (e) => {\n        this.setState({ inputValue: e.target.value });\n    }\n\n    clickTagHandler(tag) {\n        this.props.clickTagHandler(tag);\n    }\n\n    handleInputConfirm = () => {\n        const { inputValue } = this.state;\n        this.props.addTag(inputValue);\n        this.setState({\n            inputVisible: false,\n            inputValue: '',\n        });\n    }\n\n    saveInputRef = input => this.input = input\n\n    forMap = (tag) => {\n        const tagElem = (\n            <Tag\n                closable={this.props.isAdmin ? true : false}\n                onClose={(e) => {\n                    e.preventDefault();\n                    this.handleClose(tag);\n                }}\n            >\n                <span onClick={this.clickTagHandler.bind(this, tag.name)}>{tag.name}</span>\n            </Tag>\n        );\n        return (\n            <span key={tag._id} style={{ display: 'inline-block' }}>\n                {tagElem}\n            </span>\n        );\n    }\n\n    render() {\n        const { inputVisible, inputValue } = this.state;\n        let tags = this.props.tags || [];\n        \n        const tagChild = tags.map(this.forMap);\n        return (\n            <div>\n                <div style={{ marginBottom: 16 }}>\n                    <TweenOneGroup\n                        enter={{\n                            scale: 0.8, opacity: 0, type: 'from', duration: 100,\n                            onComplete: (e) => {\n                                e.target.style = '';\n                            },\n                        }}\n                        leave={{ opacity: 0, width: 0, scale: 0, duration: 200 }}\n                        appear={false}\n                    >\n                        {tagChild}\n                    </TweenOneGroup>\n                </div>\n                {inputVisible && (\n                    <Input\n                        ref={this.saveInputRef}\n                        type=\"text\"\n                        size=\"small\"\n                        style={{ width: 78 }}\n                        value={inputValue}\n                        onChange={this.handleInputChange}\n                        onBlur={this.handleInputConfirm}\n                        onPressEnter={this.handleInputConfirm}\n                    />\n                )}\n                {!inputVisible && this.props.isAdmin && (\n                    <Tag\n                        onClick={this.showInput}\n                        style={{ background: '#fff', borderStyle: 'dashed' }}>\n                        <Icon type=\"plus\" /> New Tag\n                    </Tag>\n                )}\n            </div>\n        );\n    }\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Header from '../../components/Header'\nimport EditTag from '../../components/article/editTag'\nimport { createTag, removeTag, getTags } from '../../service/fetch'\nimport { addTag, deleteTag, initTags } from '../../reducers/articles'\nimport { changeCurNav } from '../../reducers/common'\nimport '../../css/article.less'\n\nclass Tags extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        }\n    }\n\n    static contextTypes = {\n        router: PropTypes.object.isRequired,\n    }\n    \n    componentWillMount() {\n        this.props.initTags();      \n        setTimeout(() => {\n            this.props.changeCurNav('Tags')\n        }, 0)  \n    }\n\n    clickTagHandler(tag) {\n        this.context.router.history.push(`/articles/tags/${tag}`);\n    }\n    \n    render() {\n        \n        return (\n            <div>\n                <Header type={1} formParentNav=\"Tags\"/>\n                <div className=\"container article-container\">\n                    <EditTag\n                        isAdmin={this.props.isAdmin}\n                        tags={this.props.tags}\n                        initTags={this.props.initTags}\n                        addTag={this.props.addTag}\n                        deleteTag={this.props.deleteTag}\n                        clickTagHandler={this.clickTagHandler.bind(this)}\n                    />\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        tags: state.articlesReducer.tags,\n        curNav: state.commonReducer.curNav,\n        isAdmin: state.commonReducer.isAdmin\n    }\n}\n  \nconst mapDispatchToProps = (dispatch) => {\n    return {\n        initTags: () => {\n            getTags().then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(initTags(data.tags));\n                } \n            });\n        },\n        deleteTag: (tagId, tagIndex) => {\n            removeTag({tagId: tagId}).then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(deleteTag(tagIndex));\n                } \n            });\n        },\n        addTag: (tag) => {\n            createTag({name: tag}).then(result => {\n                const { data } = result;\n                if (data) {\n                    dispatch(addTag(data.res));\n                } \n            });\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav));\n        },\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Tags)\n","import React, { Component } from 'react'\nimport { Icon } from 'antd';\nimport Header from '../components/Header'\nimport { connect } from 'react-redux'\nimport { changeCurNav, changeShowMusic } from '../reducers/common'\nclass Footer extends Component {\n    componentWillMount() {\n        setTimeout(() => {\n            this.props.changeCurNav('关于')\n        }, 0)  \n        this.props.changeShowMusic(true)\n    }\n    changeSong() {\n        this.props.changeShowMusic(false)\n        setTimeout(() => {\n            this.props.changeShowMusic(true)\n        }, 0)  \n    }\n  render() {\n    return (\n        <div>\n            <Header />\n            <div className=\"about-me\">\n                <img className=\"avator\" alt=\"\" src={require('../static/img/avator.jpeg')} />\n                <div>\n                    <p>麻烦让我一夜暴富 实在不行的话 半个月也行 一年也可以</p>\n                    <p><a target=\"blank\" href=\"https://github.com/HuangChuFeng\"><Icon type=\"github\" /> <span>github</span></a>&nbsp;&nbsp;&nbsp;&nbsp;\n                    <a target=\"blank\" href=\"https://weibo.com/5454891945/profile\"><Icon type=\"weibo-circle\" /> <span>__cranky</span></a></p>\n                    <p onClick={this.changeSong.bind(this)}><span className=\"change-song-btn\">换歌</span></p>\n                </div>\n            </div>\n        </div>\n    )\n  }\n}\nconst mapStateToProps = (state) => {\n    return {\n        curNav: state.commonReducer.curNav,\n    }\n}\n  \nconst mapDispatchToProps = (dispatch) => {\n    return {\n        changeShowMusic: (show) => {\n            dispatch(changeShowMusic(show));\n        },\n        changeCurNav: (nav) => {\n            dispatch(changeCurNav(nav))\n        }\n    }\n}\n  \nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Footer)","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport Home from './containers/Home'\nimport reducer from './reducers/index'\nimport 'lib-flexible'\nimport './index.less'\n\nimport ImgList from './containers/photograph/ImgList'\nimport ImgDetail from './containers/photograph/ImgDetail'\nimport Group from './containers/photograph/Group'\nimport ArticleList from './containers/article/ArticleList'\nimport ArticleDetail from './containers/article/ArticleDetail'\nimport EditArticle from './containers/article/EditArticle'\nimport ArticlesTags from './containers/article/Tags'\nimport Music from './components/Music'\nimport About from './components/About'\n\nimport {BrowserRouter as Router, Route } from 'react-router-dom';\nimport { ToastContainer } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\n\n// createStore 函数专门生产state和dispatch的集合， 调用后返回state和dispatch\nconst store = createStore(reducer);\nconsole.log('NODE_ENV', process.env.NODE_ENV);\n\nReactDOM.render(\n  <Provider store={store}>\n    <div>\n      <Music />\n      <Router>\n        <div>\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/about\" component={About} />\n          <Route exact path=\"/photograph\" component={ImgList} />\n          <Route exact path=\"/photograph/detail/:id\" component={ImgDetail} />\n          <Route exact path=\"/photograph/group/:id\" component={Group} />\n          <Route exact path=\"/articles\" component={ArticleList} />\n          <Route exact path=\"/articles/detail/:id\" component={ArticleDetail} />\n          <Route exact path=\"/articles/new\" component={EditArticle} />\n          <Route exact path=\"/articles/edit/:id\" component={EditArticle} />\n          <Route exact path=\"/articles/tags\" component={ArticlesTags} />\n          <Route exact path=\"/articles/tags/:tag\" component={ArticleList} />\n          <ToastContainer />\n        </div>\n      </Router>\n    </div>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}